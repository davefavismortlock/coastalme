<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CoastalME (Coastal Modelling Environment): gis_raster.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CoastalME (Coastal Modelling Environment)
   </div>
   <div id="projectbrief">Simulates the long-term behaviour of complex coastlines</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">gis_raster.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="gis__raster_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">/*===============================================================================================================================</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> This file is part of CoastalME, the Coastal Modelling Environment.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> CoastalME is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">===============================================================================================================================*/</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment">//#include &lt;assert.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; </div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using</span> std::cout;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keyword">using</span> std::cerr;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">using</span> std::endl;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">using</span> std::ios;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">using</span> std::ifstream;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">using</span> std::stringstream;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">using</span> std::to_string;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;gdal_priv.h&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;gdal_alg.h&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="cme_8h.html">cme.h</a>&quot;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="simulation_8h.html">simulation.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="raster__grid_8h.html">raster_grid.h</a>&quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="coast_8h.html">coast.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/*==============================================================================================================================</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"> Reads a raster DEM of basement elevation data to the Cell array</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">===============================================================================================================================*/</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keywordtype">int</span> CSimulation::nReadBasementDEMData(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;   <span class="comment">// Use GDAL to create a dataset object, which then opens the DEM file</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   GDALDataset* pGDALDataset = (GDALDataset *) GDALOpen(m_strInitialBasementDEMFile.c_str(), GA_ReadOnly);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   <span class="keywordflow">if</span> (NULL == pGDALDataset)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;   {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      <span class="comment">// Can&#39;t open file (note will already have sent GDAL error message to stdout)</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot open &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; <span class="stringliteral">&quot; for input: &quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a8dd02718b31898d01d79b2d9252fa1b2">RTN_ERR_DEMFILE</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160; </div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <span class="comment">// Opened OK, so get GDAL basement DEM dataset information</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   m_strGDALBasementDEMDriverCode = pGDALDataset-&gt;GetDriver()-&gt;GetDescription();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   m_strGDALBasementDEMDriverDesc = pGDALDataset-&gt;GetDriver()-&gt;GetMetadataItem(GDAL_DMD_LONGNAME);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   m_strGDALBasementDEMProjection = pGDALDataset-&gt;GetProjectionRef();</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   <span class="comment">// If we have reference units, then check that they are in meters (note US spelling)</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <span class="keywordflow">if</span> (! m_strGDALBasementDEMProjection.empty())</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keywordtype">string</span> strTmp = strToLower(&amp;m_strGDALBasementDEMProjection);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      <span class="keywordflow">if</span> (strTmp.find(<span class="stringliteral">&quot;meter&quot;</span>) == string::npos)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;         <span class="comment">// error: x-y values must be in metres</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;GIS file x-y values (&quot;</span> &lt;&lt; m_strGDALBasementDEMProjection &lt;&lt; <span class="stringliteral">&quot;) in &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; <span class="stringliteral">&quot; must be in metres&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a8dd02718b31898d01d79b2d9252fa1b2">RTN_ERR_DEMFILE</a>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   <span class="comment">// Now get dataset size, and do some rudimentary checks</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   m_nXGridMax = pGDALDataset-&gt;GetRasterXSize();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <span class="keywordflow">if</span> (m_nXGridMax == 0)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;   {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="comment">// Error: silly number of columns specified</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;invalid number of columns (&quot;</span> &lt;&lt; m_nXGridMax &lt;&lt; <span class="stringliteral">&quot;) in &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; endl;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a8dd02718b31898d01d79b2d9252fa1b2">RTN_ERR_DEMFILE</a>;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;   }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   m_nYGridMax = pGDALDataset-&gt;GetRasterYSize();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   <span class="keywordflow">if</span> (m_nYGridMax == 0)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="comment">// Error: silly number of rows specified</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;invalid number of rows (&quot;</span> &lt;&lt; m_nYGridMax &lt;&lt; <span class="stringliteral">&quot;) in &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; endl;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a8dd02718b31898d01d79b2d9252fa1b2">RTN_ERR_DEMFILE</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <span class="comment">// Get geotransformation info (see http://www.gdal.org/classGDALDataset.html)</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <span class="keywordflow">if</span> (CE_Failure == pGDALDataset-&gt;GetGeoTransform(m_dGeoTransform))</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="comment">// Can&#39;t get geotransformation (note will already have sent GDAL error message to stdout)</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; endl;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a8dd02718b31898d01d79b2d9252fa1b2">RTN_ERR_DEMFILE</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   <span class="comment">// Get the X and Y cell sizes, in external CRS units. Note that while the cell is supposed to be square, it may not be exactly so due to oddities with some GIS calculations</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="keywordtype">double</span> dCellSideX = <a class="code" href="cme_8h.html#ae3b6dc50cfc97050529faa5e0bd66136">tAbs</a>(m_dGeoTransform[1]);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <span class="keywordtype">double</span> dCellSideY = <a class="code" href="cme_8h.html#ae3b6dc50cfc97050529faa5e0bd66136">tAbs</a>(m_dGeoTransform[5]);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   <span class="comment">// Check that the cell is more or less square</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;   <span class="keywordflow">if</span> (! bFPIsEqual(dCellSideX, dCellSideY, 1e-2))</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="comment">// Error: cell is not square enough</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cell is not square in &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; <span class="stringliteral">&quot;, is &quot;</span> &lt;&lt; dCellSideX &lt;&lt; <span class="stringliteral">&quot; x &quot;</span> &lt;&lt; dCellSideY &lt;&lt; endl;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#ac2a38a420ed1a2fc66d93a5d16d6a27b">RTN_ERR_RASTER_FILE_READ</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   <span class="comment">// Calculate the average length of cell side, the cell&#39;s diagonal, and the area of a cell (in external CRS units)</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   m_dCellSide = (dCellSideX + dCellSideY) / 2.0;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   m_dCellArea = m_dCellSide * m_dCellSide;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   m_dCellDiagonal = hypot(m_dCellSide, m_dCellSide);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <span class="comment">// And calculate the inverse values</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   m_dInvCellSide = 1 / m_dCellSide;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   m_dInvCellDiagonal = 1 / m_dCellDiagonal;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <span class="comment">// Save some values in external CRS</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   m_dNorthWestXExtCRS = m_dGeoTransform[0] - (m_dGeoTransform[1] / 2);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   m_dNorthWestYExtCRS = m_dGeoTransform[3] - (m_dGeoTransform[5] / 2);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   m_dSouthEastXExtCRS = m_dGeoTransform[0] + (m_nXGridMax * m_dGeoTransform[1]) + (m_dGeoTransform[1] / 2);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   m_dSouthEastYExtCRS = m_dGeoTransform[3] + (m_nYGridMax * m_dGeoTransform[5]) + (m_dGeoTransform[5] / 2);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <span class="comment">// And calc the grid area in external CRS units</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   m_dExtCRSGridArea = <a class="code" href="cme_8h.html#ae3b6dc50cfc97050529faa5e0bd66136">tAbs</a>(m_dNorthWestXExtCRS - m_dSouthEastXExtCRS) * <a class="code" href="cme_8h.html#ae3b6dc50cfc97050529faa5e0bd66136">tAbs</a>(m_dNorthWestYExtCRS * m_dSouthEastYExtCRS);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <span class="comment">// Now get GDAL raster band information</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   GDALRasterBand* pGDALBand = pGDALDataset-&gt;GetRasterBand(1);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="keywordtype">int</span> nBlockXSize = 0, nBlockYSize = 0;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   pGDALBand-&gt;GetBlockSize(&amp;nBlockXSize, &amp;nBlockYSize);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   m_strGDALBasementDEMDataType = GDALGetDataTypeName(pGDALBand-&gt;GetRasterDataType());</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   <span class="comment">// If we have value units, then check them</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   <span class="keywordtype">string</span> strUnits = pGDALBand-&gt;GetUnitType();</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <span class="keywordflow">if</span> ((! strUnits.empty()) &amp;&amp; (strUnits.find(<span class="stringliteral">&quot;m&quot;</span>) == string::npos))</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="comment">// Error: value units must be m</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;DEM vertical units are (&quot;</span> &lt;&lt; strUnits &lt;&lt; <span class="stringliteral">&quot; ) in &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; <span class="stringliteral">&quot;, should be &#39;m&#39;&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a8dd02718b31898d01d79b2d9252fa1b2">RTN_ERR_DEMFILE</a>;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <span class="comment">// If present, get the missing value (NODATA) setting</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);                        <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <span class="keywordtype">double</span> dMissingValue = pGDALBand-&gt;GetNoDataValue();               <span class="comment">// Will fail for some formats</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <span class="keywordflow">if</span> (dMissingValue != m_dMissingValue)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#a59123483b5c7cb88ece24246ae3cd4b9">NOTE</a> &lt;&lt; <span class="stringliteral">&quot;NODATA value in &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; dMissingValue &lt;&lt; <span class="stringliteral">&quot;\n      instead using default NODATA value &quot;</span> &lt;&lt;  m_dMissingValue &lt;&lt; endl;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   <span class="comment">// Next allocate memory for a 2D array of raster cell objects: tell the user what is happening</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   AnnounceAllocateMemory();</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="keywordtype">int</span> nRet = m_pRasterGrid-&gt;<a class="code" href="class_c_geom_raster_grid.html#a6803b51c3b9d357eae0311108f0d6322">nCreateGrid</a>();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   <span class="keywordflow">if</span> (nRet != <a class="code" href="cme_8h.html#a71d8d6db0e41ed2022d0a95b9a70528c">RTN_OK</a>)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">return</span> nRet;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <span class="comment">// Allocate memory for a 1D floating-point array, to hold the scan line for GDAL</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <span class="keywordtype">float</span>* pfScanline = <span class="keyword">new</span> <span class="keywordtype">float</span>[m_nXGridMax];</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keywordflow">if</span> (NULL == pfScanline)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="comment">// Error, can&#39;t allocate memory</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot allocate memory for &quot;</span> &lt;&lt; m_nXGridMax &lt;&lt; <span class="stringliteral">&quot; x 1D array&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#a0d90a78d3916bbdd05ec604056dd0231">RTN_ERR_MEMALLOC</a>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="comment">// Now read in the data</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; m_nYGridMax; j++)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="comment">// Read scanline</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keywordflow">if</span> (CE_Failure == pGDALBand-&gt;RasterIO(GF_Read, 0, j, m_nXGridMax, 1, pfScanline, m_nXGridMax, 1, GDT_Float32, 0, 0, NULL))</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;         <span class="comment">// Error while reading scanline</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; endl;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a8dd02718b31898d01d79b2d9252fa1b2">RTN_ERR_DEMFILE</a>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="comment">// All OK, so read scanline into cell elevations (including any missing values)</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; m_nXGridMax; i++)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;         <span class="comment">// Deal with any NaN values</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;         <span class="keywordtype">double</span> dTmp = pfScanline[i];</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;         <span class="keywordflow">if</span> (! <a class="code" href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a>(dTmp))</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160; </div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;         <span class="keywordflow">if</span> (dTmp == dMissingValue)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;         m_pRasterGrid-&gt;m_Cell[i][j].<a class="code" href="class_c_geom_cell.html#acf0c3a72abcae2a02a748663ae34937f">SetBasementElev</a>(dTmp);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160; </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="comment">// Finished, so get rid of dataset object</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   GDALClose(pGDALDataset);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <span class="comment">// Get rid of memory allocated to this array</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keyword">delete</span>[] pfScanline;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a71d8d6db0e41ed2022d0a95b9a70528c">RTN_OK</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/*========================================================================================================================================</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">Mark cells which are at the edge of a bounding box which represents the valid part of the grid, as defined by the basement layer. The valid part of the grid may be the whole grid, or only part of the whole grid. The bounding box may be an irregular shape (but may not have re-entrant edges): simple shapes are more likely to work correctly</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">========================================================================================================================================*/</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="keywordtype">int</span> CSimulation::nMarkBoundingBoxEdgeCells(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   <span class="comment">// The bounding box must touch the edge of the grid at least once on each side of the grid, so store these points. Search in a clockwise direction around the edge of the grid</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   vector&lt;CGeom2DIPoint&gt; VPtiBoundingBoxCorner;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <span class="comment">// Start with the top (north) edge</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="keywordtype">bool</span> bFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; m_nXGridMax; nX++)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">if</span> (bFound)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = 0; nY &lt; m_nYGridMax; nY++)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;         <span class="keywordflow">if</span> (! m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#aec408a18eeffd11484779022733cd396">bBasementElevIsMissingValue</a>())</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;         {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <a class="code" href="class_c_geom2_d_i_point.html">CGeom2DIPoint</a> PtiTmp(nX, nY);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            VPtiBoundingBoxCorner.push_back(PtiTmp);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            bFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;         }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="keywordflow">if</span> (! bFound)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      <a class="code" href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">LogStream</a> &lt;&lt; m_ulIter &lt;&lt; <span class="stringliteral">&quot;: north (top) &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a1d0ecec0fe1a13e5a9aa4339656dca01">RTN_ERR_BOUNDING_BOX</a>;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <span class="comment">// Do the same for the right (east) edge</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   bFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = 0; nY &lt; m_nYGridMax; nY++)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">if</span> (bFound)</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = m_nXGridMax-1; nX &gt;= 0; nX--)</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;         <span class="keywordflow">if</span> (! m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#aec408a18eeffd11484779022733cd396">bBasementElevIsMissingValue</a>())</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;         {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <a class="code" href="class_c_geom2_d_i_point.html">CGeom2DIPoint</a> PtiTmp(nX, nY);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            VPtiBoundingBoxCorner.push_back(PtiTmp);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            bFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;         }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      }</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keywordflow">if</span> (! bFound)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <a class="code" href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">LogStream</a> &lt;&lt; m_ulIter &lt;&lt; <span class="stringliteral">&quot;: east (right) edge of bounding box not found&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a1d0ecec0fe1a13e5a9aa4339656dca01">RTN_ERR_BOUNDING_BOX</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   }</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <span class="comment">// Do the same for the south (bottom) edge</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   bFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = m_nXGridMax-1; nX &gt;= 0; nX--)</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;      <span class="keywordflow">if</span> (bFound)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = m_nYGridMax-1; nY &gt;= 0; nY--)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;         <span class="keywordflow">if</span> (! m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#aec408a18eeffd11484779022733cd396">bBasementElevIsMissingValue</a>())</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;         {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="class_c_geom2_d_i_point.html">CGeom2DIPoint</a> PtiTmp(nX, nY);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            VPtiBoundingBoxCorner.push_back(PtiTmp);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            bFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;         }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="keywordflow">if</span> (! bFound)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <a class="code" href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">LogStream</a> &lt;&lt; m_ulIter &lt;&lt; <span class="stringliteral">&quot;: south (bottom) edge of bounding box not found&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a1d0ecec0fe1a13e5a9aa4339656dca01">RTN_ERR_BOUNDING_BOX</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="comment">// And finally repeat for the west (left) edge</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   bFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = m_nYGridMax-1; nY &gt;= 0; nY--)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <span class="keywordflow">if</span> (bFound)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; m_nXGridMax; nX++)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;         <span class="keywordflow">if</span> (! m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#aec408a18eeffd11484779022733cd396">bBasementElevIsMissingValue</a>())</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;         {</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <a class="code" href="class_c_geom2_d_i_point.html">CGeom2DIPoint</a> PtiTmp(nX, nY);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;            VPtiBoundingBoxCorner.push_back(PtiTmp);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            bFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;         }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="keywordflow">if</span> (! bFound)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <a class="code" href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">LogStream</a> &lt;&lt; m_ulIter &lt;&lt; <span class="stringliteral">&quot;: west (left) edge of bounding box not found&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a1d0ecec0fe1a13e5a9aa4339656dca01">RTN_ERR_BOUNDING_BOX</a>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="comment">// OK, so we have a point on each side of the grid, so start at this point and find the edges of the bounding box. Go round in a clockwise direction: top (north) edge first</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = VPtiBoundingBoxCorner[0].nGetX(); nX &lt;= VPtiBoundingBoxCorner[1].nGetX(); nX++)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      bFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = VPtiBoundingBoxCorner[0].nGetY(); nY &lt; m_nYGridMax; nY++)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;         <span class="keywordflow">if</span> (m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#aec408a18eeffd11484779022733cd396">bBasementElevIsMissingValue</a>())</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;         {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            m_ulMissingValueBasementCells++;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;         }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160; </div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;         <span class="comment">// Found a bounding box edge cell</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;         m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a930df09c981e96fa470aed2222f897cd">SetBoundingBoxEdge</a>(<a class="code" href="cme_8h.html#aa5969c5b17a9d72b077efdfd1addcca8">NORTH</a>);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;         m_VEdgeCell.push_back(<a class="code" href="class_c_geom2_d_i_point.html">CGeom2DIPoint</a>(nX, nY));</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;         m_VEdgeCellEdge.push_back(<a class="code" href="cme_8h.html#aa5969c5b17a9d72b077efdfd1addcca8">NORTH</a>);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;         bFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">if</span> (! bFound)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;         <a class="code" href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">LogStream</a> &lt;&lt; m_ulIter &lt;&lt; <span class="stringliteral">&quot;: could not find a bounding box edge cell for grid column &quot;</span> &lt;&lt; nX &lt;&lt; endl;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a1d0ecec0fe1a13e5a9aa4339656dca01">RTN_ERR_BOUNDING_BOX</a>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="comment">// Right (east) edge</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = VPtiBoundingBoxCorner[1].nGetY(); nY &lt;= VPtiBoundingBoxCorner[2].nGetY(); nY++)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      bFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = VPtiBoundingBoxCorner[1].nGetX(); nX &gt;= 0; nX--)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;         <span class="keywordflow">if</span> (m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#aec408a18eeffd11484779022733cd396">bBasementElevIsMissingValue</a>())</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;         {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            m_ulMissingValueBasementCells++;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;         }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;         <span class="comment">// Found a bounding box edge cell</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;         m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a930df09c981e96fa470aed2222f897cd">SetBoundingBoxEdge</a>(<a class="code" href="cme_8h.html#a2599c6272328075d83bf3ec2e2ac61f0">EAST</a>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;         m_VEdgeCell.push_back(<a class="code" href="class_c_geom2_d_i_point.html">CGeom2DIPoint</a>(nX, nY));</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;         m_VEdgeCellEdge.push_back(<a class="code" href="cme_8h.html#a2599c6272328075d83bf3ec2e2ac61f0">EAST</a>);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;         bFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      }</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keywordflow">if</span> (! bFound)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;         <a class="code" href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">LogStream</a> &lt;&lt; m_ulIter &lt;&lt; <span class="stringliteral">&quot;: could not find a bounding box edge cell for grid row &quot;</span> &lt;&lt; nY &lt;&lt; endl;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a1d0ecec0fe1a13e5a9aa4339656dca01">RTN_ERR_BOUNDING_BOX</a>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="comment">// Bottom (south) edge</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = VPtiBoundingBoxCorner[2].nGetX(); nX &gt;= VPtiBoundingBoxCorner[3].nGetX(); nX--)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      bFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = VPtiBoundingBoxCorner[2].nGetY(); nY &gt;= 0; nY--)</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         <span class="keywordflow">if</span> (m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#aec408a18eeffd11484779022733cd396">bBasementElevIsMissingValue</a>())</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;         {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            m_ulMissingValueBasementCells++;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;         }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;         <span class="comment">// Found a bounding box edge cell</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;         m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a930df09c981e96fa470aed2222f897cd">SetBoundingBoxEdge</a>(<a class="code" href="cme_8h.html#aa2f8a49263c41d9d53170a3d2dee27c5">SOUTH</a>);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160; </div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;         m_VEdgeCell.push_back(<a class="code" href="class_c_geom2_d_i_point.html">CGeom2DIPoint</a>(nX, nY));</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;         m_VEdgeCellEdge.push_back(<a class="code" href="cme_8h.html#aa2f8a49263c41d9d53170a3d2dee27c5">SOUTH</a>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;         bFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="keywordflow">if</span> (! bFound)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;         <a class="code" href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">LogStream</a> &lt;&lt; m_ulIter &lt;&lt; <span class="stringliteral">&quot;: could not find a bounding box edge cell for grid column &quot;</span> &lt;&lt; nX &lt;&lt; endl;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a1d0ecec0fe1a13e5a9aa4339656dca01">RTN_ERR_BOUNDING_BOX</a>;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="comment">// Left (west) edge</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = VPtiBoundingBoxCorner[3].nGetY(); nY &gt;= VPtiBoundingBoxCorner[0].nGetY(); nY--)</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = VPtiBoundingBoxCorner[3].nGetX(); nX &lt; m_nXGridMax-1; nX++)</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="comment">//for (int nX = VPtiBoundingBoxCorner[3].nGetX(); nX &lt; VPtiBoundingBoxCorner[3].nGetX(); nX++) //APayo April 2018</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;         <span class="keywordflow">if</span> (m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#aec408a18eeffd11484779022733cd396">bBasementElevIsMissingValue</a>())</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;         {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            m_ulMissingValueBasementCells++;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;         }</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;         <span class="comment">// Found a bounding box edge cell</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;         m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a930df09c981e96fa470aed2222f897cd">SetBoundingBoxEdge</a>(<a class="code" href="cme_8h.html#a7e58a8bcaedcb87e1fdd169edd6105a8">WEST</a>);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;         m_VEdgeCell.push_back(<a class="code" href="class_c_geom2_d_i_point.html">CGeom2DIPoint</a>(nX, nY));</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;         m_VEdgeCellEdge.push_back(<a class="code" href="cme_8h.html#a7e58a8bcaedcb87e1fdd169edd6105a8">WEST</a>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160; </div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;         bFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160; </div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keywordflow">if</span> (! bFound)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;         <a class="code" href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">LogStream</a> &lt;&lt; m_ulIter &lt;&lt; <span class="stringliteral">&quot;: could not find a bounding box edge cell for grid row &quot;</span> &lt;&lt; nY &lt;&lt; endl;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a1d0ecec0fe1a13e5a9aa4339656dca01">RTN_ERR_BOUNDING_BOX</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a71d8d6db0e41ed2022d0a95b9a70528c">RTN_OK</a>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">/*==============================================================================================================================</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment"> Reads all other raster GIS datafiles into the RasterGrid array</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">===============================================================================================================================*/</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="keywordtype">int</span> CSimulation::nReadRasterGISData(<span class="keywordtype">int</span> <span class="keyword">const</span> nDataItem, <span class="keywordtype">int</span> <span class="keyword">const</span> nLayer)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;{</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   <span class="keywordtype">string</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      strGISFile,</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      strDriverCode,</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      strDriverDesc,</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      strProjection,</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      strDataType;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <span class="keywordflow">switch</span> (nDataItem)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aeeb2eb80f77340ed3988d502d7c6b370">LANDFORM_RASTER</a>):</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="comment">// Initial Landform Class GIS data</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      strGISFile = m_strInitialLandformFile;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160; </div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a51eaf5dac80ca22157d491b3b8559445">INTERVENTION_CLASS_RASTER</a>):</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="comment">// Intervention class</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      strGISFile = m_strInterventionClassFile;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a12194d8610af4fb565cf1c7ed7616e81">INTERVENTION_HEIGHT_RASTER</a>):</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="comment">// Intervention height</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      strGISFile = m_strInterventionHeightFile;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a1a3fe6f9e4396cfe9d9a506dbd5c3c42">SUSP_SED_RASTER</a>):</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="comment">// Initial Suspended Sediment GIS data</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      strGISFile = m_strInitialSuspSedimentFile;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a37eb630702e841414032e3fb04a34e18">FINE_UNCONS_RASTER</a>):</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="comment">// Initial Unconsolidated Fine Sediment GIS data</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      strGISFile = m_VstrInitialFineUnconsSedimentFile[nLayer];</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af132a16851a356e5261344db86611995">SAND_UNCONS_RASTER</a>):</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="comment">// Initial Unconsolidated Sand Sediment GIS data</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      strGISFile = m_VstrInitialSandUnconsSedimentFile[nLayer];</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160; </div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#acb5af8424727c3c9cb820749daa0990d">COARSE_UNCONS_RASTER</a>):</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="comment">// Initial Unconsolidated Coarse Sediment GIS data</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      strGISFile = m_VstrInitialCoarseUnconsSedimentFile[nLayer];</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a16379f7ac89e701557c92d6383161664">FINE_CONS_RASTER</a>):</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="comment">// Initial Consolidated Fine Sediment GIS data</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      strGISFile = m_VstrInitialFineConsSedimentFile[nLayer];</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ab5466484c0192fbb085776644470a3b6">SAND_CONS_RASTER</a>):</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="comment">// Initial Consolidated Sand Sediment GIS data</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      strGISFile = m_VstrInitialSandConsSedimentFile[nLayer];</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160; </div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ab710943b3b1fb290df8a377040de845e">COARSE_CONS_RASTER</a>):</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="comment">// Initial Consolidated Coarse Sediment GIS data</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      strGISFile = m_VstrInitialCoarseConsSedimentFile[nLayer];</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="comment">// Do we have a filename for this data item? If we don&#39;t then just return</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <span class="keywordflow">if</span> (! strGISFile.empty())</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="comment">// We do have a filename, so use GDAL to create a dataset object, which then opens the GIS file</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      GDALDataset* pGDALDataset = (GDALDataset *) GDALOpen(strGISFile.c_str(), GA_ReadOnly);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keywordflow">if</span> (NULL == pGDALDataset)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;         <span class="comment">// Can&#39;t open file (note will already have sent GDAL error message to stdout)</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot open &quot;</span> &lt;&lt; strGISFile &lt;&lt; <span class="stringliteral">&quot; for input: &quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#ac2a38a420ed1a2fc66d93a5d16d6a27b">RTN_ERR_RASTER_FILE_READ</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="comment">// Opened OK, so get dataset information</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      strDriverCode = pGDALDataset-&gt;GetDriver()-&gt;GetDescription();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      strDriverDesc = pGDALDataset-&gt;GetDriver()-&gt;GetMetadataItem (GDAL_DMD_LONGNAME);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      strProjection = pGDALDataset-&gt;GetProjectionRef();</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="comment">// If we have reference units, then check that they are in meters (note US spelling)</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="comment">//   if (! strProjection.empty())</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="comment">//   {</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   <span class="comment">//      string strTmp = strToLower(&amp;strProjection);</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;         <span class="comment">// TODO this is causing problems with the test data</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   <span class="comment">//      if ((strTmp.find(&quot;kilometer&quot;) != string::npos) || (strTmp.find(&quot;meter&quot;) == string::npos))</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="comment">//      {</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="comment">// error: x-y values must be in metres</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <span class="comment">//         cerr &lt;&lt; ERR &lt;&lt; &quot;GIS file x-y values (&quot; &lt;&lt; strProjection &lt;&lt; &quot;) in &quot; &lt;&lt; strGISFile &lt;&lt; &quot; must be &#39;meter&#39;&quot; &lt;&lt; endl;</span></div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <span class="comment">//         return (RTN_ERR_RASTER_FILE_READ);</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <span class="comment">//      }</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <span class="comment">//   }</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="comment">// Get geotransformation info</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="keywordtype">double</span> dGeoTransform[6];</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">if</span> (CE_Failure == pGDALDataset-&gt;GetGeoTransform(dGeoTransform))</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;         <span class="comment">// Can&#39;t get geotransformation (note will already have sent GDAL error message to stdout)</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; strGISFile &lt;&lt; endl;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#ac2a38a420ed1a2fc66d93a5d16d6a27b">RTN_ERR_RASTER_FILE_READ</a>);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="comment">// Now get dataset size, and do some checks</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordtype">int</span> nTmpXSize = pGDALDataset-&gt;GetRasterXSize();</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">if</span> (nTmpXSize != m_nXGridMax)</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;         <span class="comment">// Error: incorrect number of columns specified</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;different number of columns in &quot;</span> &lt;&lt; strGISFile &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; nTmpXSize &lt;&lt; <span class="stringliteral">&quot;) and &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt;  <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; m_nXGridMax &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#ac2a38a420ed1a2fc66d93a5d16d6a27b">RTN_ERR_RASTER_FILE_READ</a>);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160; </div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keywordtype">int</span> nTmpYSize = pGDALDataset-&gt;GetRasterYSize();</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">if</span> (nTmpYSize != m_nYGridMax)</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;         <span class="comment">// Error: incorrect number of rows specified</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;different number of rows in &quot;</span> &lt;&lt; strGISFile &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt;  nTmpYSize &lt;&lt; <span class="stringliteral">&quot;) and &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; m_nYGridMax &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#ac2a38a420ed1a2fc66d93a5d16d6a27b">RTN_ERR_RASTER_FILE_READ</a>);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="keywordtype">double</span> dTmp = m_dGeoTransform[0] - (m_dGeoTransform[1] / 2);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="keywordflow">if</span> (! bFPIsEqual(dTmp, m_dNorthWestXExtCRS, <a class="code" href="cme_8h.html#a89311a98397f9d6967d2cb10d5152d77">TOLERANCE</a>))</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;         <span class="comment">// Error: different min x from DEM file</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;different min x values in &quot;</span> &lt;&lt; strGISFile &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; dTmp &lt;&lt; <span class="stringliteral">&quot;) and &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; m_dNorthWestXExtCRS &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#ac2a38a420ed1a2fc66d93a5d16d6a27b">RTN_ERR_RASTER_FILE_READ</a>);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      }</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      dTmp = m_dGeoTransform[3] - (m_dGeoTransform[5] / 2);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordflow">if</span> (! bFPIsEqual(dTmp, m_dNorthWestYExtCRS, <a class="code" href="cme_8h.html#a89311a98397f9d6967d2cb10d5152d77">TOLERANCE</a>))</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;         <span class="comment">// Error: different min x from DEM file</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;different min y values in &quot;</span> &lt;&lt; strGISFile &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; dTmp &lt;&lt; <span class="stringliteral">&quot;) and &quot;</span> &lt;&lt; m_strInitialBasementDEMFile &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; m_dNorthWestYExtCRS &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#ac2a38a420ed1a2fc66d93a5d16d6a27b">RTN_ERR_RASTER_FILE_READ</a>);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordtype">double</span> dTmpResX = <a class="code" href="cme_8h.html#ae3b6dc50cfc97050529faa5e0bd66136">tAbs</a>(dGeoTransform[1]);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">if</span> (! bFPIsEqual(dTmpResX, m_dCellSide, 1e-2))</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;         <span class="comment">// Error: different cell size in X direction: note that due to rounding errors in some GIS packages, must expect some discrepancies</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cell size in X direction (&quot;</span> &lt;&lt; dTmpResX &lt;&lt; <span class="stringliteral">&quot;) in &quot;</span> &lt;&lt; strGISFile &lt;&lt; <span class="stringliteral">&quot; differs from cell size in of basement DEM (&quot;</span> &lt;&lt; m_dCellSide &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#ac2a38a420ed1a2fc66d93a5d16d6a27b">RTN_ERR_RASTER_FILE_READ</a>);</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      }</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="keywordtype">double</span> dTmpResY = <a class="code" href="cme_8h.html#ae3b6dc50cfc97050529faa5e0bd66136">tAbs</a>(dGeoTransform[5]);</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">if</span> (! bFPIsEqual(dTmpResY, m_dCellSide, 1e-2))</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         <span class="comment">// Error: different cell size in Y direction: note that due to rounding errors in some GIS packages, must expect some discrepancies</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cell size in Y direction (&quot;</span> &lt;&lt; dTmpResY &lt;&lt; <span class="stringliteral">&quot;) in &quot;</span> &lt;&lt; strGISFile &lt;&lt; <span class="stringliteral">&quot; differs from cell size of basement DEM (&quot;</span> &lt;&lt; m_dCellSide &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#ac2a38a420ed1a2fc66d93a5d16d6a27b">RTN_ERR_RASTER_FILE_READ</a>);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160; </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="comment">// Now get GDAL raster band information</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      GDALRasterBand* pGDALBand = pGDALDataset-&gt;GetRasterBand(1);              <span class="comment">// TODO give a message if there are several bands</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keywordtype">int</span> nBlockXSize = 0, nBlockYSize = 0;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      pGDALBand-&gt;GetBlockSize(&amp;nBlockXSize, &amp;nBlockYSize);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      strDataType = GDALGetDataTypeName(pGDALBand-&gt;GetRasterDataType());</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160; </div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="keywordflow">switch</span> (nDataItem)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aeeb2eb80f77340ed3988d502d7c6b370">LANDFORM_RASTER</a>):</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;         <span class="comment">// Initial Landform Class GIS data</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;         m_strGDALLDriverCode = strDriverCode;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;         m_strGDALLDriverDesc = strDriverDesc;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;         m_strGDALLProjection = strProjection;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;         m_strGDALLDataType = strDataType;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a51eaf5dac80ca22157d491b3b8559445">INTERVENTION_CLASS_RASTER</a>):</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;         <span class="comment">// Intervention class</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;         m_strGDALICDriverCode = strDriverCode;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;         m_strGDALICDriverDesc = strDriverDesc;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;         m_strGDALICProjection = strProjection;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;         m_strGDALICDataType = strDataType;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a12194d8610af4fb565cf1c7ed7616e81">INTERVENTION_HEIGHT_RASTER</a>):</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;         <span class="comment">// Intervention height</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;         m_strGDALIHDriverCode = strDriverCode;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;         m_strGDALIHDriverDesc = strDriverDesc;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;         m_strGDALIHProjection = strProjection;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;         m_strGDALIHDataType = strDataType;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a1a3fe6f9e4396cfe9d9a506dbd5c3c42">SUSP_SED_RASTER</a>):</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;         <span class="comment">// Initial Suspended Sediment GIS data</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;         m_strGDALISSDriverCode = strDriverCode;</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;         m_strGDALISSDriverDesc = strDriverDesc;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;         m_strGDALISSProjection = strProjection;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;         m_strGDALISSDataType = strDataType;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a37eb630702e841414032e3fb04a34e18">FINE_UNCONS_RASTER</a>):</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;         <span class="comment">// Initial Unconsolidated Fine Sediment GIS data</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;         m_VstrGDALIUFDriverCode[nLayer] = strDriverCode;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;         m_VstrGDALIUFDriverDesc[nLayer] = strDriverDesc;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;         m_VstrGDALIUFProjection[nLayer] = strProjection;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;         m_VstrGDALIUFDataType[nLayer] = strDataType;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160; </div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af132a16851a356e5261344db86611995">SAND_UNCONS_RASTER</a>):</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;         <span class="comment">// Initial Unconsolidated Sand Sediment GIS data</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;         m_VstrGDALIUSDriverCode[nLayer] = strDriverCode;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;         m_VstrGDALIUSDriverDesc[nLayer] = strDriverDesc;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;         m_VstrGDALIUSProjection[nLayer] = strProjection;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;         m_VstrGDALIUSDataType[nLayer] = strDataType;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160; </div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#acb5af8424727c3c9cb820749daa0990d">COARSE_UNCONS_RASTER</a>):</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;         <span class="comment">// Initial Unconsolidated Coarse Sediment GIS data</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;         m_VstrGDALIUCDriverCode[nLayer] = strDriverCode;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;         m_VstrGDALIUCDriverDesc[nLayer] = strDriverDesc;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;         m_VstrGDALIUCProjection[nLayer] = strProjection;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;         m_VstrGDALIUCDataType[nLayer] = strDataType;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a16379f7ac89e701557c92d6383161664">FINE_CONS_RASTER</a>):</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;         <span class="comment">// Initial Consolidated Fine Sediment GIS data</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;         m_VstrGDALICFDriverCode[nLayer] = strDriverCode;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;         m_VstrGDALICFDriverDesc[nLayer] = strDriverDesc;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;         m_VstrGDALICFProjection[nLayer] = strProjection;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;         m_VstrGDALICFDataType[nLayer] = strDataType;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ab5466484c0192fbb085776644470a3b6">SAND_CONS_RASTER</a>):</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;         <span class="comment">// Initial Consolidated Sand Sediment GIS data</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;         m_VstrGDALICSDriverCode[nLayer] = strDriverCode;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;         m_VstrGDALICSDriverDesc[nLayer] = strDriverDesc;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;         m_VstrGDALICSProjection[nLayer] = strProjection;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;         m_VstrGDALICSDataType[nLayer] = strDataType;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ab710943b3b1fb290df8a377040de845e">COARSE_CONS_RASTER</a>):</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;         <span class="comment">// Initial Consolidated Coarse Sediment GIS data</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;         m_VstrGDALICCDriverCode[nLayer] = strDriverCode;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;         m_VstrGDALICCDriverDesc[nLayer] = strDriverDesc;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;         m_VstrGDALICCProjection[nLayer] = strProjection;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;         m_VstrGDALICCDataType[nLayer] = strDataType;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;         <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <span class="comment">// If present, get the missing value setting</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="keywordtype">int</span> nMissingValue = m_nMissingValue;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <span class="keywordtype">double</span> dMissingValue = m_dMissingValue;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="keywordtype">string</span> strTmp = strToLower(&amp;strDataType);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="keywordflow">if</span> (strTmp.find(<span class="stringliteral">&quot;int&quot;</span>) != string::npos)</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      {</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;         <span class="comment">// This is an integer layer</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;         CPLPushErrorHandler(CPLQuietErrorHandler);                        <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;         nMissingValue = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(pGDALBand-&gt;GetNoDataValue());    <span class="comment">// Note will fail for some formats</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;         CPLPopErrorHandler();</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;         <span class="keywordflow">if</span> (nMissingValue != m_nMissingValue)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;         {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            cerr &lt;&lt; <a class="code" href="cme_8h.html#a59123483b5c7cb88ece24246ae3cd4b9">NOTE</a> &lt;&lt; <span class="stringliteral">&quot;NODATA value in &quot;</span> &lt;&lt; strGISFile &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; nMissingValue &lt;&lt; <span class="stringliteral">&quot;\n      instead using default NODATA value &quot;</span> &lt;&lt;  m_nMissingValue &lt;&lt; endl;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;         }</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      }</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;         <span class="comment">// This is a floating point layer</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;         CPLPushErrorHandler(CPLQuietErrorHandler);                        <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;         dMissingValue = pGDALBand-&gt;GetNoDataValue();                      <span class="comment">// Note will fail for some formats</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;         CPLPopErrorHandler();</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;         <span class="keywordflow">if</span> (dMissingValue != m_dMissingValue)</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;         {</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            cerr &lt;&lt; <a class="code" href="cme_8h.html#a59123483b5c7cb88ece24246ae3cd4b9">NOTE</a> &lt;&lt; <span class="stringliteral">&quot;NODATA value in &quot;</span> &lt;&lt; strGISFile &lt;&lt; <span class="stringliteral">&quot; is &quot;</span> &lt;&lt; dMissingValue &lt;&lt; <span class="stringliteral">&quot;\n      instead using default NODATA value &quot;</span> &lt;&lt;  m_dMissingValue &lt;&lt; endl;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;         }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="comment">// Allocate memory for a 1D array, to hold the scan line for GDAL</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <span class="keywordtype">float</span>* pfScanline = <span class="keyword">new</span> <span class="keywordtype">float</span>[m_nXGridMax];</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="keywordflow">if</span> (NULL == pfScanline)</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      {</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;         <span class="comment">// Error, can&#39;t allocate memory</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot allocate memory for &quot;</span> &lt;&lt; m_nXGridMax &lt;&lt; <span class="stringliteral">&quot; x 1D array&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;         <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#a0d90a78d3916bbdd05ec604056dd0231">RTN_ERR_MEMALLOC</a>);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      }</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160; </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="comment">// Now read in the data</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <span class="keywordtype">int</span> nMissing = 0;</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = 0; nY &lt; m_nYGridMax; nY++)</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      {</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;         <span class="comment">// Read scanline</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;         <span class="keywordflow">if</span> (CE_Failure == pGDALBand-&gt;RasterIO(GF_Read, 0, nY, m_nXGridMax, 1, pfScanline, m_nXGridMax, 1, GDT_Float32, 0, 0, NULL))</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;         {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;            <span class="comment">// Error while reading scanline</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;            cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; strGISFile &lt;&lt; endl;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;            <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#ac2a38a420ed1a2fc66d93a5d16d6a27b">RTN_ERR_RASTER_FILE_READ</a>);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;         }</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;         <span class="comment">// All OK, so read scanline into cells (including any missing values)</span></div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; m_nXGridMax; nX++)</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;         {</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;            <span class="keywordtype">int</span> nTmp;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="keywordflow">switch</span> (nDataItem)</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            {</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aeeb2eb80f77340ed3988d502d7c6b370">LANDFORM_RASTER</a>):</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;               <span class="comment">// Initial Landform Class GIS data, is integer TODO Do we also need a landform sub-category input?</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;               nTmp = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(pfScanline[nX]);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;               <span class="keywordflow">if</span> (! <a class="code" href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a>(nTmp))              <span class="comment">// Deal with any NaN values</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                  nTmp = m_nMissingValue;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160; </div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;               <span class="keywordflow">if</span> (nTmp == nMissingValue)</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                  nTmp = m_nMissingValue;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;               <span class="keywordflow">if</span> (nTmp == m_nMissingValue)</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                  nMissing++;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;               m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#af1321d6f96845f7933e6d7167267ed41">pGetLandform</a>()-&gt;<a class="code" href="class_c_r_w_cell_landform.html#aaf631af6cb530503a8fc676d4296ac79">SetLFCategory</a>(nTmp);</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;               <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a51eaf5dac80ca22157d491b3b8559445">INTERVENTION_CLASS_RASTER</a>):</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;               <span class="comment">// Intervention class, is integer</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;               nTmp = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(pfScanline[nX]);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;               <span class="keywordflow">if</span> (! <a class="code" href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a>(nTmp))              <span class="comment">// Deal with any NaN values</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                  nTmp = m_nMissingValue;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160; </div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;               <span class="keywordflow">if</span> (nTmp == nMissingValue)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                  nTmp = m_nMissingValue;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160; </div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;               <span class="keywordflow">if</span> (nTmp == m_nMissingValue)</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                  nMissing++;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160; </div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;               m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a8fe16d2a288d84522f3cf3be63e4c00e">SetInterventionClass</a>(nTmp);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;               <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160; </div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a12194d8610af4fb565cf1c7ed7616e81">INTERVENTION_HEIGHT_RASTER</a>):</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;               <span class="comment">// Intervention height</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;               dTmp = pfScanline[nX];       <span class="comment">// Deal with any NaN values</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;               <span class="keywordflow">if</span> (! <a class="code" href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a>(dTmp))</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;               <span class="keywordflow">if</span> (dTmp == dMissingValue)</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;               <span class="keywordflow">if</span> (dTmp == m_dMissingValue)</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                  nMissing++;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160; </div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;               m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a69209949cee640c398dd2f582e02c063">SetInterventionHeight</a>(dTmp);</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;               <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160; </div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a1a3fe6f9e4396cfe9d9a506dbd5c3c42">SUSP_SED_RASTER</a>):</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;               <span class="comment">// Initial Suspended Sediment GIS data</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;               dTmp = pfScanline[nX];       <span class="comment">// Deal with any NaN values</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;               <span class="keywordflow">if</span> (! <a class="code" href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a>(dTmp))</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160; </div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;               <span class="keywordflow">if</span> (dTmp == dMissingValue)</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;               <span class="keywordflow">if</span> (dTmp == m_dMissingValue)</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                  nMissing++;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;               m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a36b482677ecef0fe66d0decae3cf6b6c">SetSuspendedSediment</a>(dTmp);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;               <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160; </div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a37eb630702e841414032e3fb04a34e18">FINE_UNCONS_RASTER</a>):</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;               <span class="comment">// Initial Unconsolidated Fine Sediment GIS data</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;               dTmp = pfScanline[nX];       <span class="comment">// Deal with any NaN values</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;               <span class="keywordflow">if</span> (! <a class="code" href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a>(dTmp))</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;               <span class="keywordflow">if</span> (dTmp == dMissingValue)</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160; </div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;               <span class="keywordflow">if</span> (dTmp == m_dMissingValue)</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                  nMissing++;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;               m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a6ee086df697edf497ddb97fe2f4adf53">pGetUnconsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a520b31404bb1c3dd30d9c84fe84e11e8">SetFine</a>(dTmp);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;               <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af132a16851a356e5261344db86611995">SAND_UNCONS_RASTER</a>):</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;               <span class="comment">// Initial Unconsolidated Sand Sediment GIS data</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;               dTmp = pfScanline[nX];       <span class="comment">// Deal with any NaN values</span></div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;               <span class="keywordflow">if</span> (! <a class="code" href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a>(dTmp))</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;               <span class="keywordflow">if</span> (dTmp == dMissingValue)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;               <span class="keywordflow">if</span> (dTmp == m_dMissingValue)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                  nMissing++;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;               m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a6ee086df697edf497ddb97fe2f4adf53">pGetUnconsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a166bd3ef8eb44ae4c6eff329e04bd3c0">SetSand</a>(dTmp);</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;               <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160; </div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#acb5af8424727c3c9cb820749daa0990d">COARSE_UNCONS_RASTER</a>):</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;               <span class="comment">// Initial Unconsolidated Coarse Sediment GIS data</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;               dTmp = pfScanline[nX];       <span class="comment">// Deal with any NaN values</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;               <span class="keywordflow">if</span> (! <a class="code" href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a>(dTmp))</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160; </div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;               <span class="keywordflow">if</span> (dTmp == dMissingValue)</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;               <span class="keywordflow">if</span> (dTmp == m_dMissingValue)</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                  nMissing++;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160; </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;               m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a6ee086df697edf497ddb97fe2f4adf53">pGetUnconsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a930fdd5219ba9971cdbd256e1d5cc62a">SetCoarse</a>(dTmp);</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;               <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;            <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a16379f7ac89e701557c92d6383161664">FINE_CONS_RASTER</a>):</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;               <span class="comment">// Initial Consolidated Fine Sediment GIS data</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;               dTmp = pfScanline[nX];       <span class="comment">// Deal with any NaN values</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;               <span class="keywordflow">if</span> (! <a class="code" href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a>(dTmp))</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;               <span class="keywordflow">if</span> (dTmp == dMissingValue)</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;               <span class="keywordflow">if</span> (dTmp == m_dMissingValue)</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                  nMissing++;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;               m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a30800b5cd971976ffec36381d4e54342">pGetConsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a520b31404bb1c3dd30d9c84fe84e11e8">SetFine</a>(dTmp);</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;               <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ab5466484c0192fbb085776644470a3b6">SAND_CONS_RASTER</a>):</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;               <span class="comment">// Initial Consolidated Sand Sediment GIS data</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;               dTmp = pfScanline[nX];       <span class="comment">// Deal with any NaN values</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;               <span class="keywordflow">if</span> (! <a class="code" href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a>(dTmp))</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;               <span class="keywordflow">if</span> (dTmp == dMissingValue)</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;               <span class="keywordflow">if</span> (dTmp == m_dMissingValue)</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                  nMissing++;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;               m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a30800b5cd971976ffec36381d4e54342">pGetConsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a166bd3ef8eb44ae4c6eff329e04bd3c0">SetSand</a>(dTmp);</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;               <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ab710943b3b1fb290df8a377040de845e">COARSE_CONS_RASTER</a>):</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;               <span class="comment">// Initial Consolidated Coarse Sediment GIS data</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;               dTmp = pfScanline[nX];       <span class="comment">// Deal with any NaN values</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;               <span class="keywordflow">if</span> (! <a class="code" href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a>(dTmp))</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;               <span class="keywordflow">if</span> (dTmp == dMissingValue)</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                  dTmp = m_dMissingValue;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;               <span class="keywordflow">if</span> (dTmp == m_dMissingValue)</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                  nMissing++;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;               m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a30800b5cd971976ffec36381d4e54342">pGetConsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a930fdd5219ba9971cdbd256e1d5cc62a">SetCoarse</a>(dTmp);</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;               <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;            }</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;         }</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      }</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160; </div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="comment">// Finished, so get rid of dataset object</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      GDALClose(pGDALDataset);</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      <span class="comment">// Get rid of memory allocated to this array</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="keyword">delete</span>[] pfScanline;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160; </div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="keywordflow">if</span> (nMissing &gt; 0)</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#aefc63c4bde02ca170b0e7bd038ba7702">WARN</a> &lt;&lt; nMissing &lt;&lt; <span class="stringliteral">&quot; missing values in &quot;</span> &lt;&lt; strGISFile &lt;&lt; endl;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;         <a class="code" href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">LogStream</a> &lt;&lt; <a class="code" href="cme_8h.html#aefc63c4bde02ca170b0e7bd038ba7702">WARN</a> &lt;&lt; nMissing &lt;&lt; <span class="stringliteral">&quot; missing values in &quot;</span> &lt;&lt; strGISFile &lt;&lt; endl;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   }</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160; </div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a71d8d6db0e41ed2022d0a95b9a70528c">RTN_OK</a>;</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;}</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160; </div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">/*==============================================================================================================================</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment"> Writes floating point GIS raster files using GDAL, using data from the RasterGrid array</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">===============================================================================================================================*/</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="keywordtype">bool</span> CSimulation::bWriteRasterGISFloat(<span class="keywordtype">int</span> <span class="keyword">const</span> nDataItem, <span class="keywordtype">string</span> <span class="keyword">const</span>* strPlotTitle, <span class="keywordtype">int</span> <span class="keyword">const</span> nLayer)</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;{</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   <span class="comment">// Begin constructing the file name for this save</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   <span class="keywordtype">string</span> strFilePathName(m_strOutPath);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   <span class="keywordtype">string</span> strLayer = <span class="stringliteral">&quot;_layer_&quot;</span>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   strLayer.append(to_string(nLayer+1));</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160; </div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="keywordflow">switch</span> (nDataItem)</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;   {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2ed3fa8bab073af965cb90a47c2fc972">RASTER_PLOT_BASEMENT_ELEVATION</a>):</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a6c43d54b1729f178a910f5b2fd83c13c">RASTER_BASEMENT_ELEVATION_NAME</a>);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2811de9edea915d96191f7db6f81c6df">RASTER_PLOT_SEDIMENT_TOP_ELEVATION_ELEV</a>):</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a25cdc6f7e116371efcb8a36e94bcd9a2">RASTER_SEDIMENT_TOP_NAME</a>);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2277cf993b74c257ea8c8092e7ba930d">RASTER_PLOT_OVERALL_TOP_ELEVATION</a>):</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a5f37dce2db187aec350ecae5cc2c2fc1">RASTER_TOP_NAME</a>);</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160; </div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a672dd53bf5b86eed58e61be4ae3d7e5b">RASTER_PLOT_LOCAL_SLOPE_OF_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#adabd28961523210a40160a4b707529ea">RASTER_LOCAL_SLOPE_NAME</a>);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160; </div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#abc6829527cf1bf51872ac203a1cacbbb">RASTER_PLOT_SEA_DEPTH</a>):</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#aca7fe7b55085f163a675eeef7b92efeb">RASTER_SEA_DEPTH_NAME</a>);</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2f45b1bd5a48f1422c7696f2f8fe0f3d">RASTER_PLOT_AVG_SEA_DEPTH</a>):</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#aa33aeb7a6ac78ff05872d5b4760c3769">RASTER_AVG_SEA_DEPTH_NAME</a>);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aa7c170ab1fb10c09a43967870508be40">RASTER_PLOT_WAVE_HEIGHT</a>):</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#abae18453d8413f1dc52aff733dd2d521">RASTER_WAVE_HEIGHT_NAME</a>);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160; </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#acf42bfa317e547d5d93e47fcfd5895f8">RASTER_PLOT_AVG_WAVE_HEIGHT</a>):</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a1b60ab85d74514c3a9870d04b286de8a">RASTER_AVG_WAVE_HEIGHT_NAME</a>);</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a7fc9f90339b07df70be85c384ec25292">RASTER_PLOT_WAVE_ORIENTATION</a>):</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a4eaf9fec7f1e5395f10ef1fa146b04e9">RASTER_WAVE_ORIENTATION_NAME</a>);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160; </div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aad67ad112b8e219d82e9c49f5491a747">RASTER_PLOT_AVG_WAVE_ORIENTATION</a>):</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a66170b7d62fe302bc7bdf529b09eca15">RASTER_AVG_WAVE_ORIENTATION_NAME</a>);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2aec8d719dbf65b81358b905831b9838">RASTER_PLOT_BEACH_PROTECTION</a>):</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a55da5f1d76ed0a1696e8bf2ce89c120f">RASTER_BEACH_PROTECTION_NAME</a>);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160; </div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a387b44f58bdc286ae3af7e6fde84d194">RASTER_PLOT_POTENTIAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a0eb34e2381f73f477cb20e752cc513e2">RASTER_POTENTIAL_PLATFORM_EROSION_NAME</a>);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#abc007faf9a7b5860c373322495f11695">RASTER_PLOT_ACTUAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a6de45bfc6d2b54aee0ad03e3a079b98b">RASTER_ACTUAL_PLATFORM_EROSION_NAME</a>);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160; </div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ad3dedce2670687cd14ff0d060d0d8029">RASTER_PLOT_TOTAL_POTENTIAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a3dc799a39c6db3768c193ca7ce89ca85">RASTER_TOTAL_POTENTIAL_PLATFORM_EROSION_NAME</a>);</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160; </div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a044d2c4f21de01d244331ce34b4accfe">RASTER_PLOT_TOTAL_ACTUAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a7117e6c0fbd50abe823d2cf7dda75684">RASTER_TOTAL_ACTUAL_PLATFORM_EROSION_NAME</a>);</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160; </div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a5c5fdf72f50d6476873bb2cff715f22c">RASTER_PLOT_POTENTIAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a6eda4b86a4c80d9fd8409617f50f76d9">RASTER_POTENTIAL_BEACH_EROSION_NAME</a>);</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a06194c6c8d366696c4ec6462f7115d9e">RASTER_PLOT_ACTUAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#aa82e93c7fb38b9eaf57b10f94cdd9c3e">RASTER_ACTUAL_BEACH_EROSION_NAME</a>);</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160; </div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ac0b725507d14873dd0b2d2db91e196db">RASTER_PLOT_TOTAL_POTENTIAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a931b38347583073117babf8704a2b08f">RASTER_TOTAL_POTENTIAL_BEACH_EROSION_NAME</a>);</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a17fc6856269e4a3decd1c9c9230f2aed">RASTER_PLOT_TOTAL_ACTUAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#ac5c35a815b6c4bd60d6e8df3534675b2">RASTER_TOTAL_ACTUAL_BEACH_EROSION_NAME</a>);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a1a0a2ca98a313f586fbb6ad92f438d6a">RASTER_PLOT_BEACH_DEPOSITION</a>):</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a9a31d74a1141771d7949d49255dbbdc5">RASTER_BEACH_DEPOSITION_NAME</a>);</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#acb8fb10195f618455e4cbcf94e0dc9c2">RASTER_PLOT_TOTAL_BEACH_DEPOSITION</a>):</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a30fc51de93015d5aa9e6bab59786f692">RASTER_TOTAL_BEACH_DEPOSITION_NAME</a>);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ac15d87c6e225137f88534265bd636518">RASTER_PLOT_SUSPENDED_SEDIMENT</a>):</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#ad35ece7d5fdc7cd6ba36e6742086c376">RASTER_SUSP_SED_NAME</a>);</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ab794dca35f7c7a464ff52caa887e4043">RASTER_PLOT_AVG_SUSPENDED_SEDIMENT</a>):</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a080e5afff16e34842b069fbfc6896aee">RASTER_AVG_SUSP_SED_NAME</a>);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160; </div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ac322659f9e30a244d1d312efead18f8d">RASTER_PLOT_FINE_UNCONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a54d05048c62a02e9db8bf64eb74ce53b">RASTER_FINE_UNCONS_NAME</a>);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      strFilePathName.append(strLayer);</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a40ee42349abefec89f1e7dcfd3813b9f">RASTER_PLOT_SAND_UNCONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a102d076b6876501ee8fb3bbd9656b837">RASTER_SAND_UNCONS_NAME</a>);</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      strFilePathName.append(strLayer);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160; </div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a982608de9e45c4018046a236dd224c5d">RASTER_PLOT_COARSE_UNCONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a1a42efde04da182a5f8476cca78563a7">RASTER_COARSE_UNCONS_NAME</a>);</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      strFilePathName.append(strLayer);</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a99f3a29ec5374ab36004bc828dbbcd06">RASTER_PLOT_FINE_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a72c2ad13dfc9a030277d7669a1237f1a">RASTER_FINE_CONS_NAME</a>);</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      strFilePathName.append(strLayer);</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160; </div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a673dd37f4f383c67a0cbff7b2b934f02">RASTER_PLOT_SAND_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#ad7ef12765835b521614cd38c500041ae">RASTER_SAND_CONS_NAME</a>);</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      strFilePathName.append(strLayer);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a463ef414076dd24d9bcad73c847a7401">RASTER_PLOT_COARSE_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a2770e9faecc3ec8cf02f89c40e25751c">RASTER_COARSE_CONS_NAME</a>);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      strFilePathName.append(strLayer);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aa88580f5300c65eb435b6eb476be7b25">RASTER_PLOT_CLIFF_COLLAPSE</a>):</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a89a262f720146fefb0962bb719ff854d">RASTER_CLIFF_COLLAPSE_NAME</a>);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a815768a387b9852821a70d724f245abb">RASTER_PLOT_TOTAL_CLIFF_COLLAPSE</a>):</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a2ba54e759a1c46bcd2d84fd2bf623404">RASTER_TOTAL_CLIFF_COLLAPSE_NAME</a>);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a021773d2e5f1e6ab4798e6d889ccc4aa">RASTER_PLOT_CLIFF_COLLAPSE_DEPOSIT</a>):</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a1cc065c23d727dd90b73dcf54f287044">RASTER_CLIFF_COLLAPSE_DEPOSITION_NAME</a>);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a3d4f05c2273726d38927a598802b222b">RASTER_PLOT_TOTAL_CLIFF_COLLAPSE_DEPOSIT</a>):</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a734faa3fb9f8a31426a51750dbd1220a">RASTER_TOTAL_CLIFF_COLLAPSE_DEPOSITION_NAME</a>);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160; </div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aef37e985d9616ca4d35d41e0266fe88d">RASTER_PLOT_INTERVENTION_HEIGHT</a>):</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a1f9cf27d22212615b1f73f906838435a">RASTER_INTERVENTION_HEIGHT_NAME</a>);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af8f82e44fc894cb0fa341310405fbb46">RASTER_PLOT_DEEP_WATER_WAVE_ORIENTATION</a>):</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#ab6df4c5cadcaf10bd6c560be0a315587">RASTER_DEEP_WATER_WAVE_ORIENTATION_NAME</a>);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aa8147f8067ba2f7ecb05c3d7f706315d">RASTER_PLOT_DEEP_WATER_WAVE_HEIGHT</a>):</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#ac7b0abd2b993448ab9ce38289fa2babc">RASTER_DEEP_WATER_WAVE_HEIGHT_NAME</a>);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160; </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ad9330c8c0f786aa948f0e4a9db38ee21">RASTER_PLOT_POLYGON_GAIN_OR_LOSS</a>):</div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a8fc2e43234fd4a43e8de053a13c7b3e3">RASTER_POLYGON_GAIN_OR_LOSS_NAME</a>);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a31399faf0a31eb32589134eefe26eec8">RASTER_PLOT_DEEP_WATER_WAVE_PERIOD</a>):</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#af2f55ef83ff3fda1f7dbd69dc53da31a">RASTER_WAVE_PERIOD_NAME</a>);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   <span class="comment">// Append the &#39;save number&#39; to the filename, and prepend zeros to the save number</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   strFilePathName.append(<span class="stringliteral">&quot;_&quot;</span>);</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   stringstream ststrTmp;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   ststrTmp &lt;&lt; FillToWidth(<span class="charliteral">&#39;0&#39;</span>, <a class="code" href="cme_8h.html#abb3aac718fc9bc736182cd5c39535c5e">MAX_SAVE_DIGITS</a>) &lt;&lt; m_nGISSave;</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   strFilePathName.append(ststrTmp.str());</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <span class="comment">// Finally, maybe append the extension</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   <span class="keywordflow">if</span> (! m_strGDALRasterOutputDriverExtension.empty())</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      strFilePathName.append(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      strFilePathName.append(m_strGDALRasterOutputDriverExtension);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   }</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   GDALDriver* pDriver;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   GDALDataset* pDataSet;</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <span class="keywordflow">if</span> (m_bGDALCanCreate)</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   {</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <span class="comment">// The user-requested raster driver supports the Create() method</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      pDriver = GetGDALDriverManager()-&gt;GetDriverByName(m_strRasterGISOutFormat.c_str());</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      pDataSet = pDriver-&gt;Create(strFilePathName.c_str(), m_nXGridMax, m_nYGridMax, 1, m_GDALWriteFloatDataType, m_papszGDALRasterOptions);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="keywordflow">if</span> (NULL == pDataSet)</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;         <span class="comment">// Error, couldn&#39;t create file</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot create &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      }</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;   }</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   {</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <span class="comment">// The user-requested raster driver does not support the Create() method, so we must first create a memory-file dataset</span></div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      pDriver = GetGDALDriverManager()-&gt;GetDriverByName(<span class="stringliteral">&quot;MEM&quot;</span>);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      pDataSet = pDriver-&gt;Create(<span class="stringliteral">&quot;&quot;</span>, m_nXGridMax, m_nYGridMax, 1, m_GDALWriteFloatDataType, NULL);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="keywordflow">if</span> (NULL == pDataSet)</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      {</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;         <span class="comment">// Couldn&#39;t create in-memory file dataset</span></div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot create in-memory file for &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      }</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;   }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160; </div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <span class="comment">// Set projection info for output dataset (will be same as was read in from basement DEM)</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);                              <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;   pDataSet-&gt;SetProjection(m_strGDALBasementDEMProjection.c_str());        <span class="comment">// Will fail for some formats</span></div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160; </div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <span class="comment">// Set geotransformation info for output dataset (will be same as was read in from DEM)</span></div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   <span class="keywordflow">if</span> (CE_Failure == pDataSet-&gt;SetGeoTransform(m_dGeoTransform))</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <a class="code" href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">LogStream</a> &lt;&lt; <a class="code" href="cme_8h.html#aefc63c4bde02ca170b0e7bd038ba7702">WARN</a> &lt;&lt; <span class="stringliteral">&quot;cannot write geotransformation information to &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160; </div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;   <span class="comment">// Allocate memory for a 1D array, to hold the floating point raster band data for GDAL</span></div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;   <span class="keywordtype">float</span>* pfRaster;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;   pfRaster = <span class="keyword">new</span> <span class="keywordtype">float</span>[m_ulNumCells];</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   <span class="keywordflow">if</span> (NULL == pfRaster)</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;   {</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <span class="comment">// Error, can&#39;t allocate memory</span></div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot allocate memory for &quot;</span> &lt;&lt; m_ulNumCells &lt;&lt; <span class="stringliteral">&quot; x 1D floating-point array for &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; endl;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#a0d90a78d3916bbdd05ec604056dd0231">RTN_ERR_MEMALLOC</a>);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   }</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   <span class="keywordtype">bool</span> bScaleOutput = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <span class="keywordtype">double</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      dRangeScale = 0,</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      dDataMin = 0;</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   <span class="keywordflow">if</span> (! m_bGDALCanWriteFloat)</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="keywordtype">double</span> dDataMax = 0;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="comment">// The output file format cannot handle floating-point numbers, so we may need to scale the output</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      GetRasterOutputMinMax(nDataItem, dDataMin, dDataMax, nLayer, 0);</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160; </div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      <span class="keywordtype">double</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;         dDataRange = dDataMax - dDataMin,</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;         dWriteRange = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_lGDALMaxCanWrite - m_lGDALMinCanWrite);</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160; </div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <span class="keywordflow">if</span> (dDataRange &gt; 0)</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;         dRangeScale = dWriteRange / dDataRange;</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <span class="comment">// If we are attempting to write values which are outside this format&#39;s allowable range, and the user has set the option, then scale the output</span></div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="keywordflow">if</span> (((dDataMin &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_lGDALMinCanWrite)) || (dDataMax &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_lGDALMaxCanWrite))) &amp;&amp; m_bScaleRasterOutput)</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;         bScaleOutput = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;   <span class="comment">// Fill the array</span></div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   <span class="keywordtype">double</span> dTmp = 0;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = 0; nY &lt; m_nYGridMax; nY++)</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; m_nXGridMax; nX++)</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;      {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;         <span class="keywordflow">switch</span> (nDataItem)</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;         {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2ed3fa8bab073af965cb90a47c2fc972">RASTER_PLOT_BASEMENT_ELEVATION</a>):</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#aac7e308b87a6ef39f1e56ad144a56c34">dGetBasementElev</a>();</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; </div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2811de9edea915d96191f7db6f81c6df">RASTER_PLOT_SEDIMENT_TOP_ELEVATION_ELEV</a>):</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a6387aaac391af63a9f2be1c809ce169c">dGetSedimentTopElev</a>();</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2277cf993b74c257ea8c8092e7ba930d">RASTER_PLOT_OVERALL_TOP_ELEVATION</a>):</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a6b223926c59f56f909acd3732655750c">dGetSedimentPlusInterventionTopElev</a>(); <span class="comment">// APayo April 2018 this is now sed top elev + intervention</span></div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a672dd53bf5b86eed58e61be4ae3d7e5b">RASTER_PLOT_LOCAL_SLOPE_OF_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a8ca77a88453bdc1637fd128596c42a53">dGetLocalConsSlope</a>();</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160; </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#abc6829527cf1bf51872ac203a1cacbbb">RASTER_PLOT_SEA_DEPTH</a>):</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a3a378431e2f6095792582989f50fb435">dGetSeaDepth</a>();</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160; </div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2f45b1bd5a48f1422c7696f2f8fe0f3d">RASTER_PLOT_AVG_SEA_DEPTH</a>):</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a7838933f10e6a21fe00645ecebeee230">dGetTotSeaDepth</a>() / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_ulIter);</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aa7c170ab1fb10c09a43967870508be40">RASTER_PLOT_WAVE_HEIGHT</a>):</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            <span class="keywordflow">if</span> (! m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a28b760b0a9e63afd01e29610888fc7bc">bIsInContiguousSea</a>())</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;               dTmp = m_dMissingValue;</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;               dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a770135e779cf4e4d74c9e78f19429d3c">dGetWaveHeight</a>();</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160; </div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#acf42bfa317e547d5d93e47fcfd5895f8">RASTER_PLOT_AVG_WAVE_HEIGHT</a>):</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a04a281c46cc4a7741193d14b1ee81954">dGetTotWaveHeight</a>() / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_ulIter);</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160; </div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a7fc9f90339b07df70be85c384ec25292">RASTER_PLOT_WAVE_ORIENTATION</a>):</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            <span class="keywordflow">if</span> (! m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a28b760b0a9e63afd01e29610888fc7bc">bIsInContiguousSea</a>())</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;               dTmp = m_dMissingValue;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;               dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a8577263897fb809e3b9bb4e39f16c16e">dGetWaveOrientation</a>();</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160; </div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aad67ad112b8e219d82e9c49f5491a747">RASTER_PLOT_AVG_WAVE_ORIENTATION</a>):</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a32201f2e72a5b809ee886974883aa6e9">dGetTotWaveOrientation</a>() / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_ulIter);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160; </div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2aec8d719dbf65b81358b905831b9838">RASTER_PLOT_BEACH_PROTECTION</a>):</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a585c23948156db68c888874f27bab13d">dGetBeachProtectionFactor</a>();</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            <span class="keywordflow">if</span> (dTmp == <a class="code" href="cme_8h.html#a01a70d7ac0aaa506ffa66e0e93d348b5">DBL_NODATA</a>)</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;               dTmp = m_dMissingValue;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;               dTmp = 1 - dTmp;                 <span class="comment">// Output the inverse, seems more intuitive</span></div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a387b44f58bdc286ae3af7e6fde84d194">RASTER_PLOT_POTENTIAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#ab1edaa0b2009bddaf19f844ac7ea51bd">dGetPotentialPlatformErosion</a>();</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#abc007faf9a7b5860c373322495f11695">RASTER_PLOT_ACTUAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#abceda257060d4bbb533f84796f99ef99">dGetActualPlatformErosion</a>();</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160; </div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ad3dedce2670687cd14ff0d060d0d8029">RASTER_PLOT_TOTAL_POTENTIAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a0f90ba92de6a8588cf8db4eba1dd870c">dGetTotPotentialPlatformErosion</a>();</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a044d2c4f21de01d244331ce34b4accfe">RASTER_PLOT_TOTAL_ACTUAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a9e5f9123fec3be74aebee4a85a0a7772">dGetTotActualPlatformErosion</a>();</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a5c5fdf72f50d6476873bb2cff715f22c">RASTER_PLOT_POTENTIAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a28962b8e41e82c7488373df1acec4bf2">dGetPotentialBeachErosion</a>();</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a06194c6c8d366696c4ec6462f7115d9e">RASTER_PLOT_ACTUAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#ab2ddaed7c290760c4d53da38ad5887fb">dGetActualBeachErosion</a>();</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160; </div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ac0b725507d14873dd0b2d2db91e196db">RASTER_PLOT_TOTAL_POTENTIAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a276957ed359ece9bc6be3cbbfbfbc693">dGetTotPotentialBeachErosion</a>();</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a17fc6856269e4a3decd1c9c9230f2aed">RASTER_PLOT_TOTAL_ACTUAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a3ed5f6905af39a9c8ca2527016301c7c">dGetTotActualBeachErosion</a>();</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a1a0a2ca98a313f586fbb6ad92f438d6a">RASTER_PLOT_BEACH_DEPOSITION</a>):</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a5362f71ffeb7ec2f3f0caaf2028caf7f">dGetBeachDeposition</a>();</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#acb8fb10195f618455e4cbcf94e0dc9c2">RASTER_PLOT_TOTAL_BEACH_DEPOSITION</a>):</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a346fd9877708f8516c5af1824920fe2f">dGetTotBeachDeposition</a>();</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160; </div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ac15d87c6e225137f88534265bd636518">RASTER_PLOT_SUSPENDED_SEDIMENT</a>):</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#ad201e23ab4726d7c1825d873237ff368">dGetSuspendedSediment</a>();</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ab794dca35f7c7a464ff52caa887e4043">RASTER_PLOT_AVG_SUSPENDED_SEDIMENT</a>):</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#ab238474f8288f78ac19bffcaaea8b8c1">dGetTotSuspendedSediment</a>() / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_ulIter);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ac322659f9e30a244d1d312efead18f8d">RASTER_PLOT_FINE_UNCONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a6ee086df697edf497ddb97fe2f4adf53">pGetUnconsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a7b908b50af702464be628e8b96c54542">dGetFine</a>();</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a40ee42349abefec89f1e7dcfd3813b9f">RASTER_PLOT_SAND_UNCONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a6ee086df697edf497ddb97fe2f4adf53">pGetUnconsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a55ec8f411beef4c724da8da17f9532b1">dGetSand</a>();</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160; </div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a982608de9e45c4018046a236dd224c5d">RASTER_PLOT_COARSE_UNCONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a6ee086df697edf497ddb97fe2f4adf53">pGetUnconsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a7f2edac8db7d8e47ec400f4b06efd1a5">dGetCoarse</a>();</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a99f3a29ec5374ab36004bc828dbbcd06">RASTER_PLOT_FINE_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a30800b5cd971976ffec36381d4e54342">pGetConsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a7b908b50af702464be628e8b96c54542">dGetFine</a>();</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160; </div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a673dd37f4f383c67a0cbff7b2b934f02">RASTER_PLOT_SAND_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a30800b5cd971976ffec36381d4e54342">pGetConsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a55ec8f411beef4c724da8da17f9532b1">dGetSand</a>();</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160; </div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a463ef414076dd24d9bcad73c847a7401">RASTER_PLOT_COARSE_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a30800b5cd971976ffec36381d4e54342">pGetConsolidatedSediment</a>()-&gt;<a class="code" href="class_c_r_w_cell_sediment.html#a7f2edac8db7d8e47ec400f4b06efd1a5">dGetCoarse</a>();</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aa88580f5300c65eb435b6eb476be7b25">RASTER_PLOT_CLIFF_COLLAPSE</a>):</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#afeb0c69c9bd07a00ddbe3033deb6410f">dGetCliffCollapse</a>();</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a815768a387b9852821a70d724f245abb">RASTER_PLOT_TOTAL_CLIFF_COLLAPSE</a>):</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#ab9302874e09221ca32af9c981088e0af">dGetTotCliffCollapse</a>();</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a021773d2e5f1e6ab4798e6d889ccc4aa">RASTER_PLOT_CLIFF_COLLAPSE_DEPOSIT</a>):</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a194a1b5e252a2e22b325b8480da49e9c">dGetCliffCollapseDeposition</a>();</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160; </div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a3d4f05c2273726d38927a598802b222b">RASTER_PLOT_TOTAL_CLIFF_COLLAPSE_DEPOSIT</a>):</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a973cb88b3e5ea38e02c0a5604fdbad39">dGetTotCliffCollapseDeposition</a>();</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aef37e985d9616ca4d35d41e0266fe88d">RASTER_PLOT_INTERVENTION_HEIGHT</a>):</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a6d9ce76438644be9fe4aa5b4f7efea3e">dGetInterventionHeight</a>();</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160; </div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af8f82e44fc894cb0fa341310405fbb46">RASTER_PLOT_DEEP_WATER_WAVE_ORIENTATION</a>):</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a1d2e53161b9483dce3aaaf32d3287e51">dGetDeepWaterWaveOrientation</a>();</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160; </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aa8147f8067ba2f7ecb05c3d7f706315d">RASTER_PLOT_DEEP_WATER_WAVE_HEIGHT</a>):</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a9afd0ac74169a81629bcbaa402be3009">dGetDeepWaterWaveHeight</a>();</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a31399faf0a31eb32589134eefe26eec8">RASTER_PLOT_DEEP_WATER_WAVE_PERIOD</a>):</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;            dTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#ad03f0af5de19150fad5383f2e147c55e">dGetDeepWaterWavePeriod</a>();</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ad9330c8c0f786aa948f0e4a9db38ee21">RASTER_PLOT_POLYGON_GAIN_OR_LOSS</a>):</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;            <span class="keywordtype">int</span> nPoly = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a622387009a4fcb864bfdab627389ea84">nGetPolygonID</a>();</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160; </div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            <span class="keywordflow">if</span> (nPoly == <a class="code" href="cme_8h.html#aee2e0742555937187504ee86b95bc29c">INT_NODATA</a>)</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;               dTmp = m_dMissingValue;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            {</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;               <span class="comment">// Get total volume (all sediment size classes) of change in sediment for this polygon for this timestep (-ve erosion, +ve deposition)</span></div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;               dTmp = m_pVCoastPolygon[nPoly]-&gt;dGetDeltaActualTotalSediment() * m_dCellArea;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;               <span class="comment">// Calculate the rate in m^3 / sec</span></div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;               dTmp /= (m_dTimeStep * 3600);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;            }</div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160; </div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;         }</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;         <span class="comment">// If necessary, scale this value</span></div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;         <span class="keywordflow">if</span> (bScaleOutput)</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;         {</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;            <span class="keywordflow">if</span> (dTmp == <a class="code" href="cme_8h.html#a01a70d7ac0aaa506ffa66e0e93d348b5">DBL_NODATA</a>)</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;               dTmp = 0;         <span class="comment">// TODO Improve this</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;               dTmp = <a class="code" href="utils__global_8cpp.html#a129796f62c254914a851a7d95786b8a4">dRound</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_lGDALMinCanWrite) + (dRangeScale * (dTmp - dDataMin)));</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;         }</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;         <span class="comment">// Write this value to the array</span></div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;         pfRaster[n++] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(dTmp);</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      }</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   }</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <span class="comment">// Create a single raster band</span></div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;   GDALRasterBand* pBand = pDataSet-&gt;GetRasterBand(1);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   <span class="comment">// Set value units for this band</span></div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;   <span class="keywordtype">string</span> strUnits;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   <span class="keywordflow">switch</span> (nDataItem)</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   {</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2ed3fa8bab073af965cb90a47c2fc972">RASTER_PLOT_BASEMENT_ELEVATION</a>):</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2811de9edea915d96191f7db6f81c6df">RASTER_PLOT_SEDIMENT_TOP_ELEVATION_ELEV</a>):</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2277cf993b74c257ea8c8092e7ba930d">RASTER_PLOT_OVERALL_TOP_ELEVATION</a>):</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#abc6829527cf1bf51872ac203a1cacbbb">RASTER_PLOT_SEA_DEPTH</a>):</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a2f45b1bd5a48f1422c7696f2f8fe0f3d">RASTER_PLOT_AVG_SEA_DEPTH</a>):</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aa7c170ab1fb10c09a43967870508be40">RASTER_PLOT_WAVE_HEIGHT</a>):</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#acf42bfa317e547d5d93e47fcfd5895f8">RASTER_PLOT_AVG_WAVE_HEIGHT</a>):</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a387b44f58bdc286ae3af7e6fde84d194">RASTER_PLOT_POTENTIAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#abc007faf9a7b5860c373322495f11695">RASTER_PLOT_ACTUAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ad3dedce2670687cd14ff0d060d0d8029">RASTER_PLOT_TOTAL_POTENTIAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a044d2c4f21de01d244331ce34b4accfe">RASTER_PLOT_TOTAL_ACTUAL_PLATFORM_EROSION</a>):</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a5c5fdf72f50d6476873bb2cff715f22c">RASTER_PLOT_POTENTIAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a06194c6c8d366696c4ec6462f7115d9e">RASTER_PLOT_ACTUAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ac0b725507d14873dd0b2d2db91e196db">RASTER_PLOT_TOTAL_POTENTIAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a17fc6856269e4a3decd1c9c9230f2aed">RASTER_PLOT_TOTAL_ACTUAL_BEACH_EROSION</a>):</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a1a0a2ca98a313f586fbb6ad92f438d6a">RASTER_PLOT_BEACH_DEPOSITION</a>):</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#acb8fb10195f618455e4cbcf94e0dc9c2">RASTER_PLOT_TOTAL_BEACH_DEPOSITION</a>):</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ac15d87c6e225137f88534265bd636518">RASTER_PLOT_SUSPENDED_SEDIMENT</a>):</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ab794dca35f7c7a464ff52caa887e4043">RASTER_PLOT_AVG_SUSPENDED_SEDIMENT</a>):</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ac322659f9e30a244d1d312efead18f8d">RASTER_PLOT_FINE_UNCONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a40ee42349abefec89f1e7dcfd3813b9f">RASTER_PLOT_SAND_UNCONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a982608de9e45c4018046a236dd224c5d">RASTER_PLOT_COARSE_UNCONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a99f3a29ec5374ab36004bc828dbbcd06">RASTER_PLOT_FINE_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a673dd37f4f383c67a0cbff7b2b934f02">RASTER_PLOT_SAND_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a463ef414076dd24d9bcad73c847a7401">RASTER_PLOT_COARSE_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aa88580f5300c65eb435b6eb476be7b25">RASTER_PLOT_CLIFF_COLLAPSE</a>):</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a815768a387b9852821a70d724f245abb">RASTER_PLOT_TOTAL_CLIFF_COLLAPSE</a>):</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a021773d2e5f1e6ab4798e6d889ccc4aa">RASTER_PLOT_CLIFF_COLLAPSE_DEPOSIT</a>):</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a3d4f05c2273726d38927a598802b222b">RASTER_PLOT_TOTAL_CLIFF_COLLAPSE_DEPOSIT</a>):</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aef37e985d9616ca4d35d41e0266fe88d">RASTER_PLOT_INTERVENTION_HEIGHT</a>):</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aa8147f8067ba2f7ecb05c3d7f706315d">RASTER_PLOT_DEEP_WATER_WAVE_HEIGHT</a>):</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      strUnits = <span class="stringliteral">&quot;m&quot;</span>;</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a672dd53bf5b86eed58e61be4ae3d7e5b">RASTER_PLOT_LOCAL_SLOPE_OF_CONSOLIDATED_SEDIMENT</a>):</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      strUnits = <span class="stringliteral">&quot;m/m&quot;</span>;</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; </div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a7fc9f90339b07df70be85c384ec25292">RASTER_PLOT_WAVE_ORIENTATION</a>):</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aad67ad112b8e219d82e9c49f5491a747">RASTER_PLOT_AVG_WAVE_ORIENTATION</a>):</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      strUnits = <span class="stringliteral">&quot;degrees&quot;</span>;</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160; </div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ad9330c8c0f786aa948f0e4a9db38ee21">RASTER_PLOT_POLYGON_GAIN_OR_LOSS</a>):</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      strUnits = <span class="stringliteral">&quot;cumecs&quot;</span>;</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a31399faf0a31eb32589134eefe26eec8">RASTER_PLOT_DEEP_WATER_WAVE_PERIOD</a>):</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      strUnits = <span class="stringliteral">&quot;secs&quot;</span>;</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   }</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160; </div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);                  <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   pBand-&gt;SetUnitType(strUnits.c_str());                                <span class="comment">// Not supported for some GIS formats</span></div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;   <span class="comment">// Tell the output dataset about NODATA (missing values)</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);                  <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   pBand-&gt;SetNoDataValue(m_dMissingValue);                     <span class="comment">// Will fail for some formats</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160; </div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   <span class="comment">// Construct the description</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;   <span class="keywordtype">string</span> strDesc(*strPlotTitle);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   strDesc.append(<span class="stringliteral">&quot; at &quot;</span>);</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   strDesc.append(strDispTime (m_dSimElapsed, <span class="keyword">false</span>, <span class="keyword">false</span>));</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160; </div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;   <span class="comment">// Set the GDAL description</span></div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;   pBand-&gt;SetDescription(strDesc.c_str());</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160; </div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   <span class="comment">// Now write the data</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;   <span class="keywordflow">if</span> (CE_Failure == pBand-&gt;RasterIO(GF_Write, 0, 0, m_nXGridMax, m_nYGridMax, pfRaster, m_nXGridMax, m_nYGridMax, GDT_Float32, 0, 0, NULL))</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;   {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      <span class="comment">// Write error, better error message</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot write data for &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;      <span class="keyword">delete</span>[] pfRaster;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;   }</div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160; </div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;   <span class="comment">// Calculate statistics for this band</span></div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   <span class="keywordtype">double</span> dMin, dMax, dMean, dStdDev;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);        <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;   pBand-&gt;ComputeStatistics(<span class="keyword">false</span>, &amp;dMin, &amp;dMax, &amp;dMean, &amp;dStdDev, NULL, NULL);</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160; </div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;   <span class="comment">// And then write the statistics</span></div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);        <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;   pBand-&gt;SetStatistics(dMin, dMax, dMean, dStdDev);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160; </div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;   <span class="keywordflow">if</span> (! m_bGDALCanCreate)</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;   {</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <span class="comment">// Since the user-selected raster driver cannot use the Create() method, we have been writing to a dataset created by the in-memory driver. So now we need to use CreateCopy() to copy this in-memory dataset to a file in the user-specified raster driver format</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      GDALDriver* pOutDriver = GetGDALDriverManager()-&gt;GetDriverByName(m_strRasterGISOutFormat.c_str());</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;      GDALDataset* pOutDataSet = pOutDriver-&gt;CreateCopy(strFilePathName.c_str(), pDataSet, FALSE, m_papszGDALRasterOptions, NULL, NULL);</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      <span class="keywordflow">if</span> (NULL == pOutDataSet)</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      {</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;         <span class="comment">// Couldn&#39;t create file</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot create &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      }</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160; </div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      <span class="comment">// Get rid of this user-selected dataset object</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      GDALClose(pOutDataSet);</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   }</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160; </div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <span class="comment">// Get rid of dataset object</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   GDALClose(pDataSet);</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;   <span class="comment">// Also get rid of memory allocated to this array</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   <span class="keyword">delete</span>[] pfRaster;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;}</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160; </div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160; </div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;<span class="comment">/*==============================================================================================================================</span></div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;<span class="comment"> Writes integer GIS raster files using GDAL, using data from the RasterGrid array</span></div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment">===============================================================================================================================*/</span></div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="keywordtype">bool</span> CSimulation::bWriteRasterGISFloatISInt(<span class="keywordtype">int</span> <span class="keyword">const</span> nDataItem, <span class="keywordtype">string</span> <span class="keyword">const</span>* strPlotTitle, <span class="keywordtype">double</span> <span class="keyword">const</span> dElev)</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;{</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   <span class="comment">// Begin constructing the file name for this save</span></div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   <span class="keywordtype">string</span> strFilePathName(m_strOutPath);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   stringstream ststrTmp;</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160; </div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   <span class="keywordflow">switch</span> (nDataItem)</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;   {</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a3e05aff83053d3653d7d00bee44a7cee">RASTER_PLOT_BEACH_MASK</a>):</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#aedf845f9a0a475fbbdacc4d360830061">RASTER_BEACH_MASK_NAME</a>);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160; </div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a22ebd484a319e66723d2d7b0826272ce">RASTER_RASTER_PLOT_POTENTIAL_PLATFORM_EROSION_MASK</a>):</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a516844746927d29473ab56b7b3dc58f6">RASTER_POTENTIAL_PLATFORM_EROSION_MASK_NAME</a>);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160; </div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aebffe280988bf2cb101d2996bd2c4c6b">RASTER_PLOT_INUNDATION_MASK</a>):</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#abd47e018300356f21d387582a09b0970">RASTER_INUNDATION_MASK_NAME</a>);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160; </div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#afd13787ad3c8e5773f5ec0badd252b4b">RASTER_PLOT_SLICE</a>):</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      <span class="comment">// TODO get working for multiple slices</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a739b039f26da70a4bf29bfeb924fc6cf">RASTER_SLICE_NAME</a>);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      ststrTmp &lt;&lt; <span class="stringliteral">&quot;_&quot;</span> &lt;&lt; dElev &lt;&lt; <span class="stringliteral">&quot;_&quot;</span>;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      strFilePathName.append(ststrTmp.str());</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160; </div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af857787dcd2470e7c59bea05e37ea652">RASTER_PLOT_LANDFORM</a>):</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a7cb9fec0d7bdd97701926348498d40cd">RASTER_LANDFORM_NAME</a>);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160; </div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a75e3034741c1c76d21b02637f4e94b5f">RASTER_PLOT_INTERVENTION_CLASS</a>):</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a72dbd7c60cd70d5545aebd4770aefc78">RASTER_INTERVENTION_CLASS_NAME</a>);</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160; </div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af871d618bcd3e2f5732a47fecc733ea8">RASTER_PLOT_COAST</a>):</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a003f2aab60637a01b542dadef2865dad">RASTER_COAST_NAME</a>);</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160; </div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#abb9979a86da80c3bec2abe8c3670096b">RASTER_PLOT_NORMAL</a>):</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#adf0c5981d6b02e1cf030761683b5fbe2">RASTER_COAST_NORMAL_NAME</a>);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160; </div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ae4df3a3ef48ea99a0a883d14bc3db17f">RASTER_PLOT_ACTIVE_ZONE</a>):</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a4fbab57af5e29acec8a1b06abf59eb00">RASTER_ACTIVE_ZONE_NAME</a>);</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160; </div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a803c598eab489d8f7d6a51236023bc52">RASTER_PLOT_POLYGON</a>):</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a528944ef3940763bea48665270062c0b">RASTER_POLYGON_NAME</a>);</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160; </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a60f4ba6a7dd0ab10a4299859aaf2425a">RASTER_PLOT_SHADOW_ZONE</a>):</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a371b8b6b82d6ba7043adeb0cda67e90c">RASTER_SHADOW_ZONE_NAME</a>);</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a136a4b377b34d962ede27dc9228e5a23">RASTER_PLOT_SHADOW_DOWNDRIFT_ZONE</a>):</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a0af645632c2a0ed2ca69baba0a5efb85">RASTER_SHADOW_DOWNDRIFT_ZONE_NAME</a>);</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af9b7330a34df52af39ad3c36df236549">RASTER_PLOT_POLYGON_UPDRIFT_OR_DOWNDRIFT</a>):</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      strFilePathName.append(<a class="code" href="cme_8h.html#a9ccfb3961b53c5abeb545894633e0623">RASTER_POLYGON_UPDRIFT_OR_DOWNDRIFT_NAME</a>);</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   }</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160; </div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;   <span class="comment">// Append the &#39;save number&#39; to the filename, and prepend zeros to the save number</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   strFilePathName.append(<span class="stringliteral">&quot;_&quot;</span>);</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;   ststrTmp.clear();</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   ststrTmp.str(<span class="keywordtype">string</span>());</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;   ststrTmp &lt;&lt; FillToWidth(<span class="charliteral">&#39;0&#39;</span>, <a class="code" href="cme_8h.html#abb3aac718fc9bc736182cd5c39535c5e">MAX_SAVE_DIGITS</a>) &lt;&lt; m_nGISSave;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;   strFilePathName.append(ststrTmp.str());</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160; </div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;   <span class="comment">// Finally, maybe append the extension</span></div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   <span class="keywordflow">if</span> (! m_strGDALRasterOutputDriverExtension.empty())</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;   {</div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      strFilePathName.append(<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      strFilePathName.append(m_strGDALRasterOutputDriverExtension);</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   }</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160; </div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;   GDALDriver* pDriver;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;   GDALDataset* pDataSet;</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;   <span class="keywordflow">if</span> (m_bGDALCanCreate)</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;   {</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      <span class="comment">// The user-requested raster driver supports the Create() method</span></div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      pDriver = GetGDALDriverManager()-&gt;GetDriverByName(m_strRasterGISOutFormat.c_str());</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      pDataSet = pDriver-&gt;Create(strFilePathName.c_str(), m_nXGridMax, m_nYGridMax, 1, m_GDALWriteIntDataType, m_papszGDALRasterOptions);</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <span class="keywordflow">if</span> (NULL == pDataSet)</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      {</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;         <span class="comment">// Couldn&#39;t create file</span></div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot create &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      }</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   }</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   <span class="keywordflow">else</span></div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;   {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      <span class="comment">// The user-requested raster driver does not support the Create() method, so we must first create a memory-file dataset</span></div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      pDriver = GetGDALDriverManager()-&gt;GetDriverByName(<span class="stringliteral">&quot;MEM&quot;</span>);</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;      pDataSet = pDriver-&gt;Create(<span class="stringliteral">&quot;&quot;</span>, m_nXGridMax, m_nYGridMax, 1, m_GDALWriteIntDataType, NULL);</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <span class="keywordflow">if</span> (NULL == pDataSet)</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;      {</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;         <span class="comment">// Couldn&#39;t create in-memory file dataset</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot create in-memory file for &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;      }</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   }</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;   <span class="comment">// Set projection info for output dataset (will be same as was read in from DEM)</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);                              <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   pDataSet-&gt;SetProjection(m_strGDALBasementDEMProjection.c_str());        <span class="comment">// Will fail for some formats</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160; </div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   <span class="comment">// Set geotransformation info for output dataset (will be same as was read in from DEM)</span></div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   <span class="keywordflow">if</span> (CE_Failure == pDataSet-&gt;SetGeoTransform(m_dGeoTransform))</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <a class="code" href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">LogStream</a> &lt;&lt; <a class="code" href="cme_8h.html#aefc63c4bde02ca170b0e7bd038ba7702">WARN</a> &lt;&lt; <span class="stringliteral">&quot;cannot write geotransformation information to &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;   <span class="comment">// Allocate memory for a 1D array, to hold the integer raster band data for GDAL</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;   <span class="keywordtype">int</span>* pnRaster;</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;   pnRaster = <span class="keyword">new</span> <span class="keywordtype">int</span>[m_ulNumCells];</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   <span class="keywordflow">if</span> (NULL == pnRaster)</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   {</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      <span class="comment">// Error, can&#39;t allocate memory</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot allocate memory for &quot;</span> &lt;&lt; m_ulNumCells &lt;&lt; <span class="stringliteral">&quot; x 1D integer array for &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; endl;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="cme_8h.html#a0d90a78d3916bbdd05ec604056dd0231">RTN_ERR_MEMALLOC</a>);</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;   }</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160; </div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;   <span class="keywordtype">bool</span> bScaleOutput = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;   <span class="keywordtype">double</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      dRangeScale = 0,</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      dDataMin = 0;</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160; </div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   <span class="keywordflow">if</span> (! m_bGDALCanWriteInt32)</div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   {</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      <span class="keywordtype">double</span> dDataMax = 0;</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160; </div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;      <span class="comment">// The output file format cannot handle 32-bit integers, so we may have to scale the output</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;      GetRasterOutputMinMax(nDataItem, dDataMin, dDataMax, 0, dElev);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160; </div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <span class="keywordtype">double</span></div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;         dDataRange = dDataMax - dDataMin,</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;         dWriteRange = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_lGDALMaxCanWrite - m_lGDALMinCanWrite);</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160; </div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;      <span class="keywordflow">if</span> (dDataRange &gt; 0)</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;         dRangeScale = dWriteRange / dDataRange;</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      <span class="comment">// If we are attempting to write values which are outside this format&#39;s allowable range, and the user has set the option, then scale the output</span></div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <span class="keywordflow">if</span> (((dDataMin &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_lGDALMinCanWrite)) || (dDataMax &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_lGDALMaxCanWrite))) &amp;&amp; m_bScaleRasterOutput)</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;         bScaleOutput = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;   }</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160; </div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;   <span class="comment">// Fill the array</span></div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   <span class="keywordtype">int</span> nTmp  = 0,</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      n = 0,</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;      nTopLayer = 0;</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = 0; nY &lt; m_nYGridMax; nY++)</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;   {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; m_nXGridMax; nX++)</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      {</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;         <span class="keywordflow">switch</span> (nDataItem)</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;         {</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a22ebd484a319e66723d2d7b0826272ce">RASTER_RASTER_PLOT_POTENTIAL_PLATFORM_EROSION_MASK</a>):</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;            nTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a3ba9a139b838c676b85a6b065326aeb4">bPotentialPlatformErosion</a>();</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160; </div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aebffe280988bf2cb101d2996bd2c4c6b">RASTER_PLOT_INUNDATION_MASK</a>):</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;            nTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a28b760b0a9e63afd01e29610888fc7bc">bIsInContiguousSea</a>();</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160; </div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a3e05aff83053d3653d7d00bee44a7cee">RASTER_PLOT_BEACH_MASK</a>):</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;            nTmp = 0;</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;            nTopLayer = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a43434d6fd45da697ae17f7b274ba9a83">nGetTopNonZeroLayerAboveBasement</a>();</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            <span class="keywordflow">if</span> ((nTopLayer == <a class="code" href="cme_8h.html#aee2e0742555937187504ee86b95bc29c">INT_NODATA</a>) || (nTopLayer == <a class="code" href="cme_8h.html#a6da5abe13cf250e9663012ef6633d92a">NO_NONZERO_THICKNESS_LAYERS</a>))</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;               <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160; </div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            <span class="keywordflow">if</span> ((m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">pGetLayerAboveBasement</a>(nTopLayer)-&gt;<a class="code" href="class_c_r_w_cell_layer.html#a968b7fbdc65a6e0a230ce25e9a59e129">dGetUnconsolidatedThickness</a>() &gt; 0) &amp;&amp; (m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a6387aaac391af63a9f2be1c809ce169c">dGetSedimentTopElev</a>() &gt; m_dThisTimestepSWL))</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;               nTmp = 1;</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160; </div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#afd13787ad3c8e5773f5ec0badd252b4b">RASTER_PLOT_SLICE</a>):</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            nTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a861c4641b31bb1f920daa863a98ea35c">nGetLayerAtElev</a>(dElev);</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160; </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af857787dcd2470e7c59bea05e37ea652">RASTER_PLOT_LANDFORM</a>):</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;            nTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#af1321d6f96845f7933e6d7167267ed41">pGetLandform</a>()-&gt;<a class="code" href="class_c_r_w_cell_landform.html#a5350a7ac48d1eef3a78bef9bcf041b45">nGetLFCategory</a>();</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;            <span class="keywordflow">if</span> ((nTmp == <a class="code" href="cme_8h.html#a7abec008cf84fe3fe52ac3158ff7df7d">LF_CAT_DRIFT</a>) || (nTmp == <a class="code" href="cme_8h.html#a915bca276bfa72e37eca91e05f4d1656">LF_CAT_CLIFF</a>))</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;               nTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#af1321d6f96845f7933e6d7167267ed41">pGetLandform</a>()-&gt;<a class="code" href="class_c_r_w_cell_landform.html#a97cc978043b02b47d7bdd7c10bb270f8">nGetLFSubCategory</a>();</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160; </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a75e3034741c1c76d21b02637f4e94b5f">RASTER_PLOT_INTERVENTION_CLASS</a>):</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;            nTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a73f4d48988ff9eabf9b8f0303532ff25">nGetInterventionClass</a>();</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160; </div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af871d618bcd3e2f5732a47fecc733ea8">RASTER_PLOT_COAST</a>):</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;            nTmp = (m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#adf6945cbe65da7210a2f5d49ef7f736e">bIsCoastline</a>() ? 1 : 0);</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160; </div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#abb9979a86da80c3bec2abe8c3670096b">RASTER_PLOT_NORMAL</a>):</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;            nTmp = (m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#ad2c6f63894b9feea63d71d15932c0825">bIsProfile</a>() ? 1 : 0);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160; </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ae4df3a3ef48ea99a0a883d14bc3db17f">RASTER_PLOT_ACTIVE_ZONE</a>):</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;            nTmp = (m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a657a6ebbff5ffe37aedad0d26281eb03">bIsInActiveZone</a>() ? 1 : 0);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160; </div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a803c598eab489d8f7d6a51236023bc52">RASTER_PLOT_POLYGON</a>):</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;            nTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a622387009a4fcb864bfdab627389ea84">nGetPolygonID</a>();</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160; </div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a60f4ba6a7dd0ab10a4299859aaf2425a">RASTER_PLOT_SHADOW_ZONE</a>):</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            nTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a206e79e2d10e831a8464079870bd547b">nGetShadowZoneNumber</a>();</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160; </div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a136a4b377b34d962ede27dc9228e5a23">RASTER_PLOT_SHADOW_DOWNDRIFT_ZONE</a>):</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            nTmp = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a9a5321cb6c2accfb287f60f7ca1011cd">nGetDownDriftZoneNumber</a>();</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160; </div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;         <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af9b7330a34df52af39ad3c36df236549">RASTER_PLOT_POLYGON_UPDRIFT_OR_DOWNDRIFT</a>):</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            <span class="keywordtype">int</span> nPoly = m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a622387009a4fcb864bfdab627389ea84">nGetPolygonID</a>();</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            <span class="keywordflow">if</span> (nPoly == <a class="code" href="cme_8h.html#aee2e0742555937187504ee86b95bc29c">INT_NODATA</a>)</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;               nTmp = m_nMissingValue;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;            {</div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;               <span class="keywordflow">if</span> (m_pVCoastPolygon[nPoly]-&gt;bDownCoastThisTimestep())</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                  nTmp = 1;</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;               <span class="keywordflow">else</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;                  nTmp = 0;</div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            }</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;         }</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160; </div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;         <span class="comment">// If necessary, scale this value</span></div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;         <span class="keywordflow">if</span> (bScaleOutput)</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            nTmp = <a class="code" href="utils__global_8cpp.html#a20842d0a19d0ca952c91f3e1eb175fee">nRound</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(m_lGDALMinCanWrite) + (dRangeScale * (nTmp - dDataMin)));</div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160; </div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;         <span class="comment">// Write it to the array</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;         pnRaster[n++] = nTmp;</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      }</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;   }</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160; </div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;   <span class="comment">// Create a single raster band</span></div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;   GDALRasterBand* pBand = pDataSet-&gt;GetRasterBand(1);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160; </div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;   <span class="comment">// Set value units for this band</span></div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   <span class="keywordtype">string</span> strUnits;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   <span class="keywordflow">switch</span> (nDataItem)</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   {</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a22ebd484a319e66723d2d7b0826272ce">RASTER_RASTER_PLOT_POTENTIAL_PLATFORM_EROSION_MASK</a>):</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#aebffe280988bf2cb101d2996bd2c4c6b">RASTER_PLOT_INUNDATION_MASK</a>):</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a3e05aff83053d3653d7d00bee44a7cee">RASTER_PLOT_BEACH_MASK</a>):</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#afd13787ad3c8e5773f5ec0badd252b4b">RASTER_PLOT_SLICE</a>):</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af857787dcd2470e7c59bea05e37ea652">RASTER_PLOT_LANDFORM</a>):</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a75e3034741c1c76d21b02637f4e94b5f">RASTER_PLOT_INTERVENTION_CLASS</a>):</div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af871d618bcd3e2f5732a47fecc733ea8">RASTER_PLOT_COAST</a>):</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#abb9979a86da80c3bec2abe8c3670096b">RASTER_PLOT_NORMAL</a>):</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ae4df3a3ef48ea99a0a883d14bc3db17f">RASTER_PLOT_ACTIVE_ZONE</a>):</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a803c598eab489d8f7d6a51236023bc52">RASTER_PLOT_POLYGON</a>):</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a60f4ba6a7dd0ab10a4299859aaf2425a">RASTER_PLOT_SHADOW_ZONE</a>):</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a136a4b377b34d962ede27dc9228e5a23">RASTER_PLOT_SHADOW_DOWNDRIFT_ZONE</a>):</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af9b7330a34df52af39ad3c36df236549">RASTER_PLOT_POLYGON_UPDRIFT_OR_DOWNDRIFT</a>):</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      strUnits = <span class="stringliteral">&quot;none&quot;</span>;</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;   }</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160; </div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);                  <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;   pBand-&gt;SetUnitType(strUnits.c_str());                       <span class="comment">// Not supported for some GIS formats</span></div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160; </div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;   <span class="comment">// Tell the output dataset about NODATA (missing values)</span></div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);                  <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;   pBand-&gt;SetNoDataValue(m_nMissingValue);                     <span class="comment">// Will fail for some formats</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160; </div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   <span class="comment">// Construct the description</span></div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;   <span class="keywordtype">string</span> strDesc(*strPlotTitle);</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   <span class="keywordflow">if</span> (nDataItem == <a class="code" href="cme_8h.html#afd13787ad3c8e5773f5ec0badd252b4b">RASTER_PLOT_SLICE</a>)</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;   {</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      ststrTmp.clear();</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      ststrTmp &lt;&lt; dElev &lt;&lt; <span class="stringliteral">&quot;m, &quot;</span>;</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      strDesc.append(ststrTmp.str());</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;   }</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;   strDesc.append(<span class="stringliteral">&quot; at &quot;</span>);</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;   strDesc.append(strDispTime(m_dSimElapsed, <span class="keyword">false</span>, <span class="keyword">false</span>));</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160; </div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;   <span class="comment">// Set the GDAL description</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   pBand-&gt;SetDescription(strDesc.c_str());</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   <span class="comment">// Set raster category names</span></div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   <span class="keywordtype">char</span>** papszCategoryNames = NULL;</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;   <span class="keywordflow">switch</span> (nDataItem)</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   {</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#afd13787ad3c8e5773f5ec0badd252b4b">RASTER_PLOT_SLICE</a>):</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Basement&quot;</span>);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Layer 0&quot;</span>);</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Layer 1&quot;</span>);</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Layer 2&quot;</span>);</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Layer 3&quot;</span>);</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Layer 4&quot;</span>);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Layer 5&quot;</span>);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Layer 6&quot;</span>);</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Layer 7&quot;</span>);</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Layer 8&quot;</span>);</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Layer 9&quot;</span>);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160; </div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af857787dcd2470e7c59bea05e37ea652">RASTER_PLOT_LANDFORM</a>):</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;None&quot;</span>);</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Hinterland&quot;</span>);</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Sea&quot;</span>);</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Cliff&quot;</span>);</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Drift&quot;</span>);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Intervention&quot;</span>);</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160; </div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Cliff on Coastline&quot;</span>);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Inland Cliff&quot;</span>);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160; </div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Mixed Drift&quot;</span>);</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Talus&quot;</span>);</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Beach&quot;</span>);</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Dunes&quot;</span>);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160; </div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a75e3034741c1c76d21b02637f4e94b5f">RASTER_PLOT_INTERVENTION_CLASS</a>):</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;None&quot;</span>);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Structural&quot;</span>);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Non-Structural&quot;</span>);</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160; </div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af871d618bcd3e2f5732a47fecc733ea8">RASTER_PLOT_COAST</a>):</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Not coastline&quot;</span>);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Coastline&quot;</span>);</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160; </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#abb9979a86da80c3bec2abe8c3670096b">RASTER_PLOT_NORMAL</a>):</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Not coastline-normal profile&quot;</span>);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Coastline-normal profile&quot;</span>);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#ae4df3a3ef48ea99a0a883d14bc3db17f">RASTER_PLOT_ACTIVE_ZONE</a>):</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Not in active zone&quot;</span>);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;In active zone&quot;</span>);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160; </div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a803c598eab489d8f7d6a51236023bc52">RASTER_PLOT_POLYGON</a>):</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Not polygon&quot;</span>);</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;In polygon&quot;</span>);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160; </div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a60f4ba6a7dd0ab10a4299859aaf2425a">RASTER_PLOT_SHADOW_ZONE</a>):</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Not in shadow zone&quot;</span>);</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;In shadow zone&quot;</span>);</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160; </div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#a136a4b377b34d962ede27dc9228e5a23">RASTER_PLOT_SHADOW_DOWNDRIFT_ZONE</a>):</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Not in shadow downdrift zone&quot;</span>);</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;In shadow downdrift zone&quot;</span>);</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160; </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;   <span class="keywordflow">case</span> (<a class="code" href="cme_8h.html#af9b7330a34df52af39ad3c36df236549">RASTER_PLOT_POLYGON_UPDRIFT_OR_DOWNDRIFT</a>):</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Updrift movement of unconsolidated sediment &quot;</span>);</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      papszCategoryNames = CSLAddString(papszCategoryNames, <span class="stringliteral">&quot;Downdrift movement of unconsolidated sediment&quot;</span>);</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   }</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160; </div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);        <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;   pBand-&gt;SetCategoryNames(papszCategoryNames);      <span class="comment">// Not supported for some GIS formats</span></div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160; </div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   <span class="comment">// Now write the data</span></div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   <span class="keywordflow">if</span> (CE_Failure == pBand-&gt;RasterIO(GF_Write, 0, 0, m_nXGridMax, m_nYGridMax, pnRaster, m_nXGridMax, m_nYGridMax, GDT_Int32, 0, 0, NULL))</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;   {</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <span class="comment">// Write error</span></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot write data for &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <span class="keyword">delete</span>[] pnRaster;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;   }</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160; </div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   <span class="comment">// Calculate statistics for this band</span></div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;   <span class="keywordtype">double</span> dMin, dMax, dMean, dStdDev;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);        <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   pBand-&gt;ComputeStatistics(<span class="keyword">false</span>, &amp;dMin, &amp;dMax, &amp;dMean, &amp;dStdDev, NULL, NULL);</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160; </div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;   <span class="comment">// And then write the statistics</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   CPLPushErrorHandler(CPLQuietErrorHandler);        <span class="comment">// Needed to get next line to fail silently, if it fails</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   pBand-&gt;SetStatistics(dMin, dMax, dMean, dStdDev);</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;   CPLPopErrorHandler();</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160; </div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;   <span class="keywordflow">if</span> (! m_bGDALCanCreate)</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;   {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      <span class="comment">// Since the user-selected raster driver cannot use the Create() method, we have been writing to a dataset created by the in-memory driver. So now we need to use CreateCopy() to copy this in-memory dataset to a file in the user-specified raster driver format</span></div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;      GDALDriver* pOutDriver = GetGDALDriverManager()-&gt;GetDriverByName(m_strRasterGISOutFormat.c_str());</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;      GDALDataset* pOutDataSet = pOutDriver-&gt;CreateCopy(strFilePathName.c_str(), pDataSet, FALSE, m_papszGDALRasterOptions, NULL, NULL);</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      <span class="keywordflow">if</span> (NULL == pOutDataSet)</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      {</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;         <span class="comment">// Couldn&#39;t create file</span></div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;         cerr &lt;&lt; <a class="code" href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a> &lt;&lt; <span class="stringliteral">&quot;cannot create &quot;</span> &lt;&lt; m_strRasterGISOutFormat &lt;&lt; <span class="stringliteral">&quot; file named &quot;</span> &lt;&lt; strFilePathName &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span> &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;         <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      }</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160; </div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="comment">// Get rid of this user-selected dataset object</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      GDALClose(pOutDataSet);</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   }</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160; </div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;   <span class="comment">// Get rid of dataset object</span></div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;   GDALClose(pDataSet);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; </div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;   <span class="comment">// Get rid of memory allocated to this array</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;   <span class="keyword">delete</span>[] pnRaster;</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160; </div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;}</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160; </div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160; </div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;<span class="comment">/*===============================================================================================================================</span></div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;<span class="comment"> Interpolates wave properties from all profiles to all within-polygon sea cells. We use GDALGridCreate(), the library version of external utility gdal_grid, to do this</span></div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;<span class="comment">===============================================================================================================================*/</span></div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="keywordtype">int</span> CSimulation::nInterpolateWavePropertiesToWithinPolygonCells(vector&lt;int&gt; <span class="keyword">const</span>* pVnX, vector&lt;int&gt; <span class="keyword">const</span>* pVnY, vector&lt;double&gt; <span class="keyword">const</span>* pVdHeightX, vector&lt;double&gt; <span class="keyword">const</span>* pVdHeightY)</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;{</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;   <span class="keywordtype">int</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      nXSize = 0,</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      nYSize = 0;</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160; </div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;   vector&lt;double&gt;</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      VdOutX,</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      VdOutY;</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160; </div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nPoints = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(pVnX-&gt;size());</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160; </div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nDirection = 0; nDirection &lt; 2; nDirection++)</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;   {</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;      <span class="comment">// It is necessary to transfer the data from the pVnX, pVnY, pVdHeightX and pVdHeightY vectors into c-style arrays of doubles, because this is what GDALGridCreate() wants TODO try doing this earlier, for speed</span></div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;      <span class="keywordtype">double</span>* dX = <span class="keyword">new</span> <span class="keywordtype">double</span>[nPoints];</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      <span class="keywordtype">double</span>* dY = <span class="keyword">new</span> <span class="keywordtype">double</span>[nPoints];</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <span class="keywordtype">double</span>* dZ = <span class="keyword">new</span> <span class="keywordtype">double</span>[nPoints];</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160; </div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n = 0; n &lt; nPoints; n++)</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      {</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;         dX[n] = pVnX-&gt;at(n);</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;         dY[n] = pVnY-&gt;at(n);</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;         <span class="keywordflow">if</span> (nDirection == 0)</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;            dZ[n] = pVdHeightY-&gt;at(n);</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;         <span class="keywordflow">else</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;            dZ[n] = pVdHeightX-&gt;at(n);</div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      }</div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160; </div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="comment">//          // TEST</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment">//       for (int nn = 0; nn &lt; nPoints; nn++)</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment">//       {</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment">//          LogStream &lt;&lt; nn &lt;&lt; &quot; &quot; &lt;&lt; dX[nn] &lt;&lt; &quot; &quot; &lt;&lt; dY[nn] &lt;&lt; &quot; &quot; &lt;&lt; dZ[nn] &lt;&lt; endl;</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment">//       }</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160; </div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;<span class="comment">//          m_nXMaxBoundingBox = m_nXGridMax-1;</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="comment">//          m_nYMaxBoundingBox = m_nYGridMax-1;</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="comment">//          m_nXMinBoundingBox = 0;</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="comment">//          m_nYMinBoundingBox = 0;</span></div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="comment">//          // TEST</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160; </div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;      nXSize = m_nXMaxBoundingBox - m_nXMinBoundingBox + 1;</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      nYSize = m_nYMaxBoundingBox - m_nYMinBoundingBox + 1;</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      <span class="keywordtype">int</span> nGridSize = nXSize * nYSize;</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160; </div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment">//          LogStream &lt;&lt; &quot;nDirection = &quot; &lt;&lt; nDirection &lt;&lt; &quot; nXSize = &quot; &lt;&lt; nXSize &lt;&lt; &quot; nYSize = &quot; &lt;&lt; nYSize &lt;&lt; &quot; nGridSize = &quot; &lt;&lt; nGridSize &lt;&lt; endl;</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160; </div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      <span class="comment">// Use the GDALGridCreate() linear interpolation algorithm: this computes a Delaunay triangulation of the point cloud, finding in which triangle of the triangulation the point is, and by doing linear interpolation from its barycentric coordinates within the triangle. If the point is not in any triangle, depending on the radius, the algorithm will use the value of the nearest point or the nodata value. Only available in GDAL 2.1 and later</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;      GDALGridLinearOptions options;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      memset(&amp;options, 0, <span class="keyword">sizeof</span>(options));</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      options.dfNoDataValue = m_dMissingValue;     <span class="comment">// No data marker to fill empty points</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      options.dfRadius = -1;                       <span class="comment">// Set the search radius to infinite</span></div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160; </div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <span class="comment">// For the gridded output, must be a c-style array</span></div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      <span class="keywordtype">double</span>* dOut = <span class="keyword">new</span> <span class="keywordtype">double</span>[nGridSize];</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160; </div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      <span class="comment">// Call GDALGridCreate()</span></div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      <span class="keywordtype">int</span> nRet = GDALGridCreate(GGA_Linear, &amp;options, nPoints, dX, dY, dZ, m_nXMinBoundingBox, m_nXMaxBoundingBox, m_nYMinBoundingBox, m_nYMaxBoundingBox, nXSize, nYSize, GDT_Float64, dOut, NULL, NULL);</div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;      <span class="keywordflow">if</span> (nRet == CE_Failure)</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;      {</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;         cerr &lt;&lt; CPLGetLastErrorMsg() &lt;&lt; endl;</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160; </div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;         <span class="keyword">delete</span>[] dX;</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;         <span class="keyword">delete</span>[] dY;</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;         <span class="keyword">delete</span>[] dZ;</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160; </div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#ad9c811b13123a260ecae06bdb57cf1e5">RTN_ERR_GRIDCREATE</a>;</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      }</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160; </div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      <span class="comment">// Tidy</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      <span class="keyword">delete</span>[] dX;</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <span class="keyword">delete</span>[] dY;</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      <span class="keyword">delete</span>[] dZ;</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160; </div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      <span class="comment">// The output from GDALGridCreate() is in dOut but must be reversed</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = nYSize-1; nY &gt;= 0; nY--)</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      {</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; nXSize; nX++)</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;         {</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;            <span class="keywordflow">if</span> (nDirection == 1)</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;               VdOutX.push_back(dOut[n]);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;               VdOutY.push_back(dOut[n]);</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160; </div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<span class="comment">//                LogStream &lt;&lt; &quot;nDirection = &quot; &lt;&lt; nDirection &lt;&lt; &quot; nX = &quot; &lt;&lt; nX &lt;&lt; &quot; nY = &quot; &lt;&lt; nY &lt;&lt; &quot; n = &quot;  &lt;&lt; n &lt;&lt; &quot; n+nX = &quot; &lt;&lt; n+nX &lt;&lt; &quot; dOut[n + nX] = &quot; &lt;&lt; dOut[n + nX] &lt;&lt; endl;</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            n++;</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;         }</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;      }</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160; </div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      <span class="keyword">delete</span>[] dOut;</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;<span class="comment">//          // TEST ===========================================</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;<span class="comment">//          string strOutFile;</span></div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;<span class="comment">//          if (nDirection == 1)</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;<span class="comment">//             strOutFile = &quot;testX.tif&quot;;</span></div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;<span class="comment">//          else</span></div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;<span class="comment">//             strOutFile = &quot;testY.tif&quot;;</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;<span class="comment">//          GDALDriver* pDriver = GetGDALDriverManager()-&gt;GetDriverByName(&quot;gtiff&quot;);</span></div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="comment">//          GDALDataset* pDataSet = pDriver-&gt;Create(strOutFile.c_str(), nXSize, nYSize, 1, GDT_Float64, m_papszGDALRasterOptions);</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="comment">//          pDataSet-&gt;SetProjection(m_strGDALBasementDEMProjection.c_str());</span></div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;<span class="comment">//          pDataSet-&gt;SetGeoTransform(m_dGeoTransform);</span></div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;<span class="comment">//          double* pdRaster = new double[nGridSize];</span></div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="comment">//          n = 0;</span></div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;<span class="comment">//          for (int nY = 0; nY &lt; nYSize; nY++)</span></div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;<span class="comment">//          {</span></div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;<span class="comment">//             for (int nX = 0; nX &lt; nXSize; nX++)</span></div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;<span class="comment">//             {</span></div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;<span class="comment">//                // Write this value to the array</span></div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;<span class="comment">//                if (nDirection == 1)</span></div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="comment">//                {</span></div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;<span class="comment">//                   pdRaster[n] = VdOutX[n];</span></div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;<span class="comment">// //                   LogStream &lt;&lt; &quot;nDirection = &quot; &lt;&lt; nDirection &lt;&lt; &quot; [&quot; &lt;&lt; nX &lt;&lt; &quot;][&quot; &lt;&lt; nY &lt;&lt; &quot;] = &quot; &lt;&lt; VdOutX[n] &lt;&lt; endl;</span></div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;<span class="comment">//                }</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;<span class="comment">//                else</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;<span class="comment">//                {</span></div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;<span class="comment">//                   pdRaster[n] = VdOutY[n];</span></div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;<span class="comment">// //                   LogStream &lt;&lt; &quot;nDirection = &quot; &lt;&lt; nDirection &lt;&lt; &quot; [&quot; &lt;&lt; nX &lt;&lt; &quot;][&quot; &lt;&lt; nY &lt;&lt; &quot;] = &quot; &lt;&lt; VdOutY[n] &lt;&lt; endl;</span></div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="comment">//                }</span></div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="comment">//                n++;</span></div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;<span class="comment">//             }</span></div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;<span class="comment">//          }</span></div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;<span class="comment">//          GDALRasterBand* pBand = pDataSet-&gt;GetRasterBand(1);</span></div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;<span class="comment">//          pBand-&gt;SetNoDataValue(m_dMissingValue);</span></div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;<span class="comment">//          nRet = pBand-&gt;RasterIO(GF_Write, 0, 0, nXSize, nYSize, pdRaster, nXSize, nYSize, GDT_Float64, 0, 0, NULL);</span></div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<span class="comment">//          if (nRet == CE_Failure)</span></div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="comment">//             return RTN_ERR_GRIDCREATE;</span></div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="comment">//          GDALClose(pDataSet);</span></div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="comment">//          delete[] pdRaster;</span></div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;<span class="comment">//          // TEST ===========================================</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;   }</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   <span class="comment">// Now put the x and y directions together and update the raster cells</span></div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;   <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = 0; nY &lt; nYSize; nY++)</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;   {</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; nXSize; nX++)</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      {</div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;         <span class="keywordtype">int</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            nActualX = nX + m_nXMinBoundingBox,</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;            nActualY = nY + m_nYMinBoundingBox;</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160; </div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;         <span class="comment">// Only update cells that are in the contiguous sea and inside a polygon</span></div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;         <span class="keywordflow">if</span> ((m_pRasterGrid-&gt;m_Cell[nActualX][nActualY].<a class="code" href="class_c_geom_cell.html#a28b760b0a9e63afd01e29610888fc7bc">bIsInContiguousSea</a>()) &amp;&amp; (m_pRasterGrid-&gt;m_Cell[nActualX][nActualY].<a class="code" href="class_c_geom_cell.html#a622387009a4fcb864bfdab627389ea84">nGetPolygonID</a>() != <a class="code" href="cme_8h.html#aee2e0742555937187504ee86b95bc29c">INT_NODATA</a>))</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;         {</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;            <span class="comment">// Calculate the wave height and direction</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;            <span class="keywordtype">double</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;               dWaveHeightX = VdOutX[n],</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;               dWaveHeightY = VdOutY[n],</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;               dWaveHeight = sqrt((dWaveHeightX * dWaveHeightX) + (dWaveHeightY * dWaveHeightY)),</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;               dWaveDir = atan2(dWaveHeightX, dWaveHeightY) * (180/<a class="code" href="cme_8h.html#a952eac791b596a61bba0a133a3bb439f">PI</a>);</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160; </div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;            <span class="comment">// Update the cell&#39;s wave attributes</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;            m_pRasterGrid-&gt;m_Cell[nActualX][nActualY].<a class="code" href="class_c_geom_cell.html#a213153422f9420825faafb87281e9f64">SetWaveHeight</a>(dWaveHeight);</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;            m_pRasterGrid-&gt;m_Cell[nActualX][nActualY].<a class="code" href="class_c_geom_cell.html#ae9f6bf560ede907f60849a6927000e4e">SetWaveOrientation</a>(dKeepWithin360(dWaveDir));</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160; </div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<span class="comment">//             LogStream &lt;&lt; &quot; nX = &quot; &lt;&lt; nX &lt;&lt; &quot; nY = &quot; &lt;&lt; nY &lt;&lt; &quot; [&quot; &lt;&lt; nActualX &lt;&lt; &quot;][&quot; &lt;&lt; nActualY &lt;&lt; &quot;] waveheight = &quot; &lt;&lt; dWaveHeight &lt;&lt; &quot; dWaveDir = &quot; &lt;&lt; dWaveDir &lt;&lt; &quot; dKeepWithin360(dWaveDir) = &quot; &lt;&lt; dKeepWithin360(dWaveDir) &lt;&lt; endl;</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;         }</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;         n++;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      }</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;   }</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160; </div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a71d8d6db0e41ed2022d0a95b9a70528c">RTN_OK</a>;</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;}</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160; </div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;<span class="comment">/*===============================================================================================================================</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<span class="comment"> Locate active cells as cells where wave height to depth ratio is larger than breaking limit</span></div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;<span class="comment">===============================================================================================================================*/</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;<span class="keywordtype">int</span> CSimulation::nInterpolateWavePropertiesToActiveZoneCells(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;{</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   <span class="keywordtype">int</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;      nXSize = m_nXMaxBoundingBox - m_nXMinBoundingBox + 1,</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      nYSize = m_nYMaxBoundingBox - m_nYMinBoundingBox + 1;</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="comment">//       nGridSize = nXSize * nYSize;</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;<span class="comment">//       LogStream &lt;&lt; &quot; nXSize = &quot; &lt;&lt; nXSize &lt;&lt; &quot; nYSize = &quot; &lt;&lt; nYSize &lt;&lt; &quot; nGridSize = &quot; &lt;&lt; nGridSize &lt;&lt; endl;</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160; </div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   <span class="comment">// Calculate the wave height-to-depth ratio for each cell</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;<span class="comment">//    int n = 0;</span></div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = 0; nY &lt; nYSize; nY++)</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;   {</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; nXSize; nX++)</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      {</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;         <span class="keywordtype">int</span></div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;            nActualX = nX + m_nXMinBoundingBox,</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;            nActualY = nY + m_nYMinBoundingBox;</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160; </div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;         <span class="keywordtype">double</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;            dWaveHeight = m_pRasterGrid-&gt;m_Cell[nActualX][nActualY].<a class="code" href="class_c_geom_cell.html#a770135e779cf4e4d74c9e78f19429d3c">dGetWaveHeight</a>(),</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;            dSeaDepth = m_pRasterGrid-&gt;m_Cell[nActualX][nActualY].<a class="code" href="class_c_geom_cell.html#a3a378431e2f6095792582989f50fb435">dGetSeaDepth</a>();</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160; </div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;         <span class="keywordflow">if</span> (m_pRasterGrid-&gt;m_Cell[nActualX][nActualY].<a class="code" href="class_c_geom_cell.html#a28b760b0a9e63afd01e29610888fc7bc">bIsInContiguousSea</a>())</div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;         {</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="comment">//                LogStream &lt;&lt; &quot; nX = &quot; &lt;&lt; nX &lt;&lt; &quot; nY = &quot; &lt;&lt; nY &lt;&lt; &quot; [&quot; &lt;&lt; nActualX &lt;&lt; &quot;][&quot; &lt;&lt; nActualY &lt;&lt; &quot;] active zone  = &quot; &lt;&lt; (VbOut[n] ? &quot;true&quot; : &quot;false&quot;) &lt;&lt; endl;</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;            m_pRasterGrid-&gt;m_Cell[nActualX][nActualY].<a class="code" href="class_c_geom_cell.html#a28847f89cc0d216f7f668d0d997837e1">SetInActiveZone</a>((dWaveHeight / dSeaDepth) &gt;= m_dBreakingWaveHeightDepthRatio);</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;         }</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;<span class="comment">//          n++;</span></div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      }</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;   }</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160; </div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a71d8d6db0e41ed2022d0a95b9a70528c">RTN_OK</a>;</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;}</div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160; </div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160; </div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;<span class="comment">/*===============================================================================================================================</span></div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<span class="comment"> Interpolates wave properties from all profiles to all active zone sea cells using GDALGridCreate(), the library version of external utility gdal_grid</span></div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;<span class="comment">===============================================================================================================================*/</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;<span class="keywordtype">int</span> CSimulation::nInterpolateWavePropertiesToActiveZoneCells(vector&lt;int&gt; <span class="keyword">const</span>* pVnX, vector&lt;int&gt; <span class="keyword">const</span>* pVnY, vector&lt;bool&gt; <span class="keyword">const</span>* pVbBreaking)</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;{</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nPoints = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(pVnX-&gt;size());</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   <span class="comment">// It is necessary to transfer the data from the pVnX, pVnY and pVbBreaking vectors into c-style arrays of doubles, because this is what GDALGridCreate wants TODO try doing this earlier, for speed</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;   <span class="keywordtype">double</span>* dX = <span class="keyword">new</span> <span class="keywordtype">double</span>[nPoints];</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   <span class="keywordtype">double</span>* dY = <span class="keyword">new</span> <span class="keywordtype">double</span>[nPoints];</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;   <span class="keywordtype">double</span>* dZ = <span class="keyword">new</span> <span class="keywordtype">double</span>[nPoints];</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160; </div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> n = 0; n &lt; nPoints; n++)</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;   {</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      dX[n] = pVnX-&gt;at(n);</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      dY[n] = pVnY-&gt;at(n);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      dZ[n] = pVbBreaking-&gt;at(n);</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   }</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160; </div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;<span class="comment">//       // TEST</span></div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;<span class="comment">//       m_nXMaxBoundingBox = m_nXGridMax-1;</span></div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;<span class="comment">//       m_nYMaxBoundingBox = m_nYGridMax-1;</span></div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;<span class="comment">//       m_nXMinBoundingBox = 0;</span></div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;<span class="comment">//       m_nYMinBoundingBox = 0;</span></div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;<span class="comment">//       // TEST</span></div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;   <span class="keywordtype">int</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      nXSize = m_nXMaxBoundingBox - m_nXMinBoundingBox + 1,</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;      nYSize = m_nYMaxBoundingBox - m_nYMinBoundingBox + 1,</div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;      nGridSize = nXSize * nYSize;</div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="comment">//       LogStream &lt;&lt; &quot; nXSize = &quot; &lt;&lt; nXSize &lt;&lt; &quot; nYSize = &quot; &lt;&lt; nYSize &lt;&lt; &quot; nGridSize = &quot; &lt;&lt; nGridSize &lt;&lt; endl;</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160; </div>
<div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;   <span class="comment">// Call GDALGridCreate() with the nearest neighbour interpolation algorithm. It has following parameters: radius1 is the first radius (X axis if rotation angle is 0) of the search ellipse, set this to zero (the default) to use the whole point array; radius2 is the second radius (Y axis if rotation angle is 0) of the search ellipse, again set this parameter to zero (the default) to use the whole point array; angle is the angle of the search ellipse rotation in degrees (counter clockwise, default 0.0); nodata is the NODATA marker to fill empty points (default 0.0).</span></div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;   GDALGridNearestNeighborOptions options;</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;   memset(&amp;options, 0, <span class="keyword">sizeof</span>(options));</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;   options.dfNoDataValue = m_nMissingValue;</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160; </div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;   <span class="comment">// For the gridded output, must be a c-style array</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;   <span class="keywordtype">int</span>* nOut = <span class="keyword">new</span> <span class="keywordtype">int</span>[nGridSize];</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160; </div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;   <span class="comment">// OK, now create a gridded version of the active zone: first create the GDAL context</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;   GDALGridContext* pContext = GDALGridContextCreate(GGA_NearestNeighbor, &amp;options, nPoints, dX, dY, dZ, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;   <span class="keywordflow">if</span> (pContext == NULL)</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;   {</div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;      <span class="keyword">delete</span>[] dX;</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      <span class="keyword">delete</span>[] dY;</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <span class="keyword">delete</span>[] dZ;</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;      <span class="keyword">delete</span>[] nOut;</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160; </div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#ad9c811b13123a260ecae06bdb57cf1e5">RTN_ERR_GRIDCREATE</a>;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;   }</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160; </div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;   <span class="keyword">delete</span>[] dX;</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;   <span class="keyword">delete</span>[] dY;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;   <span class="keyword">delete</span>[] dZ;</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160; </div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;   <span class="comment">// Now process the context</span></div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;   <span class="keywordtype">int</span> nRet = GDALGridContextProcess(pContext, m_nXMinBoundingBox, m_nXMaxBoundingBox, m_nYMinBoundingBox, m_nYMaxBoundingBox, nXSize, nYSize, GDT_Int32, nOut, NULL, NULL);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   <span class="keywordflow">if</span> (nRet == CE_Failure)</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;   {</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      <span class="keyword">delete</span>[] nOut;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#ad9c811b13123a260ecae06bdb57cf1e5">RTN_ERR_GRIDCREATE</a>;</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;   }</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160; </div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;   <span class="comment">// And finally, get rid of the context</span></div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;   GDALGridContextFree(pContext);</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160; </div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160; </div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;   <span class="comment">// The output from GDALGridCreate() is in nOut but must be reversed</span></div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;   vector&lt;bool&gt; VbOut;</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;   <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = nYSize-1; nY &gt;= 0; nY--)</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;   {</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; nXSize; nX++)</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      {</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;         VbOut.push_back(nOut[n]);</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;<span class="comment">//             LogStream &lt;&lt; &quot; nX = &quot; &lt;&lt; nX &lt;&lt; &quot; nY = &quot; &lt;&lt; nY &lt;&lt; &quot; n = &quot; &lt;&lt; n &lt;&lt; &quot; nOut[n] = &quot; &lt;&lt; nOut[n] &lt;&lt; endl;</span></div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;         n++;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;      }</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;   }</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160; </div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;   <span class="keyword">delete</span>[] nOut;</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160; </div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;<span class="comment">//       // TEST ===========================================</span></div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;<span class="comment">//       string strOutFile = &quot;./testactive.tif&quot;;</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;<span class="comment">//       GDALDriver* pDriver = GetGDALDriverManager()-&gt;GetDriverByName(&quot;gtiff&quot;);</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;<span class="comment">//       GDALDataset* pDataSet = pDriver-&gt;Create(strOutFile.c_str(), nXSize, nYSize, 1, GDT_Int32, m_papszGDALRasterOptions);</span></div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<span class="comment">//       pDataSet-&gt;SetProjection(m_strGDALBasementDEMProjection.c_str());</span></div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;<span class="comment">//       pDataSet-&gt;SetGeoTransform(m_dGeoTransform);</span></div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;<span class="comment">//       int* pnRaster = new int[nGridSize];</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="comment">//       n = 0;</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="comment">//       for (int nY = 0; nY &lt; nYSize; nY++)</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<span class="comment">//       {</span></div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="comment">//          for (int nX = 0; nX &lt; nXSize; nX++)</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;<span class="comment">//          {</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="comment">//             // Write this value to the array</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="comment">//             pnRaster[n] = VbOut[n];</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="comment">//             n++;</span></div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;<span class="comment">//          }</span></div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;<span class="comment">//       }</span></div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;<span class="comment">//       GDALRasterBand* pBand = pDataSet-&gt;GetRasterBand(1);</span></div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">//       pBand-&gt;SetNoDataValue(m_nMissingValue);</span></div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="comment">//       nRet = pBand-&gt;RasterIO(GF_Write, 0, 0, nXSize, nYSize, pnRaster, nXSize, nYSize, GDT_Int32, 0, 0, NULL);</span></div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="comment">//       if (nRet == CE_Failure)</span></div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<span class="comment">//          return RTN_ERR_GRIDCREATE;</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="comment">//       GDALClose(pDataSet);</span></div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<span class="comment">//       delete[] pnRaster;</span></div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;<span class="comment">//       // TEST ===========================================</span></div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160; </div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;   <span class="comment">// Now update the raster cells</span></div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;   n = 0;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = 0; nY &lt; nYSize; nY++)</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;   {</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; nXSize; nX++)</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      {</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;         <span class="keywordtype">int</span></div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            nActualX = nX + m_nXMinBoundingBox,</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;            nActualY = nY + m_nYMinBoundingBox;</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160; </div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;         <span class="keywordflow">if</span> (m_pRasterGrid-&gt;m_Cell[nActualX][nActualY].<a class="code" href="class_c_geom_cell.html#a28b760b0a9e63afd01e29610888fc7bc">bIsInContiguousSea</a>())</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;         {</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;<span class="comment">//                LogStream &lt;&lt; &quot; nX = &quot; &lt;&lt; nX &lt;&lt; &quot; nY = &quot; &lt;&lt; nY &lt;&lt; &quot; [&quot; &lt;&lt; nActualX &lt;&lt; &quot;][&quot; &lt;&lt; nActualY &lt;&lt; &quot;] active zone  = &quot; &lt;&lt; (VbOut[n] ? &quot;true&quot; : &quot;false&quot;) &lt;&lt; endl;</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;            m_pRasterGrid-&gt;m_Cell[nActualX][nActualY].<a class="code" href="class_c_geom_cell.html#a28847f89cc0d216f7f668d0d997837e1">SetInActiveZone</a>(VbOut[n]);</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;         }</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160; </div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;         n++;</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      }</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   }</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160; </div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a71d8d6db0e41ed2022d0a95b9a70528c">RTN_OK</a>;</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;}</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160; </div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="comment">/*===============================================================================================================================</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="comment"> Interpolates multiple user-supplied deep water wave height and angle values to all cells (does not matter if it is a sea cell)</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="comment">===============================================================================================================================*/</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;<span class="keywordtype">int</span> CSimulation::nInterpolateAllDeepWaterWaveValues(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;{</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;   <span class="comment">// Interpolate deep water height and orientation from multiple user-supplied values</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nUserPoints = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(m_VdDeepWaterWaveStationX.size());</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160; </div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;   <span class="comment">// Call GDALGridCreate() with the GGA_InverseDistanceToAPower interpolation algorithm. It has following parameters: radius1 is the first radius (X axis if rotation angle is 0) of the search ellipse, set this to zero (the default) to use the whole point array; radius2 is the second radius (Y axis if rotation angle is 0) of the search ellipse, again set this parameter to zero (the default) to use the whole point array; angle is the angle of the search ellipse rotation in degrees (counter clockwise, default 0.0); nodata is the NODATA marker to fill empty points (default 0.0).</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;   GDALGridInverseDistanceToAPowerOptions options;</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;   memset(&amp;options, 0, <span class="keyword">sizeof</span>(options));</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;   options.dfAngle = 0;</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;   options.dfAnisotropyAngle = 0;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;   options.dfAnisotropyRatio = 0;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;   options.dfPower = 3;</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   options.dfSmoothing = 100;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;   options.dfRadius1 = 0;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;   options.dfRadius2 = 0;</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;   options.nMaxPoints = 0;</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   options.nMinPoints = 0;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;   options.dfNoDataValue = m_nMissingValue;</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160; </div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;<span class="comment">//    CPLSetConfigOption(&quot;CPL_DEBUG&quot;, &quot;ON&quot;);</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;<span class="comment">//    CPLSetConfigOption(&quot;GDAL_NUM_THREADS&quot;, &quot;1&quot;);</span></div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160; </div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   <span class="comment">// OK, now create a gridded version of wave height: first create the GDAL context</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;   GDALGridContext* pContext = GDALGridContextCreate(GGA_InverseDistanceToAPower, &amp;options, nUserPoints, &amp;m_VdDeepWaterWaveStationX[0], &amp;m_VdDeepWaterWaveStationY[0], &amp;m_VdDeepWaterWaveStationHeight[0], <span class="keyword">true</span>);</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;   <span class="keywordflow">if</span> (pContext == NULL)</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;   {</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#ad9c811b13123a260ecae06bdb57cf1e5">RTN_ERR_GRIDCREATE</a>;</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   }</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160; </div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   <span class="comment">// Now process the context</span></div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;   <span class="keywordtype">double</span>* dHeightOut = <span class="keyword">new</span> <span class="keywordtype">double</span>[m_ulNumCells];</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;   <span class="keywordtype">int</span> nRet = GDALGridContextProcess(pContext, 0, m_nXGridMax-1, 0, m_nYGridMax-1, m_nXGridMax, m_nYGridMax, GDT_Float64, dHeightOut, NULL, NULL);</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;   <span class="keywordflow">if</span> (nRet == CE_Failure)</div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;   {</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;      <span class="keyword">delete</span>[] dHeightOut;</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160; </div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#ad9c811b13123a260ecae06bdb57cf1e5">RTN_ERR_GRIDCREATE</a>;</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;   }</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160; </div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;   <span class="comment">// And finally, get rid of the context</span></div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;   GDALGridContextFree(pContext);</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160; </div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;   <span class="comment">// Next create a gridded version of wave orientation: first create the GDAL context</span></div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;   pContext = GDALGridContextCreate(GGA_InverseDistanceToAPower, &amp;options, nUserPoints,  &amp;(m_VdDeepWaterWaveStationX[0]), &amp;(m_VdDeepWaterWaveStationY[0]), (&amp;m_VdDeepWaterWaveStationAngle[0]), <span class="keyword">true</span>);</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;   <span class="keywordflow">if</span> (pContext == NULL)</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;   {</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <span class="keyword">delete</span>[] dHeightOut;</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160; </div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#ad9c811b13123a260ecae06bdb57cf1e5">RTN_ERR_GRIDCREATE</a>;</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;   }</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160; </div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;   <span class="comment">// Now process the context</span></div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;   <span class="keywordtype">double</span>* dAngleOut = <span class="keyword">new</span> <span class="keywordtype">double</span>[m_ulNumCells];</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;   nRet = GDALGridContextProcess(pContext, 0, m_nXGridMax-1, 0, m_nYGridMax-1, m_nXGridMax, m_nYGridMax, GDT_Float64, dAngleOut, NULL, NULL);</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;   <span class="keywordflow">if</span> (nRet == CE_Failure)</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   {</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      <span class="keyword">delete</span>[] dHeightOut;</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;      <span class="keyword">delete</span>[] dAngleOut;</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160; </div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#ad9c811b13123a260ecae06bdb57cf1e5">RTN_ERR_GRIDCREATE</a>;</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;   }</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160; </div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;   <span class="comment">// And finally, get rid of the context</span></div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   GDALGridContextFree(pContext);</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160; </div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="comment">// OK, now create a gridded version of wave period: first create the GDAL context</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;   pContext = GDALGridContextCreate(GGA_InverseDistanceToAPower, &amp;options, nUserPoints, &amp;m_VdDeepWaterWaveStationX[0], &amp;m_VdDeepWaterWaveStationY[0], &amp;m_VdDeepWaterWaveStationPeriod[0], <span class="keyword">true</span>);</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;   <span class="keywordflow">if</span> (pContext == NULL)</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;   {</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#ad9c811b13123a260ecae06bdb57cf1e5">RTN_ERR_GRIDCREATE</a>;</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;   }</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   <span class="comment">// Now process the context</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;   <span class="keywordtype">double</span>* dPeriodOut = <span class="keyword">new</span> <span class="keywordtype">double</span>[m_ulNumCells];</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;   nRet = GDALGridContextProcess(pContext, 0, m_nXGridMax-1, 0, m_nYGridMax-1, m_nXGridMax, m_nYGridMax, GDT_Float64, dPeriodOut, NULL, NULL);</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   <span class="keywordflow">if</span> (nRet == CE_Failure)</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;   {</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;      <span class="keyword">delete</span>[] dPeriodOut;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160; </div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#ad9c811b13123a260ecae06bdb57cf1e5">RTN_ERR_GRIDCREATE</a>;</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   }</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160; </div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;   <span class="comment">// And finally, get rid of the context</span></div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   GDALGridContextFree(pContext);</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160; </div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160; </div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <span class="comment">// The output from GDALGridCreate() is in dHeightOut, dAngleOut and dPeriodOut but must be reversed</span></div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;   vector&lt;double&gt;</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      VdHeight,</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;      VdAngle,</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;      VdPeriod;</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160; </div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;   <span class="keywordtype">int</span> n = 0;</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = m_nYGridMax-1; nY &gt;= 0; nY--)</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;   {</div>
<div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; m_nXGridMax; nX++)</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;      {</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;         VdHeight.push_back(dHeightOut[n]);</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;         VdAngle.push_back(dAngleOut[n]);</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;     VdPeriod.push_back(dPeriodOut[n]);</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;<span class="comment">//          LogStream &lt;&lt; &quot; nX = &quot; &lt;&lt; nX &lt;&lt; &quot; nY = &quot; &lt;&lt; nY &lt;&lt; &quot; n = &quot; &lt;&lt; n &lt;&lt; &quot; dHeightOut[n] = &quot; &lt;&lt; dHeightOut[n] &lt;&lt; &quot; dAngleOut[n] = &quot; &lt;&lt; dAngleOut[n] &lt;&lt; endl;</span></div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;         n++;</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;      }</div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;   }</div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160; </div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;   <span class="keyword">delete</span>[] dHeightOut;</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   <span class="keyword">delete</span>[] dAngleOut;</div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;   <span class="keyword">delete</span>[] dPeriodOut;</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160; </div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="comment">//    // TEST ===========================================</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;<span class="comment">//    string strOutFile = &quot;./testHeight.tif&quot;;</span></div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="comment">//    GDALDriver* pDriver = GetGDALDriverManager()-&gt;GetDriverByName(&quot;gtiff&quot;);</span></div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="comment">//    GDALDataset* pDataSet = pDriver-&gt;Create(strOutFile.c_str(), m_nXGridMax, m_nYGridMax, 1, GDT_Float64, m_papszGDALRasterOptions);</span></div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<span class="comment">//    pDataSet-&gt;SetProjection(m_strGDALBasementDEMProjection.c_str());</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;<span class="comment">//    pDataSet-&gt;SetGeoTransform(m_dGeoTransform);</span></div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;<span class="comment">//    double* pdRaster = new double[m_ulNumCells];</span></div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;<span class="comment">//    int nn = 0;</span></div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;<span class="comment">//    for (int nY = 0; nY &lt; m_nYGridMax; nY++)</span></div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="comment">//    {</span></div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;<span class="comment">//       for (int nX = 0; nX &lt; m_nXGridMax; nX++)</span></div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;<span class="comment">//       {</span></div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;<span class="comment">//          // Write this value to the array</span></div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<span class="comment">//          pdRaster[nn] = VdHeight[nn];</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;<span class="comment">//          nn++;</span></div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;<span class="comment">//       }</span></div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;<span class="comment">//    GDALRasterBand* pBand = pDataSet-&gt;GetRasterBand(1);</span></div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;<span class="comment">//    pBand-&gt;SetNoDataValue(m_nMissingValue);</span></div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;<span class="comment">//    nRet = pBand-&gt;RasterIO(GF_Write, 0, 0, m_nXGridMax, m_nYGridMax, pdRaster, m_nXGridMax, m_nYGridMax, GDT_Float64, 0, 0, NULL);</span></div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="comment">//    if (nRet == CE_Failure)</span></div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="comment">//       return RTN_ERR_GRIDCREATE;</span></div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<span class="comment">//    GDALClose(pDataSet);</span></div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;<span class="comment">//    strOutFile = &quot;./testAngle.tif&quot;;</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;<span class="comment">//    pDataSet = pDriver-&gt;Create(strOutFile.c_str(), m_nXGridMax, m_nYGridMax, 1, GDT_Float64, m_papszGDALRasterOptions);</span></div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;<span class="comment">//    pDataSet-&gt;SetProjection(m_strGDALBasementDEMProjection.c_str());</span></div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;<span class="comment">//    pDataSet-&gt;SetGeoTransform(m_dGeoTransform);</span></div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;<span class="comment">//    nn = 0;</span></div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;<span class="comment">//    for (int nY = 0; nY &lt; m_nYGridMax; nY++)</span></div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;<span class="comment">//    {</span></div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;<span class="comment">//       for (int nX = 0; nX &lt; m_nXGridMax; nX++)</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;<span class="comment">//       {</span></div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;<span class="comment">//          // Write this value to the array</span></div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;<span class="comment">//          pdRaster[nn] = VdAngle[nn];</span></div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;<span class="comment">//          nn++;</span></div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;<span class="comment">//       }</span></div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;<span class="comment">//    }</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;<span class="comment">//    pBand = pDataSet-&gt;GetRasterBand(1);</span></div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;<span class="comment">//    pBand-&gt;SetNoDataValue(m_nMissingValue);</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;<span class="comment">//    nRet = pBand-&gt;RasterIO(GF_Write, 0, 0, m_nXGridMax, m_nYGridMax, pdRaster, m_nXGridMax, m_nYGridMax, GDT_Float64, 0, 0, NULL);</span></div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;<span class="comment">//    if (nRet == CE_Failure)</span></div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;<span class="comment">//       return RTN_ERR_GRIDCREATE;</span></div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;<span class="comment">//    GDALClose(pDataSet);</span></div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="comment">//    delete[] pdRaster;</span></div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="comment">//    // TEST ===========================================</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160; </div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;   <span class="comment">// Now update all raster cells</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;   n = 0;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nY = 0; nY &lt; m_nYGridMax; nY++)</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;   {</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> nX = 0; nX &lt; m_nXGridMax; nX++)</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;      {</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;         m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#ac208a644e3d6cdcd5f232b4e0b8ae1d3">SetDeepWaterWaveHeight</a>(VdHeight[n]);</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;         m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a2ba1dc4bd910c2659950417a45116ff8">SetDeepWaterWaveOrientation</a>(VdAngle[n]);</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;     m_pRasterGrid-&gt;m_Cell[nX][nY].<a class="code" href="class_c_geom_cell.html#a28e4da4eaaa83edff8102e5e78b4d6be">SetDeepWaterWavePeriod</a>(VdPeriod[n]);</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160; </div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;<span class="comment">//          LogStream &lt;&lt; &quot; [&quot; &lt;&lt; nX &lt;&lt; &quot;][&quot; &lt;&lt; nY &lt;&lt; &quot;] deep water wave height = &quot; &lt;&lt; m_pRasterGrid-&gt;m_Cell[nX][nY].dGetDeepWaterWaveHeight() &lt;&lt; &quot; deep water wave angle = &quot; &lt;&lt; m_pRasterGrid-&gt;m_Cell[nX][nY].dGetDeepWaterWaveOrientation() &lt;&lt; endl;</span></div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;         n++;</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;      }</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;   }</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160; </div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="cme_8h.html#a71d8d6db0e41ed2022d0a95b9a70528c">RTN_OK</a>;</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;}</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160; </div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160; </div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160; </div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160; </div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="acme_8h_html_a2811de9edea915d96191f7db6f81c6df"><div class="ttname"><a href="cme_8h.html#a2811de9edea915d96191f7db6f81c6df">RASTER_PLOT_SEDIMENT_TOP_ELEVATION_ELEV</a></div><div class="ttdeci">const int RASTER_PLOT_SEDIMENT_TOP_ELEVATION_ELEV</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00317">cme.h:317</a></div></div>
<div class="ttc" id="acme_8h_html_ac0b725507d14873dd0b2d2db91e196db"><div class="ttname"><a href="cme_8h.html#ac0b725507d14873dd0b2d2db91e196db">RASTER_PLOT_TOTAL_POTENTIAL_BEACH_EROSION</a></div><div class="ttdeci">const int RASTER_PLOT_TOTAL_POTENTIAL_BEACH_EROSION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00327">cme.h:327</a></div></div>
<div class="ttc" id="aclass_c_r_w_cell_landform_html_aaf631af6cb530503a8fc676d4296ac79"><div class="ttname"><a href="class_c_r_w_cell_landform.html#aaf631af6cb530503a8fc676d4296ac79">CRWCellLandform::SetLFCategory</a></div><div class="ttdeci">void SetLFCategory(int const)</div><div class="ttdoc">Set the landform category and initialise the sub-category.</div><div class="ttdef"><b>Definition:</b> <a href="cell__landform_8cpp_source.html#l00043">cell_landform.cpp:43</a></div></div>
<div class="ttc" id="acme_8h_html_a673dd37f4f383c67a0cbff7b2b934f02"><div class="ttname"><a href="cme_8h.html#a673dd37f4f383c67a0cbff7b2b934f02">RASTER_PLOT_SAND_CONSOLIDATED_SEDIMENT</a></div><div class="ttdeci">const int RASTER_PLOT_SAND_CONSOLIDATED_SEDIMENT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00314">cme.h:314</a></div></div>
<div class="ttc" id="acme_8h_html_aa7c170ab1fb10c09a43967870508be40"><div class="ttname"><a href="cme_8h.html#aa7c170ab1fb10c09a43967870508be40">RASTER_PLOT_WAVE_HEIGHT</a></div><div class="ttdeci">const int RASTER_PLOT_WAVE_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00329">cme.h:329</a></div></div>
<div class="ttc" id="acme_8h_html_a2599c6272328075d83bf3ec2e2ac61f0"><div class="ttname"><a href="cme_8h.html#a2599c6272328075d83bf3ec2e2ac61f0">EAST</a></div><div class="ttdeci">const int EAST</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00190">cme.h:190</a></div></div>
<div class="ttc" id="aclass_c_r_w_cell_sediment_html_a166bd3ef8eb44ae4c6eff329e04bd3c0"><div class="ttname"><a href="class_c_r_w_cell_sediment.html#a166bd3ef8eb44ae4c6eff329e04bd3c0">CRWCellSediment::SetSand</a></div><div class="ttdeci">void SetSand(double const)</div><div class="ttdef"><b>Definition:</b> <a href="cell__sediment_8cpp_source.html#l00082">cell_sediment.cpp:82</a></div></div>
<div class="ttc" id="acme_8h_html_aeeb2eb80f77340ed3988d502d7c6b370"><div class="ttname"><a href="cme_8h.html#aeeb2eb80f77340ed3988d502d7c6b370">LANDFORM_RASTER</a></div><div class="ttdeci">const int LANDFORM_RASTER</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00255">cme.h:255</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a194a1b5e252a2e22b325b8480da49e9c"><div class="ttname"><a href="class_c_geom_cell.html#a194a1b5e252a2e22b325b8480da49e9c">CGeomCell::dGetCliffCollapseDeposition</a></div><div class="ttdeci">double dGetCliffCollapseDeposition(void) const</div><div class="ttdoc">Retuns the depth of this-timestep cliff deposition collapse on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00729">cell.cpp:729</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_ab9302874e09221ca32af9c981088e0af"><div class="ttname"><a href="class_c_geom_cell.html#ab9302874e09221ca32af9c981088e0af">CGeomCell::dGetTotCliffCollapse</a></div><div class="ttdeci">double dGetTotCliffCollapse(void) const</div><div class="ttdoc">Returns the running total depth of cliff collapse on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00716">cell.cpp:716</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a861c4641b31bb1f920daa863a98ea35c"><div class="ttname"><a href="class_c_geom_cell.html#a861c4641b31bb1f920daa863a98ea35c">CGeomCell::nGetLayerAtElev</a></div><div class="ttdeci">int nGetLayerAtElev(double const) const</div><div class="ttdoc">Given an elevation, this finds the index of the layer that contains that elevation (layer 0 being the...</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00498">cell.cpp:498</a></div></div>
<div class="ttc" id="aclass_c_geom2_d_i_point_html"><div class="ttname"><a href="class_c_geom2_d_i_point.html">CGeom2DIPoint</a></div><div class="ttdoc">Geometry class used to represent 2D point objects with integer co-ordinates.</div><div class="ttdef"><b>Definition:</b> <a href="2di__point_8h_source.html#l00029">2di_point.h:29</a></div></div>
<div class="ttc" id="acme_8h_html_a1b60ab85d74514c3a9870d04b286de8a"><div class="ttname"><a href="cme_8h.html#a1b60ab85d74514c3a9870d04b286de8a">RASTER_AVG_WAVE_HEIGHT_NAME</a></div><div class="ttdeci">const string RASTER_AVG_WAVE_HEIGHT_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00583">cme.h:583</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a657a6ebbff5ffe37aedad0d26281eb03"><div class="ttname"><a href="class_c_geom_cell.html#a657a6ebbff5ffe37aedad0d26281eb03">CGeomCell::bIsInActiveZone</a></div><div class="ttdeci">bool bIsInActiveZone(void) const</div><div class="ttdoc">Returns a flag which shows whether this cell is in the active zone.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00126">cell.cpp:126</a></div></div>
<div class="ttc" id="acme_8h_html_a55da5f1d76ed0a1696e8bf2ce89c120f"><div class="ttname"><a href="cme_8h.html#a55da5f1d76ed0a1696e8bf2ce89c120f">RASTER_BEACH_PROTECTION_NAME</a></div><div class="ttdeci">const string RASTER_BEACH_PROTECTION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00588">cme.h:588</a></div></div>
<div class="ttc" id="acme_8h_html_aa2f8a49263c41d9d53170a3d2dee27c5"><div class="ttname"><a href="cme_8h.html#aa2f8a49263c41d9d53170a3d2dee27c5">SOUTH</a></div><div class="ttdeci">const int SOUTH</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00192">cme.h:192</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a8fe16d2a288d84522f3cf3be63e4c00e"><div class="ttname"><a href="class_c_geom_cell.html#a8fe16d2a288d84522f3cf3be63e4c00e">CGeomCell::SetInterventionClass</a></div><div class="ttdeci">void SetInterventionClass(int const)</div><div class="ttdoc">Sets the landform category and subcategory for an intervention.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00829">cell.cpp:829</a></div></div>
<div class="ttc" id="acme_8h_html_a803c598eab489d8f7d6a51236023bc52"><div class="ttname"><a href="cme_8h.html#a803c598eab489d8f7d6a51236023bc52">RASTER_PLOT_POLYGON</a></div><div class="ttdeci">const int RASTER_PLOT_POLYGON</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00309">cme.h:309</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_ae9f6bf560ede907f60849a6927000e4e"><div class="ttname"><a href="class_c_geom_cell.html#ae9f6bf560ede907f60849a6927000e4e">CGeomCell::SetWaveOrientation</a></div><div class="ttdeci">void SetWaveOrientation(double const)</div><div class="ttdoc">Sets the wave orientation on this cell, also increments the total wave orientation.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00626">cell.cpp:626</a></div></div>
<div class="ttc" id="acme_8h_html_aa8147f8067ba2f7ecb05c3d7f706315d"><div class="ttname"><a href="cme_8h.html#aa8147f8067ba2f7ecb05c3d7f706315d">RASTER_PLOT_DEEP_WATER_WAVE_HEIGHT</a></div><div class="ttdeci">const int RASTER_PLOT_DEEP_WATER_WAVE_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00297">cme.h:297</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a3ba9a139b838c676b85a6b065326aeb4"><div class="ttname"><a href="class_c_geom_cell.html#a3ba9a139b838c676b85a6b065326aeb4">CGeomCell::bPotentialPlatformErosion</a></div><div class="ttdeci">bool bPotentialPlatformErosion(void) const</div><div class="ttdoc">Returns true if this cell has had potential erosion this timestep.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00159">cell.cpp:159</a></div></div>
<div class="ttc" id="acme_8h_html_acb8fb10195f618455e4cbcf94e0dc9c2"><div class="ttname"><a href="cme_8h.html#acb8fb10195f618455e4cbcf94e0dc9c2">RASTER_PLOT_TOTAL_BEACH_DEPOSITION</a></div><div class="ttdeci">const int RASTER_PLOT_TOTAL_BEACH_DEPOSITION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00324">cme.h:324</a></div></div>
<div class="ttc" id="acme_8h_html_a8dd02718b31898d01d79b2d9252fa1b2"><div class="ttname"><a href="cme_8h.html#a8dd02718b31898d01d79b2d9252fa1b2">RTN_ERR_DEMFILE</a></div><div class="ttdeci">const int RTN_ERR_DEMFILE</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00364">cme.h:364</a></div></div>
<div class="ttc" id="acme_8h_html_ad7ef12765835b521614cd38c500041ae"><div class="ttname"><a href="cme_8h.html#ad7ef12765835b521614cd38c500041ae">RASTER_SAND_CONS_NAME</a></div><div class="ttdeci">const string RASTER_SAND_CONS_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00609">cme.h:609</a></div></div>
<div class="ttc" id="acme_8h_html_aee2e0742555937187504ee86b95bc29c"><div class="ttname"><a href="cme_8h.html#aee2e0742555937187504ee86b95bc29c">INT_NODATA</a></div><div class="ttdeci">const int INT_NODATA</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00185">cme.h:185</a></div></div>
<div class="ttc" id="aclass_c_r_w_cell_landform_html_a97cc978043b02b47d7bdd7c10bb270f8"><div class="ttname"><a href="class_c_r_w_cell_landform.html#a97cc978043b02b47d7bdd7c10bb270f8">CRWCellLandform::nGetLFSubCategory</a></div><div class="ttdeci">int nGetLFSubCategory(void) const</div><div class="ttdoc">Get the landform sub-category.</div><div class="ttdef"><b>Definition:</b> <a href="cell__landform_8cpp_source.html#l00068">cell_landform.cpp:68</a></div></div>
<div class="ttc" id="acme_8h_html_acf42bfa317e547d5d93e47fcfd5895f8"><div class="ttname"><a href="cme_8h.html#acf42bfa317e547d5d93e47fcfd5895f8">RASTER_PLOT_AVG_WAVE_HEIGHT</a></div><div class="ttdeci">const int RASTER_PLOT_AVG_WAVE_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00286">cme.h:286</a></div></div>
<div class="ttc" id="acme_8h_html_a2f45b1bd5a48f1422c7696f2f8fe0f3d"><div class="ttname"><a href="cme_8h.html#a2f45b1bd5a48f1422c7696f2f8fe0f3d">RASTER_PLOT_AVG_SEA_DEPTH</a></div><div class="ttdeci">const int RASTER_PLOT_AVG_SEA_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00284">cme.h:284</a></div></div>
<div class="ttc" id="acme_8h_html_a0d90a78d3916bbdd05ec604056dd0231"><div class="ttname"><a href="cme_8h.html#a0d90a78d3916bbdd05ec604056dd0231">RTN_ERR_MEMALLOC</a></div><div class="ttdeci">const int RTN_ERR_MEMALLOC</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00367">cme.h:367</a></div></div>
<div class="ttc" id="acme_8h_html_a4fbab57af5e29acec8a1b06abf59eb00"><div class="ttname"><a href="cme_8h.html#a4fbab57af5e29acec8a1b06abf59eb00">RASTER_ACTIVE_ZONE_NAME</a></div><div class="ttdeci">const string RASTER_ACTIVE_ZONE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00613">cme.h:613</a></div></div>
<div class="ttc" id="acme_8h_html_a89311a98397f9d6967d2cb10d5152d77"><div class="ttname"><a href="cme_8h.html#a89311a98397f9d6967d2cb10d5152d77">TOLERANCE</a></div><div class="ttdeci">const double TOLERANCE</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00462">cme.h:462</a></div></div>
<div class="ttc" id="acme_8h_html_a9a31d74a1141771d7949d49255dbbdc5"><div class="ttname"><a href="cme_8h.html#a9a31d74a1141771d7949d49255dbbdc5">RASTER_BEACH_DEPOSITION_NAME</a></div><div class="ttdeci">const string RASTER_BEACH_DEPOSITION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00598">cme.h:598</a></div></div>
<div class="ttc" id="acme_8h_html_ab5466484c0192fbb085776644470a3b6"><div class="ttname"><a href="cme_8h.html#ab5466484c0192fbb085776644470a3b6">SAND_CONS_RASTER</a></div><div class="ttdeci">const int SAND_CONS_RASTER</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00249">cme.h:249</a></div></div>
<div class="ttc" id="acme_8h_html_adabd28961523210a40160a4b707529ea"><div class="ttname"><a href="cme_8h.html#adabd28961523210a40160a4b707529ea">RASTER_LOCAL_SLOPE_NAME</a></div><div class="ttdeci">const string RASTER_LOCAL_SLOPE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00578">cme.h:578</a></div></div>
<div class="ttc" id="acme_8h_html_a734faa3fb9f8a31426a51750dbd1220a"><div class="ttname"><a href="cme_8h.html#a734faa3fb9f8a31426a51750dbd1220a">RASTER_TOTAL_CLIFF_COLLAPSE_DEPOSITION_NAME</a></div><div class="ttdeci">const string RASTER_TOTAL_CLIFF_COLLAPSE_DEPOSITION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00617">cme.h:617</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_acf0c3a72abcae2a02a748663ae34937f"><div class="ttname"><a href="class_c_geom_cell.html#acf0c3a72abcae2a02a748663ae34937f">CGeomCell::SetBasementElev</a></div><div class="ttdeci">void SetBasementElev(double const)</div><div class="ttdoc">Sets this cell's basement elevation.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00274">cell.cpp:274</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a36b482677ecef0fe66d0decae3cf6b6c"><div class="ttname"><a href="class_c_geom_cell.html#a36b482677ecef0fe66d0decae3cf6b6c">CGeomCell::SetSuspendedSediment</a></div><div class="ttdeci">void SetSuspendedSediment(double const)</div><div class="ttdoc">Sets this cell's suspended sediment depth equivalent, it also increments the running total of suspend...</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00307">cell.cpp:307</a></div></div>
<div class="ttc" id="acme_8h_html_a1d0ecec0fe1a13e5a9aa4339656dca01"><div class="ttname"><a href="cme_8h.html#a1d0ecec0fe1a13e5a9aa4339656dca01">RTN_ERR_BOUNDING_BOX</a></div><div class="ttdeci">const int RTN_ERR_BOUNDING_BOX</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00415">cme.h:415</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_adf6945cbe65da7210a2f5d49ef7f736e"><div class="ttname"><a href="class_c_geom_cell.html#adf6945cbe65da7210a2f5d49ef7f736e">CGeomCell::bIsCoastline</a></div><div class="ttdeci">bool bIsCoastline(void) const</div><div class="ttdoc">Returns true if the cell is 'under' a coastline.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00176">cell.cpp:176</a></div></div>
<div class="ttc" id="aclass_c_geom_raster_grid_html_a6803b51c3b9d357eae0311108f0d6322"><div class="ttname"><a href="class_c_geom_raster_grid.html#a6803b51c3b9d357eae0311108f0d6322">CGeomRasterGrid::nCreateGrid</a></div><div class="ttdeci">int nCreateGrid(void)</div><div class="ttdef"><b>Definition:</b> <a href="raster__grid_8cpp_source.html#l00066">raster_grid.cpp:66</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_aac7e308b87a6ef39f1e56ad144a56c34"><div class="ttname"><a href="class_c_geom_cell.html#aac7e308b87a6ef39f1e56ad144a56c34">CGeomCell::dGetBasementElev</a></div><div class="ttdeci">double dGetBasementElev(void) const</div><div class="ttdoc">Returns this cell's basement elevation.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00280">cell.cpp:280</a></div></div>
<div class="ttc" id="acme_8h_html"><div class="ttname"><a href="cme_8h.html">cme.h</a></div><div class="ttdoc">This file contains global definitions for CoastalME.</div></div>
<div class="ttc" id="aclass_c_r_w_cell_layer_html_a30800b5cd971976ffec36381d4e54342"><div class="ttname"><a href="class_c_r_w_cell_layer.html#a30800b5cd971976ffec36381d4e54342">CRWCellLayer::pGetConsolidatedSediment</a></div><div class="ttdeci">CRWCellSediment * pGetConsolidatedSediment(void)</div><div class="ttdef"><b>Definition:</b> <a href="cell__layer_8cpp_source.html#l00041">cell_layer.cpp:41</a></div></div>
<div class="ttc" id="acme_8h_html_a3dc799a39c6db3768c193ca7ce89ca85"><div class="ttname"><a href="cme_8h.html#a3dc799a39c6db3768c193ca7ce89ca85">RASTER_TOTAL_POTENTIAL_PLATFORM_EROSION_NAME</a></div><div class="ttdeci">const string RASTER_TOTAL_POTENTIAL_PLATFORM_EROSION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00592">cme.h:592</a></div></div>
<div class="ttc" id="acme_8h_html_a371b8b6b82d6ba7043adeb0cda67e90c"><div class="ttname"><a href="cme_8h.html#a371b8b6b82d6ba7043adeb0cda67e90c">RASTER_SHADOW_ZONE_NAME</a></div><div class="ttdeci">const string RASTER_SHADOW_ZONE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00620">cme.h:620</a></div></div>
<div class="ttc" id="acme_8h_html_ac322659f9e30a244d1d312efead18f8d"><div class="ttname"><a href="cme_8h.html#ac322659f9e30a244d1d312efead18f8d">RASTER_PLOT_FINE_UNCONSOLIDATED_SEDIMENT</a></div><div class="ttdeci">const int RASTER_PLOT_FINE_UNCONSOLIDATED_SEDIMENT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00301">cme.h:301</a></div></div>
<div class="ttc" id="acme_8h_html_aca7fe7b55085f163a675eeef7b92efeb"><div class="ttname"><a href="cme_8h.html#aca7fe7b55085f163a675eeef7b92efeb">RASTER_SEA_DEPTH_NAME</a></div><div class="ttdeci">const string RASTER_SEA_DEPTH_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00579">cme.h:579</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a1d2e53161b9483dce3aaaf32d3287e51"><div class="ttname"><a href="class_c_geom_cell.html#a1d2e53161b9483dce3aaaf32d3287e51">CGeomCell::dGetDeepWaterWaveOrientation</a></div><div class="ttdeci">double dGetDeepWaterWaveOrientation(void) const</div><div class="ttdoc">Returns the deep water wave orientation on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00663">cell.cpp:663</a></div></div>
<div class="ttc" id="acme_8h_html_a22ebd484a319e66723d2d7b0826272ce"><div class="ttname"><a href="cme_8h.html#a22ebd484a319e66723d2d7b0826272ce">RASTER_RASTER_PLOT_POTENTIAL_PLATFORM_EROSION_MASK</a></div><div class="ttdeci">const int RASTER_RASTER_PLOT_POTENTIAL_PLATFORM_EROSION_MASK</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00331">cme.h:331</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_ad201e23ab4726d7c1825d873237ff368"><div class="ttname"><a href="class_c_geom_cell.html#ad201e23ab4726d7c1825d873237ff368">CGeomCell::dGetSuspendedSediment</a></div><div class="ttdeci">double dGetSuspendedSediment(void) const</div><div class="ttdoc">Returns the suspended sediment depth equivalent on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00315">cell.cpp:315</a></div></div>
<div class="ttc" id="acme_8h_html_a021773d2e5f1e6ab4798e6d889ccc4aa"><div class="ttname"><a href="cme_8h.html#a021773d2e5f1e6ab4798e6d889ccc4aa">RASTER_PLOT_CLIFF_COLLAPSE_DEPOSIT</a></div><div class="ttdeci">const int RASTER_PLOT_CLIFF_COLLAPSE_DEPOSIT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00293">cme.h:293</a></div></div>
<div class="ttc" id="acme_8h_html_a25cdc6f7e116371efcb8a36e94bcd9a2"><div class="ttname"><a href="cme_8h.html#a25cdc6f7e116371efcb8a36e94bcd9a2">RASTER_SEDIMENT_TOP_NAME</a></div><div class="ttdeci">const string RASTER_SEDIMENT_TOP_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00576">cme.h:576</a></div></div>
<div class="ttc" id="acme_8h_html_a6eda4b86a4c80d9fd8409617f50f76d9"><div class="ttname"><a href="cme_8h.html#a6eda4b86a4c80d9fd8409617f50f76d9">RASTER_POTENTIAL_BEACH_EROSION_NAME</a></div><div class="ttdeci">const string RASTER_POTENTIAL_BEACH_EROSION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00594">cme.h:594</a></div></div>
<div class="ttc" id="acme_8h_html_abd47e018300356f21d387582a09b0970"><div class="ttname"><a href="cme_8h.html#abd47e018300356f21d387582a09b0970">RASTER_INUNDATION_MASK_NAME</a></div><div class="ttdeci">const string RASTER_INUNDATION_MASK_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00581">cme.h:581</a></div></div>
<div class="ttc" id="acme_8h_html_adf0c5981d6b02e1cf030761683b5fbe2"><div class="ttname"><a href="cme_8h.html#adf0c5981d6b02e1cf030761683b5fbe2">RASTER_COAST_NORMAL_NAME</a></div><div class="ttdeci">const string RASTER_COAST_NORMAL_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00612">cme.h:612</a></div></div>
<div class="ttc" id="acme_8h_html_abc6829527cf1bf51872ac203a1cacbbb"><div class="ttname"><a href="cme_8h.html#abc6829527cf1bf51872ac203a1cacbbb">RASTER_PLOT_SEA_DEPTH</a></div><div class="ttdeci">const int RASTER_PLOT_SEA_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00316">cme.h:316</a></div></div>
<div class="ttc" id="acme_8h_html_ae4df3a3ef48ea99a0a883d14bc3db17f"><div class="ttname"><a href="cme_8h.html#ae4df3a3ef48ea99a0a883d14bc3db17f">RASTER_PLOT_ACTIVE_ZONE</a></div><div class="ttdeci">const int RASTER_PLOT_ACTIVE_ZONE</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00281">cme.h:281</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a3ed5f6905af39a9c8ca2527016301c7c"><div class="ttname"><a href="class_c_geom_cell.html#a3ed5f6905af39a9c8ca2527016301c7c">CGeomCell::dGetTotActualBeachErosion</a></div><div class="ttdeci">double dGetTotActualBeachErosion(void) const</div><div class="ttdoc">Get total actual (constrained) beach erosion.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00774">cell.cpp:774</a></div></div>
<div class="ttc" id="acme_8h_html_a75e3034741c1c76d21b02637f4e94b5f"><div class="ttname"><a href="cme_8h.html#a75e3034741c1c76d21b02637f4e94b5f">RASTER_PLOT_INTERVENTION_CLASS</a></div><div class="ttdeci">const int RASTER_PLOT_INTERVENTION_CLASS</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00302">cme.h:302</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_ab1edaa0b2009bddaf19f844ac7ea51bd"><div class="ttname"><a href="class_c_geom_cell.html#ab1edaa0b2009bddaf19f844ac7ea51bd">CGeomCell::dGetPotentialPlatformErosion</a></div><div class="ttdeci">double dGetPotentialPlatformErosion(void) const</div><div class="ttdoc">Get potential (unconstrained) shore platform erosion.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00533">cell.cpp:533</a></div></div>
<div class="ttc" id="acme_8h_html_a2aec8d719dbf65b81358b905831b9838"><div class="ttname"><a href="cme_8h.html#a2aec8d719dbf65b81358b905831b9838">RASTER_PLOT_BEACH_PROTECTION</a></div><div class="ttdeci">const int RASTER_PLOT_BEACH_PROTECTION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00291">cme.h:291</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_ad2c6f63894b9feea63d71d15932c0825"><div class="ttname"><a href="class_c_geom_cell.html#ad2c6f63894b9feea63d71d15932c0825">CGeomCell::bIsProfile</a></div><div class="ttdeci">bool bIsProfile(void) const</div><div class="ttdoc">Returns true if this cell is 'under' a coastline normal.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00195">cell.cpp:195</a></div></div>
<div class="ttc" id="acoast_8h_html"><div class="ttname"><a href="coast_8h.html">coast.h</a></div><div class="ttdoc">Contains CRWCoast definitions.</div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a7838933f10e6a21fe00645ecebeee230"><div class="ttname"><a href="class_c_geom_cell.html#a7838933f10e6a21fe00645ecebeee230">CGeomCell::dGetTotSeaDepth</a></div><div class="ttdeci">double dGetTotSeaDepth(void) const</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00301">cell.cpp:301</a></div></div>
<div class="ttc" id="acme_8h_html_a4eaf9fec7f1e5395f10ef1fa146b04e9"><div class="ttname"><a href="cme_8h.html#a4eaf9fec7f1e5395f10ef1fa146b04e9">RASTER_WAVE_ORIENTATION_NAME</a></div><div class="ttdeci">const string RASTER_WAVE_ORIENTATION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00584">cme.h:584</a></div></div>
<div class="ttc" id="aclass_c_r_w_cell_layer_html_a6ee086df697edf497ddb97fe2f4adf53"><div class="ttname"><a href="class_c_r_w_cell_layer.html#a6ee086df697edf497ddb97fe2f4adf53">CRWCellLayer::pGetUnconsolidatedSediment</a></div><div class="ttdeci">CRWCellSediment * pGetUnconsolidatedSediment(void)</div><div class="ttdef"><b>Definition:</b> <a href="cell__layer_8cpp_source.html#l00036">cell_layer.cpp:36</a></div></div>
<div class="ttc" id="acme_8h_html_a72dbd7c60cd70d5545aebd4770aefc78"><div class="ttname"><a href="cme_8h.html#a72dbd7c60cd70d5545aebd4770aefc78">RASTER_INTERVENTION_CLASS_NAME</a></div><div class="ttdeci">const string RASTER_INTERVENTION_CLASS_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00601">cme.h:601</a></div></div>
<div class="ttc" id="acme_8h_html_a3e05aff83053d3653d7d00bee44a7cee"><div class="ttname"><a href="cme_8h.html#a3e05aff83053d3653d7d00bee44a7cee">RASTER_PLOT_BEACH_MASK</a></div><div class="ttdeci">const int RASTER_PLOT_BEACH_MASK</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00290">cme.h:290</a></div></div>
<div class="ttc" id="acme_8h_html_af857787dcd2470e7c59bea05e37ea652"><div class="ttname"><a href="cme_8h.html#af857787dcd2470e7c59bea05e37ea652">RASTER_PLOT_LANDFORM</a></div><div class="ttdeci">const int RASTER_PLOT_LANDFORM</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00305">cme.h:305</a></div></div>
<div class="ttc" id="aclass_c_simulation_html_a222962121613613a48f518e0c2110f21"><div class="ttname"><a href="class_c_simulation.html#a222962121613613a48f518e0c2110f21">CSimulation::LogStream</a></div><div class="ttdeci">ofstream LogStream</div><div class="ttdef"><b>Definition:</b> <a href="simulation_8h_source.html#l00781">simulation.h:781</a></div></div>
<div class="ttc" id="acme_8h_html_a672dd53bf5b86eed58e61be4ae3d7e5b"><div class="ttname"><a href="cme_8h.html#a672dd53bf5b86eed58e61be4ae3d7e5b">RASTER_PLOT_LOCAL_SLOPE_OF_CONSOLIDATED_SEDIMENT</a></div><div class="ttdeci">const int RASTER_PLOT_LOCAL_SLOPE_OF_CONSOLIDATED_SEDIMENT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00306">cme.h:306</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a346fd9877708f8516c5af1824920fe2f"><div class="ttname"><a href="class_c_geom_cell.html#a346fd9877708f8516c5af1824920fe2f">CGeomCell::dGetTotBeachDeposition</a></div><div class="ttdeci">double dGetTotBeachDeposition(void) const</div><div class="ttdoc">Get beach erosion.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00800">cell.cpp:800</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_afeb0c69c9bd07a00ddbe3033deb6410f"><div class="ttname"><a href="class_c_geom_cell.html#afeb0c69c9bd07a00ddbe3033deb6410f">CGeomCell::dGetCliffCollapse</a></div><div class="ttdeci">double dGetCliffCollapse(void) const</div><div class="ttdoc">Returns the depth of this-timestep cliff collapse on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00710">cell.cpp:710</a></div></div>
<div class="ttc" id="acme_8h_html_a72c2ad13dfc9a030277d7669a1237f1a"><div class="ttname"><a href="cme_8h.html#a72c2ad13dfc9a030277d7669a1237f1a">RASTER_FINE_CONS_NAME</a></div><div class="ttdeci">const string RASTER_FINE_CONS_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00608">cme.h:608</a></div></div>
<div class="ttc" id="acme_8h_html_a1a0a2ca98a313f586fbb6ad92f438d6a"><div class="ttname"><a href="cme_8h.html#a1a0a2ca98a313f586fbb6ad92f438d6a">RASTER_PLOT_BEACH_DEPOSITION</a></div><div class="ttdeci">const int RASTER_PLOT_BEACH_DEPOSITION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00289">cme.h:289</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a28e4da4eaaa83edff8102e5e78b4d6be"><div class="ttname"><a href="class_c_geom_cell.html#a28e4da4eaaa83edff8102e5e78b4d6be">CGeomCell::SetDeepWaterWavePeriod</a></div><div class="ttdeci">void SetDeepWaterWavePeriod(double const)</div><div class="ttdoc">Sets the deep water wave Period on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00669">cell.cpp:669</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a9a5321cb6c2accfb287f60f7ca1011cd"><div class="ttname"><a href="class_c_geom_cell.html#a9a5321cb6c2accfb287f60f7ca1011cd">CGeomCell::nGetDownDriftZoneNumber</a></div><div class="ttdeci">int nGetDownDriftZoneNumber(void) const</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00247">cell.cpp:247</a></div></div>
<div class="ttc" id="acme_8h_html_aef37e985d9616ca4d35d41e0266fe88d"><div class="ttname"><a href="cme_8h.html#aef37e985d9616ca4d35d41e0266fe88d">RASTER_PLOT_INTERVENTION_HEIGHT</a></div><div class="ttdeci">const int RASTER_PLOT_INTERVENTION_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00303">cme.h:303</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a585c23948156db68c888874f27bab13d"><div class="ttname"><a href="class_c_geom_cell.html#a585c23948156db68c888874f27bab13d">CGeomCell::dGetBeachProtectionFactor</a></div><div class="ttdeci">double dGetBeachProtectionFactor(void) const</div><div class="ttdoc">Returns this cell's beach protection factor.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00696">cell.cpp:696</a></div></div>
<div class="ttc" id="acme_8h_html_ac5c35a815b6c4bd60d6e8df3534675b2"><div class="ttname"><a href="cme_8h.html#ac5c35a815b6c4bd60d6e8df3534675b2">RASTER_TOTAL_ACTUAL_BEACH_EROSION_NAME</a></div><div class="ttdeci">const string RASTER_TOTAL_ACTUAL_BEACH_EROSION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00597">cme.h:597</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_aec408a18eeffd11484779022733cd396"><div class="ttname"><a href="class_c_geom_cell.html#aec408a18eeffd11484779022733cd396">CGeomCell::bBasementElevIsMissingValue</a></div><div class="ttdeci">bool bBasementElevIsMissingValue(void) const</div><div class="ttdoc">Returns true if this cells's basement data is NODATA, is needed for irregularly-shaped DEMs.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00286">cell.cpp:286</a></div></div>
<div class="ttc" id="acme_8h_html_aa33aeb7a6ac78ff05872d5b4760c3769"><div class="ttname"><a href="cme_8h.html#aa33aeb7a6ac78ff05872d5b4760c3769">RASTER_AVG_SEA_DEPTH_NAME</a></div><div class="ttdeci">const string RASTER_AVG_SEA_DEPTH_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00580">cme.h:580</a></div></div>
<div class="ttc" id="aclass_c_r_w_cell_layer_html_a968b7fbdc65a6e0a230ce25e9a59e129"><div class="ttname"><a href="class_c_r_w_cell_layer.html#a968b7fbdc65a6e0a230ce25e9a59e129">CRWCellLayer::dGetUnconsolidatedThickness</a></div><div class="ttdeci">double dGetUnconsolidatedThickness(void) const</div><div class="ttdef"><b>Definition:</b> <a href="cell__layer_8cpp_source.html#l00084">cell_layer.cpp:84</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_ad03f0af5de19150fad5383f2e147c55e"><div class="ttname"><a href="class_c_geom_cell.html#ad03f0af5de19150fad5383f2e147c55e">CGeomCell::dGetDeepWaterWavePeriod</a></div><div class="ttdeci">double dGetDeepWaterWavePeriod(void) const</div><div class="ttdoc">Returns the deep water wave period on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00675">cell.cpp:675</a></div></div>
<div class="ttc" id="acme_8h_html_abb3aac718fc9bc736182cd5c39535c5e"><div class="ttname"><a href="cme_8h.html#abb3aac718fc9bc736182cd5c39535c5e">MAX_SAVE_DIGITS</a></div><div class="ttdeci">const int MAX_SAVE_DIGITS</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00164">cme.h:164</a></div></div>
<div class="ttc" id="acme_8h_html_ad35ece7d5fdc7cd6ba36e6742086c376"><div class="ttname"><a href="cme_8h.html#ad35ece7d5fdc7cd6ba36e6742086c376">RASTER_SUSP_SED_NAME</a></div><div class="ttdeci">const string RASTER_SUSP_SED_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00603">cme.h:603</a></div></div>
<div class="ttc" id="acme_8h_html_ad9330c8c0f786aa948f0e4a9db38ee21"><div class="ttname"><a href="cme_8h.html#ad9330c8c0f786aa948f0e4a9db38ee21">RASTER_PLOT_POLYGON_GAIN_OR_LOSS</a></div><div class="ttdeci">const int RASTER_PLOT_POLYGON_GAIN_OR_LOSS</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00310">cme.h:310</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a9afd0ac74169a81629bcbaa402be3009"><div class="ttname"><a href="class_c_geom_cell.html#a9afd0ac74169a81629bcbaa402be3009">CGeomCell::dGetDeepWaterWaveHeight</a></div><div class="ttdeci">double dGetDeepWaterWaveHeight(void) const</div><div class="ttdoc">Returns the deep water wave height on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00651">cell.cpp:651</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a0f90ba92de6a8588cf8db4eba1dd870c"><div class="ttname"><a href="class_c_geom_cell.html#a0f90ba92de6a8588cf8db4eba1dd870c">CGeomCell::dGetTotPotentialPlatformErosion</a></div><div class="ttdeci">double dGetTotPotentialPlatformErosion(void) const</div><div class="ttdoc">Get total potential (unconstrained) shore platform erosion.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00539">cell.cpp:539</a></div></div>
<div class="ttc" id="acme_8h_html_a0eb34e2381f73f477cb20e752cc513e2"><div class="ttname"><a href="cme_8h.html#a0eb34e2381f73f477cb20e752cc513e2">RASTER_POTENTIAL_PLATFORM_EROSION_NAME</a></div><div class="ttdeci">const string RASTER_POTENTIAL_PLATFORM_EROSION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00590">cme.h:590</a></div></div>
<div class="ttc" id="aclass_c_r_w_cell_sediment_html_a7f2edac8db7d8e47ec400f4b06efd1a5"><div class="ttname"><a href="class_c_r_w_cell_sediment.html#a7f2edac8db7d8e47ec400f4b06efd1a5">CRWCellSediment::dGetCoarse</a></div><div class="ttdeci">double dGetCoarse(void) const</div><div class="ttdef"><b>Definition:</b> <a href="cell__sediment_8cpp_source.html#l00102">cell_sediment.cpp:102</a></div></div>
<div class="ttc" id="acme_8h_html_a51eaf5dac80ca22157d491b3b8559445"><div class="ttname"><a href="cme_8h.html#a51eaf5dac80ca22157d491b3b8559445">INTERVENTION_CLASS_RASTER</a></div><div class="ttdeci">const int INTERVENTION_CLASS_RASTER</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00256">cme.h:256</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a32201f2e72a5b809ee886974883aa6e9"><div class="ttname"><a href="class_c_geom_cell.html#a32201f2e72a5b809ee886974883aa6e9">CGeomCell::dGetTotWaveOrientation</a></div><div class="ttdeci">double dGetTotWaveOrientation(void) const</div><div class="ttdoc">Returns the total wave orientation on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00639">cell.cpp:639</a></div></div>
<div class="ttc" id="acme_8h_html_ac15d87c6e225137f88534265bd636518"><div class="ttname"><a href="cme_8h.html#ac15d87c6e225137f88534265bd636518">RASTER_PLOT_SUSPENDED_SEDIMENT</a></div><div class="ttdeci">const int RASTER_PLOT_SUSPENDED_SEDIMENT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00321">cme.h:321</a></div></div>
<div class="ttc" id="acme_8h_html_a5f37dce2db187aec350ecae5cc2c2fc1"><div class="ttname"><a href="cme_8h.html#a5f37dce2db187aec350ecae5cc2c2fc1">RASTER_TOP_NAME</a></div><div class="ttdeci">const string RASTER_TOP_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00577">cme.h:577</a></div></div>
<div class="ttc" id="acme_8h_html_a16379f7ac89e701557c92d6383161664"><div class="ttname"><a href="cme_8h.html#a16379f7ac89e701557c92d6383161664">FINE_CONS_RASTER</a></div><div class="ttdeci">const int FINE_CONS_RASTER</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00248">cme.h:248</a></div></div>
<div class="ttc" id="aclass_c_r_w_cell_sediment_html_a55ec8f411beef4c724da8da17f9532b1"><div class="ttname"><a href="class_c_r_w_cell_sediment.html#a55ec8f411beef4c724da8da17f9532b1">CRWCellSediment::dGetSand</a></div><div class="ttdeci">double dGetSand(void) const</div><div class="ttdef"><b>Definition:</b> <a href="cell__sediment_8cpp_source.html#l00089">cell_sediment.cpp:89</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a04a281c46cc4a7741193d14b1ee81954"><div class="ttname"><a href="class_c_geom_cell.html#a04a281c46cc4a7741193d14b1ee81954">CGeomCell::dGetTotWaveHeight</a></div><div class="ttdeci">double dGetTotWaveHeight(void) const</div><div class="ttdoc">Returns the total wave height on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00620">cell.cpp:620</a></div></div>
<div class="ttc" id="acme_8h_html_acb5af8424727c3c9cb820749daa0990d"><div class="ttname"><a href="cme_8h.html#acb5af8424727c3c9cb820749daa0990d">COARSE_UNCONS_RASTER</a></div><div class="ttdeci">const int COARSE_UNCONS_RASTER</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00253">cme.h:253</a></div></div>
<div class="ttc" id="acme_8h_html_a1a42efde04da182a5f8476cca78563a7"><div class="ttname"><a href="cme_8h.html#a1a42efde04da182a5f8476cca78563a7">RASTER_COARSE_UNCONS_NAME</a></div><div class="ttdeci">const string RASTER_COARSE_UNCONS_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00607">cme.h:607</a></div></div>
<div class="ttc" id="acme_8h_html_a66170b7d62fe302bc7bdf529b09eca15"><div class="ttname"><a href="cme_8h.html#a66170b7d62fe302bc7bdf529b09eca15">RASTER_AVG_WAVE_ORIENTATION_NAME</a></div><div class="ttdeci">const string RASTER_AVG_WAVE_ORIENTATION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00586">cme.h:586</a></div></div>
<div class="ttc" id="acme_8h_html_a60f4ba6a7dd0ab10a4299859aaf2425a"><div class="ttname"><a href="cme_8h.html#a60f4ba6a7dd0ab10a4299859aaf2425a">RASTER_PLOT_SHADOW_ZONE</a></div><div class="ttdeci">const int RASTER_PLOT_SHADOW_ZONE</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00319">cme.h:319</a></div></div>
<div class="ttc" id="acme_8h_html_af132a16851a356e5261344db86611995"><div class="ttname"><a href="cme_8h.html#af132a16851a356e5261344db86611995">SAND_UNCONS_RASTER</a></div><div class="ttdeci">const int SAND_UNCONS_RASTER</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00252">cme.h:252</a></div></div>
<div class="ttc" id="acme_8h_html_a99f3a29ec5374ab36004bc828dbbcd06"><div class="ttname"><a href="cme_8h.html#a99f3a29ec5374ab36004bc828dbbcd06">RASTER_PLOT_FINE_CONSOLIDATED_SEDIMENT</a></div><div class="ttdeci">const int RASTER_PLOT_FINE_CONSOLIDATED_SEDIMENT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00300">cme.h:300</a></div></div>
<div class="ttc" id="acme_8h_html_aa5969c5b17a9d72b077efdfd1addcca8"><div class="ttname"><a href="cme_8h.html#aa5969c5b17a9d72b077efdfd1addcca8">NORTH</a></div><div class="ttdeci">const int NORTH</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00188">cme.h:188</a></div></div>
<div class="ttc" id="acme_8h_html_a2277cf993b74c257ea8c8092e7ba930d"><div class="ttname"><a href="cme_8h.html#a2277cf993b74c257ea8c8092e7ba930d">RASTER_PLOT_OVERALL_TOP_ELEVATION</a></div><div class="ttdeci">const int RASTER_PLOT_OVERALL_TOP_ELEVATION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00308">cme.h:308</a></div></div>
<div class="ttc" id="acme_8h_html_a89a262f720146fefb0962bb719ff854d"><div class="ttname"><a href="cme_8h.html#a89a262f720146fefb0962bb719ff854d">RASTER_CLIFF_COLLAPSE_NAME</a></div><div class="ttdeci">const string RASTER_CLIFF_COLLAPSE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00614">cme.h:614</a></div></div>
<div class="ttc" id="acme_8h_html_a71d8d6db0e41ed2022d0a95b9a70528c"><div class="ttname"><a href="cme_8h.html#a71d8d6db0e41ed2022d0a95b9a70528c">RTN_OK</a></div><div class="ttdeci">const int RTN_OK</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00351">cme.h:351</a></div></div>
<div class="ttc" id="acme_8h_html_a136a4b377b34d962ede27dc9228e5a23"><div class="ttname"><a href="cme_8h.html#a136a4b377b34d962ede27dc9228e5a23">RASTER_PLOT_SHADOW_DOWNDRIFT_ZONE</a></div><div class="ttdeci">const int RASTER_PLOT_SHADOW_DOWNDRIFT_ZONE</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00318">cme.h:318</a></div></div>
<div class="ttc" id="acme_8h_html_aefc63c4bde02ca170b0e7bd038ba7702"><div class="ttname"><a href="cme_8h.html#aefc63c4bde02ca170b0e7bd038ba7702">WARN</a></div><div class="ttdeci">const string WARN</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00538">cme.h:538</a></div></div>
<div class="ttc" id="acme_8h_html_a915bca276bfa72e37eca91e05f4d1656"><div class="ttname"><a href="cme_8h.html#a915bca276bfa72e37eca91e05f4d1656">LF_CAT_CLIFF</a></div><div class="ttdeci">const int LF_CAT_CLIFF</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00228">cme.h:228</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a973cb88b3e5ea38e02c0a5604fdbad39"><div class="ttname"><a href="class_c_geom_cell.html#a973cb88b3e5ea38e02c0a5604fdbad39">CGeomCell::dGetTotCliffCollapseDeposition</a></div><div class="ttdeci">double dGetTotCliffCollapseDeposition(void) const</div><div class="ttdoc">Returns the total depth of cliff deposition collapse on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00735">cell.cpp:735</a></div></div>
<div class="ttc" id="acme_8h_html_ab794dca35f7c7a464ff52caa887e4043"><div class="ttname"><a href="cme_8h.html#ab794dca35f7c7a464ff52caa887e4043">RASTER_PLOT_AVG_SUSPENDED_SEDIMENT</a></div><div class="ttdeci">const int RASTER_PLOT_AVG_SUSPENDED_SEDIMENT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00285">cme.h:285</a></div></div>
<div class="ttc" id="acme_8h_html_ab0094f1ece3facf8eb8afd210a7a7835"><div class="ttname"><a href="cme_8h.html#ab0094f1ece3facf8eb8afd210a7a7835">ERR</a></div><div class="ttdeci">const string ERR</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00537">cme.h:537</a></div></div>
<div class="ttc" id="acme_8h_html_af9b7330a34df52af39ad3c36df236549"><div class="ttname"><a href="cme_8h.html#af9b7330a34df52af39ad3c36df236549">RASTER_PLOT_POLYGON_UPDRIFT_OR_DOWNDRIFT</a></div><div class="ttdeci">const int RASTER_PLOT_POLYGON_UPDRIFT_OR_DOWNDRIFT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00311">cme.h:311</a></div></div>
<div class="ttc" id="acme_8h_html_a739b039f26da70a4bf29bfeb924fc6cf"><div class="ttname"><a href="cme_8h.html#a739b039f26da70a4bf29bfeb924fc6cf">RASTER_SLICE_NAME</a></div><div class="ttdeci">const string RASTER_SLICE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00619">cme.h:619</a></div></div>
<div class="ttc" id="acme_8h_html_a080e5afff16e34842b069fbfc6896aee"><div class="ttname"><a href="cme_8h.html#a080e5afff16e34842b069fbfc6896aee">RASTER_AVG_SUSP_SED_NAME</a></div><div class="ttdeci">const string RASTER_AVG_SUSP_SED_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00604">cme.h:604</a></div></div>
<div class="ttc" id="acme_8h_html_a6de45bfc6d2b54aee0ad03e3a079b98b"><div class="ttname"><a href="cme_8h.html#a6de45bfc6d2b54aee0ad03e3a079b98b">RASTER_ACTUAL_PLATFORM_EROSION_NAME</a></div><div class="ttdeci">const string RASTER_ACTUAL_PLATFORM_EROSION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00591">cme.h:591</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a28962b8e41e82c7488373df1acec4bf2"><div class="ttname"><a href="class_c_geom_cell.html#a28962b8e41e82c7488373df1acec4bf2">CGeomCell::dGetPotentialBeachErosion</a></div><div class="ttdeci">double dGetPotentialBeachErosion(void) const</div><div class="ttdoc">Get potential (unconstrained) beach erosion.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00749">cell.cpp:749</a></div></div>
<div class="ttc" id="acme_8h_html_a7117e6c0fbd50abe823d2cf7dda75684"><div class="ttname"><a href="cme_8h.html#a7117e6c0fbd50abe823d2cf7dda75684">RASTER_TOTAL_ACTUAL_PLATFORM_EROSION_NAME</a></div><div class="ttdeci">const string RASTER_TOTAL_ACTUAL_PLATFORM_EROSION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00593">cme.h:593</a></div></div>
<div class="ttc" id="acme_8h_html_a2ba54e759a1c46bcd2d84fd2bf623404"><div class="ttname"><a href="cme_8h.html#a2ba54e759a1c46bcd2d84fd2bf623404">RASTER_TOTAL_CLIFF_COLLAPSE_NAME</a></div><div class="ttdeci">const string RASTER_TOTAL_CLIFF_COLLAPSE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00615">cme.h:615</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a276957ed359ece9bc6be3cbbfbfbc693"><div class="ttname"><a href="class_c_geom_cell.html#a276957ed359ece9bc6be3cbbfbfbc693">CGeomCell::dGetTotPotentialBeachErosion</a></div><div class="ttdeci">double dGetTotPotentialBeachErosion(void) const</div><div class="ttdoc">Get total potential (unconstrained) beach erosion.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00755">cell.cpp:755</a></div></div>
<div class="ttc" id="acme_8h_html_a463ef414076dd24d9bcad73c847a7401"><div class="ttname"><a href="cme_8h.html#a463ef414076dd24d9bcad73c847a7401">RASTER_PLOT_COARSE_CONSOLIDATED_SEDIMENT</a></div><div class="ttdeci">const int RASTER_PLOT_COARSE_CONSOLIDATED_SEDIMENT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00294">cme.h:294</a></div></div>
<div class="ttc" id="acme_8h_html_aa82e93c7fb38b9eaf57b10f94cdd9c3e"><div class="ttname"><a href="cme_8h.html#aa82e93c7fb38b9eaf57b10f94cdd9c3e">RASTER_ACTUAL_BEACH_EROSION_NAME</a></div><div class="ttdeci">const string RASTER_ACTUAL_BEACH_EROSION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00595">cme.h:595</a></div></div>
<div class="ttc" id="aclass_c_r_w_cell_sediment_html_a930fdd5219ba9971cdbd256e1d5cc62a"><div class="ttname"><a href="class_c_r_w_cell_sediment.html#a930fdd5219ba9971cdbd256e1d5cc62a">CRWCellSediment::SetCoarse</a></div><div class="ttdeci">void SetCoarse(double const)</div><div class="ttdef"><b>Definition:</b> <a href="cell__sediment_8cpp_source.html#l00096">cell_sediment.cpp:96</a></div></div>
<div class="ttc" id="acme_8h_html_a516844746927d29473ab56b7b3dc58f6"><div class="ttname"><a href="cme_8h.html#a516844746927d29473ab56b7b3dc58f6">RASTER_POTENTIAL_PLATFORM_EROSION_MASK_NAME</a></div><div class="ttdeci">const string RASTER_POTENTIAL_PLATFORM_EROSION_MASK_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00589">cme.h:589</a></div></div>
<div class="ttc" id="acme_8h_html_a7e58a8bcaedcb87e1fdd169edd6105a8"><div class="ttname"><a href="cme_8h.html#a7e58a8bcaedcb87e1fdd169edd6105a8">WEST</a></div><div class="ttdeci">const int WEST</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00194">cme.h:194</a></div></div>
<div class="ttc" id="acme_8h_html_a7fc9f90339b07df70be85c384ec25292"><div class="ttname"><a href="cme_8h.html#a7fc9f90339b07df70be85c384ec25292">RASTER_PLOT_WAVE_ORIENTATION</a></div><div class="ttdeci">const int RASTER_PLOT_WAVE_ORIENTATION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00330">cme.h:330</a></div></div>
<div class="ttc" id="acme_8h_html_a815768a387b9852821a70d724f245abb"><div class="ttname"><a href="cme_8h.html#a815768a387b9852821a70d724f245abb">RASTER_PLOT_TOTAL_CLIFF_COLLAPSE</a></div><div class="ttdeci">const int RASTER_PLOT_TOTAL_CLIFF_COLLAPSE</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00325">cme.h:325</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a206e79e2d10e831a8464079870bd547b"><div class="ttname"><a href="class_c_geom_cell.html#a206e79e2d10e831a8464079870bd547b">CGeomCell::nGetShadowZoneNumber</a></div><div class="ttdeci">int nGetShadowZoneNumber(void) const</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00221">cell.cpp:221</a></div></div>
<div class="ttc" id="acme_8h_html_aedf845f9a0a475fbbdacc4d360830061"><div class="ttname"><a href="cme_8h.html#aedf845f9a0a475fbbdacc4d360830061">RASTER_BEACH_MASK_NAME</a></div><div class="ttdeci">const string RASTER_BEACH_MASK_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00587">cme.h:587</a></div></div>
<div class="ttc" id="acme_8h_html_a5c5fdf72f50d6476873bb2cff715f22c"><div class="ttname"><a href="cme_8h.html#a5c5fdf72f50d6476873bb2cff715f22c">RASTER_PLOT_POTENTIAL_BEACH_EROSION</a></div><div class="ttdeci">const int RASTER_PLOT_POTENTIAL_BEACH_EROSION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00312">cme.h:312</a></div></div>
<div class="ttc" id="acme_8h_html_a06194c6c8d366696c4ec6462f7115d9e"><div class="ttname"><a href="cme_8h.html#a06194c6c8d366696c4ec6462f7115d9e">RASTER_PLOT_ACTUAL_BEACH_EROSION</a></div><div class="ttdeci">const int RASTER_PLOT_ACTUAL_BEACH_EROSION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00282">cme.h:282</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a65dc08df7cf712555b94d91157431965"><div class="ttname"><a href="class_c_geom_cell.html#a65dc08df7cf712555b94d91157431965">CGeomCell::pGetLayerAboveBasement</a></div><div class="ttdeci">CRWCellLayer * pGetLayerAboveBasement(int const)</div><div class="ttdoc">Return a reference to the Nth sediment layer (layer 0 being just above basement)</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00369">cell.cpp:369</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_af1321d6f96845f7933e6d7167267ed41"><div class="ttname"><a href="class_c_geom_cell.html#af1321d6f96845f7933e6d7167267ed41">CGeomCell::pGetLandform</a></div><div class="ttdeci">CRWCellLandform * pGetLandform(void)</div><div class="ttdoc">Returns a pointer to this cell's CRWCellLandform object.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00254">cell.cpp:254</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a8ca77a88453bdc1637fd128596c42a53"><div class="ttname"><a href="class_c_geom_cell.html#a8ca77a88453bdc1637fd128596c42a53">CGeomCell::dGetLocalConsSlope</a></div><div class="ttdeci">double dGetLocalConsSlope(void) const</div><div class="ttdoc">Returns the local slope of the consolidated sediment only.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00267">cell.cpp:267</a></div></div>
<div class="ttc" id="aclass_c_r_w_cell_sediment_html_a7b908b50af702464be628e8b96c54542"><div class="ttname"><a href="class_c_r_w_cell_sediment.html#a7b908b50af702464be628e8b96c54542">CRWCellSediment::dGetFine</a></div><div class="ttdeci">double dGetFine(void) const</div><div class="ttdef"><b>Definition:</b> <a href="cell__sediment_8cpp_source.html#l00075">cell_sediment.cpp:75</a></div></div>
<div class="ttc" id="acme_8h_html_a59123483b5c7cb88ece24246ae3cd4b9"><div class="ttname"><a href="cme_8h.html#a59123483b5c7cb88ece24246ae3cd4b9">NOTE</a></div><div class="ttdeci">const string NOTE</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00539">cme.h:539</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a73f4d48988ff9eabf9b8f0303532ff25"><div class="ttname"><a href="class_c_geom_cell.html#a73f4d48988ff9eabf9b8f0303532ff25">CGeomCell::nGetInterventionClass</a></div><div class="ttdeci">int nGetInterventionClass(void) const</div><div class="ttdoc">Gets the intervention class.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00843">cell.cpp:843</a></div></div>
<div class="ttc" id="acme_8h_html_a0af645632c2a0ed2ca69baba0a5efb85"><div class="ttname"><a href="cme_8h.html#a0af645632c2a0ed2ca69baba0a5efb85">RASTER_SHADOW_DOWNDRIFT_ZONE_NAME</a></div><div class="ttdeci">const string RASTER_SHADOW_DOWNDRIFT_ZONE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00621">cme.h:621</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a5362f71ffeb7ec2f3f0caaf2028caf7f"><div class="ttname"><a href="class_c_geom_cell.html#a5362f71ffeb7ec2f3f0caaf2028caf7f">CGeomCell::dGetBeachDeposition</a></div><div class="ttdeci">double dGetBeachDeposition(void) const</div><div class="ttdoc">Get beach deposition.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00794">cell.cpp:794</a></div></div>
<div class="ttc" id="acme_8h_html_a003f2aab60637a01b542dadef2865dad"><div class="ttname"><a href="cme_8h.html#a003f2aab60637a01b542dadef2865dad">RASTER_COAST_NAME</a></div><div class="ttdeci">const string RASTER_COAST_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00611">cme.h:611</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a43434d6fd45da697ae17f7b274ba9a83"><div class="ttname"><a href="class_c_geom_cell.html#a43434d6fd45da697ae17f7b274ba9a83">CGeomCell::nGetTopNonZeroLayerAboveBasement</a></div><div class="ttdeci">int nGetTopNonZeroLayerAboveBasement(void) const</div><div class="ttdoc">Returns the index of the topmost sediment layer (layer 0 being the one just above basement) with non-...</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00326">cell.cpp:326</a></div></div>
<div class="ttc" id="acme_8h_html_a1cc065c23d727dd90b73dcf54f287044"><div class="ttname"><a href="cme_8h.html#a1cc065c23d727dd90b73dcf54f287044">RASTER_CLIFF_COLLAPSE_DEPOSITION_NAME</a></div><div class="ttdeci">const string RASTER_CLIFF_COLLAPSE_DEPOSITION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00616">cme.h:616</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a69209949cee640c398dd2f582e02c063"><div class="ttname"><a href="class_c_geom_cell.html#a69209949cee640c398dd2f582e02c063">CGeomCell::SetInterventionHeight</a></div><div class="ttdeci">void SetInterventionHeight(double const)</div><div class="ttdoc">Sets the intervention height.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00859">cell.cpp:859</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a2ba1dc4bd910c2659950417a45116ff8"><div class="ttname"><a href="class_c_geom_cell.html#a2ba1dc4bd910c2659950417a45116ff8">CGeomCell::SetDeepWaterWaveOrientation</a></div><div class="ttdeci">void SetDeepWaterWaveOrientation(double const)</div><div class="ttdoc">Sets the deep water wave orientation on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00657">cell.cpp:657</a></div></div>
<div class="ttc" id="acme_8h_html_ad3dedce2670687cd14ff0d060d0d8029"><div class="ttname"><a href="cme_8h.html#ad3dedce2670687cd14ff0d060d0d8029">RASTER_PLOT_TOTAL_POTENTIAL_PLATFORM_EROSION</a></div><div class="ttdeci">const int RASTER_PLOT_TOTAL_POTENTIAL_PLATFORM_EROSION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00328">cme.h:328</a></div></div>
<div class="ttc" id="acme_8h_html_abc007faf9a7b5860c373322495f11695"><div class="ttname"><a href="cme_8h.html#abc007faf9a7b5860c373322495f11695">RASTER_PLOT_ACTUAL_PLATFORM_EROSION</a></div><div class="ttdeci">const int RASTER_PLOT_ACTUAL_PLATFORM_EROSION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00283">cme.h:283</a></div></div>
<div class="ttc" id="acme_8h_html_a982608de9e45c4018046a236dd224c5d"><div class="ttname"><a href="cme_8h.html#a982608de9e45c4018046a236dd224c5d">RASTER_PLOT_COARSE_UNCONSOLIDATED_SEDIMENT</a></div><div class="ttdeci">const int RASTER_PLOT_COARSE_UNCONSOLIDATED_SEDIMENT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00295">cme.h:295</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a930df09c981e96fa470aed2222f897cd"><div class="ttname"><a href="class_c_geom_cell.html#a930df09c981e96fa470aed2222f897cd">CGeomCell::SetBoundingBoxEdge</a></div><div class="ttdeci">void SetBoundingBoxEdge(int const)</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00081">cell.cpp:81</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a6b223926c59f56f909acd3732655750c"><div class="ttname"><a href="class_c_geom_cell.html#a6b223926c59f56f909acd3732655750c">CGeomCell::dGetSedimentPlusInterventionTopElev</a></div><div class="ttdeci">double dGetSedimentPlusInterventionTopElev(void) const</div><div class="ttdoc">Returns the true elevation of the sediment's top surface for this cell (if there is a cliff notch,...</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00395">cell.cpp:395</a></div></div>
<div class="ttc" id="acme_8h_html_aa88580f5300c65eb435b6eb476be7b25"><div class="ttname"><a href="cme_8h.html#aa88580f5300c65eb435b6eb476be7b25">RASTER_PLOT_CLIFF_COLLAPSE</a></div><div class="ttdeci">const int RASTER_PLOT_CLIFF_COLLAPSE</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00292">cme.h:292</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_ab238474f8288f78ac19bffcaaea8b8c1"><div class="ttname"><a href="class_c_geom_cell.html#ab238474f8288f78ac19bffcaaea8b8c1">CGeomCell::dGetTotSuspendedSediment</a></div><div class="ttdeci">double dGetTotSuspendedSediment(void) const</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00320">cell.cpp:320</a></div></div>
<div class="ttc" id="acme_8h_html_a17fc6856269e4a3decd1c9c9230f2aed"><div class="ttname"><a href="cme_8h.html#a17fc6856269e4a3decd1c9c9230f2aed">RASTER_PLOT_TOTAL_ACTUAL_BEACH_EROSION</a></div><div class="ttdeci">const int RASTER_PLOT_TOTAL_ACTUAL_BEACH_EROSION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00322">cme.h:322</a></div></div>
<div class="ttc" id="acme_8h_html_ab710943b3b1fb290df8a377040de845e"><div class="ttname"><a href="cme_8h.html#ab710943b3b1fb290df8a377040de845e">COARSE_CONS_RASTER</a></div><div class="ttdeci">const int COARSE_CONS_RASTER</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00250">cme.h:250</a></div></div>
<div class="ttc" id="acme_8h_html_a30fc51de93015d5aa9e6bab59786f692"><div class="ttname"><a href="cme_8h.html#a30fc51de93015d5aa9e6bab59786f692">RASTER_TOTAL_BEACH_DEPOSITION_NAME</a></div><div class="ttdeci">const string RASTER_TOTAL_BEACH_DEPOSITION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00599">cme.h:599</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a622387009a4fcb864bfdab627389ea84"><div class="ttname"><a href="class_c_geom_cell.html#a622387009a4fcb864bfdab627389ea84">CGeomCell::nGetPolygonID</a></div><div class="ttdeci">int nGetPolygonID(void) const</div><div class="ttdoc">Returns the global ID number of the polygon which 'contains' this cell (returns INT_NODATA if the cel...</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00210">cell.cpp:210</a></div></div>
<div class="ttc" id="acme_8h_html_a2ed3fa8bab073af965cb90a47c2fc972"><div class="ttname"><a href="cme_8h.html#a2ed3fa8bab073af965cb90a47c2fc972">RASTER_PLOT_BASEMENT_ELEVATION</a></div><div class="ttdeci">const int RASTER_PLOT_BASEMENT_ELEVATION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00288">cme.h:288</a></div></div>
<div class="ttc" id="acme_8h_html_a31399faf0a31eb32589134eefe26eec8"><div class="ttname"><a href="cme_8h.html#a31399faf0a31eb32589134eefe26eec8">RASTER_PLOT_DEEP_WATER_WAVE_PERIOD</a></div><div class="ttdeci">const int RASTER_PLOT_DEEP_WATER_WAVE_PERIOD</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00299">cme.h:299</a></div></div>
<div class="ttc" id="acme_8h_html_a1a3fe6f9e4396cfe9d9a506dbd5c3c42"><div class="ttname"><a href="cme_8h.html#a1a3fe6f9e4396cfe9d9a506dbd5c3c42">SUSP_SED_RASTER</a></div><div class="ttdeci">const int SUSP_SED_RASTER</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00254">cme.h:254</a></div></div>
<div class="ttc" id="acme_8h_html_aebffe280988bf2cb101d2996bd2c4c6b"><div class="ttname"><a href="cme_8h.html#aebffe280988bf2cb101d2996bd2c4c6b">RASTER_PLOT_INUNDATION_MASK</a></div><div class="ttdeci">const int RASTER_PLOT_INUNDATION_MASK</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00304">cme.h:304</a></div></div>
<div class="ttc" id="autils__global_8cpp_html_a20842d0a19d0ca952c91f3e1eb175fee"><div class="ttname"><a href="utils__global_8cpp.html#a20842d0a19d0ca952c91f3e1eb175fee">nRound</a></div><div class="ttdeci">int nRound(double const d)</div><div class="ttdef"><b>Definition:</b> <a href="utils__global_8cpp_source.html#l00054">utils_global.cpp:54</a></div></div>
<div class="ttc" id="acme_8h_html_aad67ad112b8e219d82e9c49f5491a747"><div class="ttname"><a href="cme_8h.html#aad67ad112b8e219d82e9c49f5491a747">RASTER_PLOT_AVG_WAVE_ORIENTATION</a></div><div class="ttdeci">const int RASTER_PLOT_AVG_WAVE_ORIENTATION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00287">cme.h:287</a></div></div>
<div class="ttc" id="aclass_c_r_w_cell_landform_html_a5350a7ac48d1eef3a78bef9bcf041b45"><div class="ttname"><a href="class_c_r_w_cell_landform.html#a5350a7ac48d1eef3a78bef9bcf041b45">CRWCellLandform::nGetLFCategory</a></div><div class="ttdeci">int nGetLFCategory(void) const</div><div class="ttdoc">Get the landform category.</div><div class="ttdef"><b>Definition:</b> <a href="cell__landform_8cpp_source.html#l00050">cell_landform.cpp:50</a></div></div>
<div class="ttc" id="acme_8h_html_a3d4f05c2273726d38927a598802b222b"><div class="ttname"><a href="cme_8h.html#a3d4f05c2273726d38927a598802b222b">RASTER_PLOT_TOTAL_CLIFF_COLLAPSE_DEPOSIT</a></div><div class="ttdeci">const int RASTER_PLOT_TOTAL_CLIFF_COLLAPSE_DEPOSIT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00326">cme.h:326</a></div></div>
<div class="ttc" id="acme_8h_html_afd13787ad3c8e5773f5ec0badd252b4b"><div class="ttname"><a href="cme_8h.html#afd13787ad3c8e5773f5ec0badd252b4b">RASTER_PLOT_SLICE</a></div><div class="ttdeci">const int RASTER_PLOT_SLICE</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00320">cme.h:320</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a8577263897fb809e3b9bb4e39f16c16e"><div class="ttname"><a href="class_c_geom_cell.html#a8577263897fb809e3b9bb4e39f16c16e">CGeomCell::dGetWaveOrientation</a></div><div class="ttdeci">double dGetWaveOrientation(void) const</div><div class="ttdoc">Returns the wave orientation on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00633">cell.cpp:633</a></div></div>
<div class="ttc" id="acme_8h_html_ab6df4c5cadcaf10bd6c560be0a315587"><div class="ttname"><a href="cme_8h.html#ab6df4c5cadcaf10bd6c560be0a315587">RASTER_DEEP_WATER_WAVE_ORIENTATION_NAME</a></div><div class="ttdeci">const string RASTER_DEEP_WATER_WAVE_ORIENTATION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00622">cme.h:622</a></div></div>
<div class="ttc" id="autils__global_8cpp_html_a3caffa5ba0bac0bca723d7d0247d0844"><div class="ttname"><a href="utils__global_8cpp.html#a3caffa5ba0bac0bca723d7d0247d0844">bIsDoubleNotNaN</a></div><div class="ttdeci">bool bIsDoubleNotNaN(double const dX)</div><div class="ttdef"><b>Definition:</b> <a href="utils__global_8cpp_source.html#l00072">utils_global.cpp:72</a></div></div>
<div class="ttc" id="acme_8h_html_a54d05048c62a02e9db8bf64eb74ce53b"><div class="ttname"><a href="cme_8h.html#a54d05048c62a02e9db8bf64eb74ce53b">RASTER_FINE_UNCONS_NAME</a></div><div class="ttdeci">const string RASTER_FINE_UNCONS_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00605">cme.h:605</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_ab2ddaed7c290760c4d53da38ad5887fb"><div class="ttname"><a href="class_c_geom_cell.html#ab2ddaed7c290760c4d53da38ad5887fb">CGeomCell::dGetActualBeachErosion</a></div><div class="ttdeci">double dGetActualBeachErosion(void) const</div><div class="ttdoc">Get actual (constrained) beach erosion.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00768">cell.cpp:768</a></div></div>
<div class="ttc" id="acme_8h_html_a6c43d54b1729f178a910f5b2fd83c13c"><div class="ttname"><a href="cme_8h.html#a6c43d54b1729f178a910f5b2fd83c13c">RASTER_BASEMENT_ELEVATION_NAME</a></div><div class="ttdeci">const string RASTER_BASEMENT_ELEVATION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00575">cme.h:575</a></div></div>
<div class="ttc" id="acme_8h_html_a01a70d7ac0aaa506ffa66e0e93d348b5"><div class="ttname"><a href="cme_8h.html#a01a70d7ac0aaa506ffa66e0e93d348b5">DBL_NODATA</a></div><div class="ttdeci">const double DBL_NODATA</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00469">cme.h:469</a></div></div>
<div class="ttc" id="asimulation_8h_html"><div class="ttname"><a href="simulation_8h.html">simulation.h</a></div><div class="ttdoc">Contains CSimulation definitions.</div></div>
<div class="ttc" id="acme_8h_html_a8fc2e43234fd4a43e8de053a13c7b3e3"><div class="ttname"><a href="cme_8h.html#a8fc2e43234fd4a43e8de053a13c7b3e3">RASTER_POLYGON_GAIN_OR_LOSS_NAME</a></div><div class="ttdeci">const string RASTER_POLYGON_GAIN_OR_LOSS_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00626">cme.h:626</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a770135e779cf4e4d74c9e78f19429d3c"><div class="ttname"><a href="class_c_geom_cell.html#a770135e779cf4e4d74c9e78f19429d3c">CGeomCell::dGetWaveHeight</a></div><div class="ttdeci">double dGetWaveHeight(void) const</div><div class="ttdoc">Returns the wave height on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00614">cell.cpp:614</a></div></div>
<div class="ttc" id="acme_8h_html_af2f55ef83ff3fda1f7dbd69dc53da31a"><div class="ttname"><a href="cme_8h.html#af2f55ef83ff3fda1f7dbd69dc53da31a">RASTER_WAVE_PERIOD_NAME</a></div><div class="ttdeci">const string RASTER_WAVE_PERIOD_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00585">cme.h:585</a></div></div>
<div class="ttc" id="acme_8h_html_ac7b0abd2b993448ab9ce38289fa2babc"><div class="ttname"><a href="cme_8h.html#ac7b0abd2b993448ab9ce38289fa2babc">RASTER_DEEP_WATER_WAVE_HEIGHT_NAME</a></div><div class="ttdeci">const string RASTER_DEEP_WATER_WAVE_HEIGHT_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00623">cme.h:623</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a6d9ce76438644be9fe4aa5b4f7efea3e"><div class="ttname"><a href="class_c_geom_cell.html#a6d9ce76438644be9fe4aa5b4f7efea3e">CGeomCell::dGetInterventionHeight</a></div><div class="ttdeci">double dGetInterventionHeight(void) const</div><div class="ttdoc">Returns the intervention height.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00865">cell.cpp:865</a></div></div>
<div class="ttc" id="acme_8h_html_a044d2c4f21de01d244331ce34b4accfe"><div class="ttname"><a href="cme_8h.html#a044d2c4f21de01d244331ce34b4accfe">RASTER_PLOT_TOTAL_ACTUAL_PLATFORM_EROSION</a></div><div class="ttdeci">const int RASTER_PLOT_TOTAL_ACTUAL_PLATFORM_EROSION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00323">cme.h:323</a></div></div>
<div class="ttc" id="acme_8h_html_a2770e9faecc3ec8cf02f89c40e25751c"><div class="ttname"><a href="cme_8h.html#a2770e9faecc3ec8cf02f89c40e25751c">RASTER_COARSE_CONS_NAME</a></div><div class="ttdeci">const string RASTER_COARSE_CONS_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00610">cme.h:610</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_abceda257060d4bbb533f84796f99ef99"><div class="ttname"><a href="class_c_geom_cell.html#abceda257060d4bbb533f84796f99ef99">CGeomCell::dGetActualPlatformErosion</a></div><div class="ttdeci">double dGetActualPlatformErosion(void) const</div><div class="ttdoc">Get actual (constrained) shore platform erosion.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00552">cell.cpp:552</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a28847f89cc0d216f7f668d0d997837e1"><div class="ttname"><a href="class_c_geom_cell.html#a28847f89cc0d216f7f668d0d997837e1">CGeomCell::SetInActiveZone</a></div><div class="ttdeci">void SetInActiveZone(bool const)</div><div class="ttdoc">Sets a flag to show whether this cell is in the active zone.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00120">cell.cpp:120</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a6387aaac391af63a9f2be1c809ce169c"><div class="ttname"><a href="class_c_geom_cell.html#a6387aaac391af63a9f2be1c809ce169c">CGeomCell::dGetSedimentTopElev</a></div><div class="ttdeci">double dGetSedimentTopElev(void) const</div><div class="ttdoc">Returns the true elevation of the sediment's top surface for this cell (if there is a cliff notch,...</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00389">cell.cpp:389</a></div></div>
<div class="ttc" id="acme_8h_html_abae18453d8413f1dc52aff733dd2d521"><div class="ttname"><a href="cme_8h.html#abae18453d8413f1dc52aff733dd2d521">RASTER_WAVE_HEIGHT_NAME</a></div><div class="ttdeci">const string RASTER_WAVE_HEIGHT_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00582">cme.h:582</a></div></div>
<div class="ttc" id="acme_8h_html_a40ee42349abefec89f1e7dcfd3813b9f"><div class="ttname"><a href="cme_8h.html#a40ee42349abefec89f1e7dcfd3813b9f">RASTER_PLOT_SAND_UNCONSOLIDATED_SEDIMENT</a></div><div class="ttdeci">const int RASTER_PLOT_SAND_UNCONSOLIDATED_SEDIMENT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00315">cme.h:315</a></div></div>
<div class="ttc" id="acme_8h_html_a7abec008cf84fe3fe52ac3158ff7df7d"><div class="ttname"><a href="cme_8h.html#a7abec008cf84fe3fe52ac3158ff7df7d">LF_CAT_DRIFT</a></div><div class="ttdeci">const int LF_CAT_DRIFT</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00229">cme.h:229</a></div></div>
<div class="ttc" id="araster__grid_8h_html"><div class="ttname"><a href="raster__grid_8h.html">raster_grid.h</a></div><div class="ttdoc">Contains CGeomRasterGrid definitions.</div></div>
<div class="ttc" id="autils__global_8cpp_html_a129796f62c254914a851a7d95786b8a4"><div class="ttname"><a href="utils__global_8cpp.html#a129796f62c254914a851a7d95786b8a4">dRound</a></div><div class="ttdeci">double dRound(double const d)</div><div class="ttdef"><b>Definition:</b> <a href="utils__global_8cpp_source.html#l00042">utils_global.cpp:42</a></div></div>
<div class="ttc" id="aclass_c_r_w_cell_sediment_html_a520b31404bb1c3dd30d9c84fe84e11e8"><div class="ttname"><a href="class_c_r_w_cell_sediment.html#a520b31404bb1c3dd30d9c84fe84e11e8">CRWCellSediment::SetFine</a></div><div class="ttdeci">void SetFine(double const)</div><div class="ttdef"><b>Definition:</b> <a href="cell__sediment_8cpp_source.html#l00069">cell_sediment.cpp:69</a></div></div>
<div class="ttc" id="acme_8h_html_a9ccfb3961b53c5abeb545894633e0623"><div class="ttname"><a href="cme_8h.html#a9ccfb3961b53c5abeb545894633e0623">RASTER_POLYGON_UPDRIFT_OR_DOWNDRIFT_NAME</a></div><div class="ttdeci">const string RASTER_POLYGON_UPDRIFT_OR_DOWNDRIFT_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00625">cme.h:625</a></div></div>
<div class="ttc" id="acme_8h_html_ad9c811b13123a260ecae06bdb57cf1e5"><div class="ttname"><a href="cme_8h.html#ad9c811b13123a260ecae06bdb57cf1e5">RTN_ERR_GRIDCREATE</a></div><div class="ttdeci">const int RTN_ERR_GRIDCREATE</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00409">cme.h:409</a></div></div>
<div class="ttc" id="acme_8h_html_af871d618bcd3e2f5732a47fecc733ea8"><div class="ttname"><a href="cme_8h.html#af871d618bcd3e2f5732a47fecc733ea8">RASTER_PLOT_COAST</a></div><div class="ttdeci">const int RASTER_PLOT_COAST</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00296">cme.h:296</a></div></div>
<div class="ttc" id="acme_8h_html_ac2a38a420ed1a2fc66d93a5d16d6a27b"><div class="ttname"><a href="cme_8h.html#ac2a38a420ed1a2fc66d93a5d16d6a27b">RTN_ERR_RASTER_FILE_READ</a></div><div class="ttdeci">const int RTN_ERR_RASTER_FILE_READ</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00365">cme.h:365</a></div></div>
<div class="ttc" id="acme_8h_html_a1f9cf27d22212615b1f73f906838435a"><div class="ttname"><a href="cme_8h.html#a1f9cf27d22212615b1f73f906838435a">RASTER_INTERVENTION_HEIGHT_NAME</a></div><div class="ttdeci">const string RASTER_INTERVENTION_HEIGHT_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00602">cme.h:602</a></div></div>
<div class="ttc" id="acme_8h_html_a387b44f58bdc286ae3af7e6fde84d194"><div class="ttname"><a href="cme_8h.html#a387b44f58bdc286ae3af7e6fde84d194">RASTER_PLOT_POTENTIAL_PLATFORM_EROSION</a></div><div class="ttdeci">const int RASTER_PLOT_POTENTIAL_PLATFORM_EROSION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00313">cme.h:313</a></div></div>
<div class="ttc" id="acme_8h_html_a528944ef3940763bea48665270062c0b"><div class="ttname"><a href="cme_8h.html#a528944ef3940763bea48665270062c0b">RASTER_POLYGON_NAME</a></div><div class="ttdeci">const string RASTER_POLYGON_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00618">cme.h:618</a></div></div>
<div class="ttc" id="acme_8h_html_a952eac791b596a61bba0a133a3bb439f"><div class="ttname"><a href="cme_8h.html#a952eac791b596a61bba0a133a3bb439f">PI</a></div><div class="ttdeci">const double PI</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00444">cme.h:444</a></div></div>
<div class="ttc" id="acme_8h_html_a931b38347583073117babf8704a2b08f"><div class="ttname"><a href="cme_8h.html#a931b38347583073117babf8704a2b08f">RASTER_TOTAL_POTENTIAL_BEACH_EROSION_NAME</a></div><div class="ttdeci">const string RASTER_TOTAL_POTENTIAL_BEACH_EROSION_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00596">cme.h:596</a></div></div>
<div class="ttc" id="acme_8h_html_abb9979a86da80c3bec2abe8c3670096b"><div class="ttname"><a href="cme_8h.html#abb9979a86da80c3bec2abe8c3670096b">RASTER_PLOT_NORMAL</a></div><div class="ttdeci">const int RASTER_PLOT_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00307">cme.h:307</a></div></div>
<div class="ttc" id="acme_8h_html_a12194d8610af4fb565cf1c7ed7616e81"><div class="ttname"><a href="cme_8h.html#a12194d8610af4fb565cf1c7ed7616e81">INTERVENTION_HEIGHT_RASTER</a></div><div class="ttdeci">const int INTERVENTION_HEIGHT_RASTER</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00257">cme.h:257</a></div></div>
<div class="ttc" id="acme_8h_html_ae3b6dc50cfc97050529faa5e0bd66136"><div class="ttname"><a href="cme_8h.html#ae3b6dc50cfc97050529faa5e0bd66136">tAbs</a></div><div class="ttdeci">T tAbs(T a)</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00793">cme.h:793</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a28b760b0a9e63afd01e29610888fc7bc"><div class="ttname"><a href="class_c_geom_cell.html#a28b760b0a9e63afd01e29610888fc7bc">CGeomCell::bIsInContiguousSea</a></div><div class="ttdeci">bool bIsInContiguousSea(void) const</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00102">cell.cpp:102</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a3a378431e2f6095792582989f50fb435"><div class="ttname"><a href="class_c_geom_cell.html#a3a378431e2f6095792582989f50fb435">CGeomCell::dGetSeaDepth</a></div><div class="ttdeci">double dGetSeaDepth(void) const</div><div class="ttdoc">Returns the depth of seawater on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00296">cell.cpp:296</a></div></div>
<div class="ttc" id="acme_8h_html_af8f82e44fc894cb0fa341310405fbb46"><div class="ttname"><a href="cme_8h.html#af8f82e44fc894cb0fa341310405fbb46">RASTER_PLOT_DEEP_WATER_WAVE_ORIENTATION</a></div><div class="ttdeci">const int RASTER_PLOT_DEEP_WATER_WAVE_ORIENTATION</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00298">cme.h:298</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a9e5f9123fec3be74aebee4a85a0a7772"><div class="ttname"><a href="class_c_geom_cell.html#a9e5f9123fec3be74aebee4a85a0a7772">CGeomCell::dGetTotActualPlatformErosion</a></div><div class="ttdeci">double dGetTotActualPlatformErosion(void) const</div><div class="ttdoc">Get total actual (constrained) shore platform erosion.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00558">cell.cpp:558</a></div></div>
<div class="ttc" id="acme_8h_html_a37eb630702e841414032e3fb04a34e18"><div class="ttname"><a href="cme_8h.html#a37eb630702e841414032e3fb04a34e18">FINE_UNCONS_RASTER</a></div><div class="ttdeci">const int FINE_UNCONS_RASTER</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00251">cme.h:251</a></div></div>
<div class="ttc" id="acme_8h_html_a6da5abe13cf250e9663012ef6633d92a"><div class="ttname"><a href="cme_8h.html#a6da5abe13cf250e9663012ef6633d92a">NO_NONZERO_THICKNESS_LAYERS</a></div><div class="ttdeci">const int NO_NONZERO_THICKNESS_LAYERS</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00421">cme.h:421</a></div></div>
<div class="ttc" id="acme_8h_html_a102d076b6876501ee8fb3bbd9656b837"><div class="ttname"><a href="cme_8h.html#a102d076b6876501ee8fb3bbd9656b837">RASTER_SAND_UNCONS_NAME</a></div><div class="ttdeci">const string RASTER_SAND_UNCONS_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00606">cme.h:606</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_a213153422f9420825faafb87281e9f64"><div class="ttname"><a href="class_c_geom_cell.html#a213153422f9420825faafb87281e9f64">CGeomCell::SetWaveHeight</a></div><div class="ttdeci">void SetWaveHeight(double const)</div><div class="ttdoc">Sets the wave height on this cell, also increments the total wave height.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00604">cell.cpp:604</a></div></div>
<div class="ttc" id="acme_8h_html_a7cb9fec0d7bdd97701926348498d40cd"><div class="ttname"><a href="cme_8h.html#a7cb9fec0d7bdd97701926348498d40cd">RASTER_LANDFORM_NAME</a></div><div class="ttdeci">const string RASTER_LANDFORM_NAME</div><div class="ttdef"><b>Definition:</b> <a href="cme_8h_source.html#l00600">cme.h:600</a></div></div>
<div class="ttc" id="aclass_c_geom_cell_html_ac208a644e3d6cdcd5f232b4e0b8ae1d3"><div class="ttname"><a href="class_c_geom_cell.html#ac208a644e3d6cdcd5f232b4e0b8ae1d3">CGeomCell::SetDeepWaterWaveHeight</a></div><div class="ttdeci">void SetDeepWaterWaveHeight(double const)</div><div class="ttdoc">Sets the deep water wave height on this cell.</div><div class="ttdef"><b>Definition:</b> <a href="cell_8cpp_source.html#l00645">cell.cpp:645</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 9 2020 19:46:12 for CoastalME (Coastal Modelling Environment) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
